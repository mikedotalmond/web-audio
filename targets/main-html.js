/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(Jc){function n(a,b){function c(){}c.prototype=a;var e=new c,d;for(d in b)e[d]=b[d];b.toString!==Object.prototype.toString&&(e.toString=b.toString);return e}function Wb(a){return a instanceof Array?function(){return u.iter(a)}:"function"==typeof a.iterator?w(a,a.iterator):a.iterator}function w(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Uc++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var ma=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};ma.__name__=!0;ma.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new p("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new p("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},
__class__:ma};var u=function(){};u.__name__=!0;u.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};u.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,c)};u.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};u.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var ua=function(){};
ua.__name__=!0;ua.array=function(a){for(var b=[],a=Wb(a)();a.hasNext();){var c=a.next();b.push(c)}return b};ua.count=function(a,b){var c=0;if(null==b)for(var e=Wb(a)();e.hasNext();)e.next(),c++;else for(e=Wb(a)();e.hasNext();){var d=e.next();b(d)&&c++}return c};ua.indexOf=function(a,b){for(var c=0,e=Wb(a)();e.hasNext();){var d=e.next();if(b==d)return c;c++}return-1};Math.__name__=!0;var O=function(){};O.__name__=!0;O.field=function(a,b){try{return a[b]}catch(c){return c instanceof p&&(c=c.val),null}};
O.setField=function(a,b,c){a[b]=c};O.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};O.callMethod=function(a,b,c){return b.apply(a,c)};O.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,e;for(e in a)"__id__"!=e&&"hx__closures__"!=e&&c.call(a,e)&&b.push(e)}return b};var D=function(){};D.__name__=!0;D.is=function(a,b){return C.__instanceof(a,b)};D.instance=function(a,b){return a instanceof b?a:null};D.string=
function(a){return C.__string_rec(a,"")};D["int"]=function(a){return a|0};D.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==u.cca(a,1)||88==u.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};D.parseFloat=function(a){return parseFloat(a)};var na=function(){this.b=""};na.__name__=!0;na.prototype={add:function(a){this.b+=D.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+u.substr(a,b,null):this.b+u.substr(a,b,c)},__class__:na};var Ta=function(){};Ta.__name__=!0;Ta.startsWith=function(a,
b){return a.length>=b.length&&u.substr(a,0,b.length)==b};Ta.fastCodeAt=function(a,b){return a.charCodeAt(b)};var l=function(a){this.nodeType=a;this.children=[];this.attributeMap=new X};l.__name__=!0;l.parse=function(a){return oa.parse(a)};l.createElement=function(a){var b=new l(l.Element);if(b.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};l.createPCData=function(a){var b=new l(l.PCData);if(b.nodeType==l.Document||b.nodeType==l.Element)throw new p("Bad node type, unexpected "+
b.nodeType);b.nodeValue=a;return b};l.createCData=function(a){var b=new l(l.CData);if(b.nodeType==l.Document||b.nodeType==l.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};l.createComment=function(a){var b=new l(l.Comment);if(b.nodeType==l.Document||b.nodeType==l.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};l.createDocType=function(a){var b=new l(l.DocType);if(b.nodeType==l.Document||b.nodeType==l.Element)throw new p("Bad node type, unexpected "+
b.nodeType);b.nodeValue=a;return b};l.createProcessingInstruction=function(a){var b=new l(l.ProcessingInstruction);if(b.nodeType==l.Document||b.nodeType==l.Element)throw new p("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};l.createDocument=function(){return new l(l.Document)};l.prototype={get:function(a){if(this.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.get(a)},set:function(a,b){if(this.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+
this.nodeType);this.attributeMap.set(a,b)},exists:function(a){if(this.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.exists(a)},elements:function(){if(this.nodeType!=l.Document&&this.nodeType!=l.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=[],b=0,c=this.children;b<c.length;){var e=c[b];++b;e.nodeType==l.Element&&a.push(e)}return u.iter(a)},elementsNamed:function(a){if(this.nodeType!=
l.Document&&this.nodeType!=l.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);for(var b=[],c=0,e=this.children;c<e.length;){var d=e[c];++c;var f;if(f=d.nodeType==l.Element){if(d.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+d.nodeType);f=d.nodeName==a}f&&b.push(d)}return u.iter(b)},addChild:function(a){if(this.nodeType!=l.Document&&this.nodeType!=l.Element)throw new p("Bad node type, expected Element or Document but found "+
this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=l.Document&&this.nodeType!=l.Element)throw new p("Bad node type, expected Element or Document but found "+this.nodeType);return u.remove(this.children,a)?(a.parent=null,!0):!1},__class__:l};var Xb=function(a,b,c){this.change=new B;this.observers=new Fa;this.name=a;this.mapping=c;this.setDefault(b)};Xb.__name__=!0;Xb.prototype={setDefault:function(a,b){null==b&&(b=!1);
var c;b?(c=a,a=this.mapping.map(c)):c=this.mapping.mapInverse(a);this.normalisedDefaultValue=c;this.defaultValue=a;this.setValue(c,!0)},setValue:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);a=b?a:this.mapping.mapInverse(a);if(c||a!=this.normalisedValue)this.normalisedValue=a,this.change.emit(this)},setToDefault:function(){this.setValue(this.normalisedDefaultValue,!0)},getValue:function(a){null==a&&(a=!1);return a?this.normalisedValue:this.mapping.map(this.normalisedValue)},addObservers:function(a,
b,c){null==c&&(c=!1);null==b&&(b=!1);for(var e=0;e<a.length;){var d=a[e];++e;this.addObserver(d,b,c)}},addObserver:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);if(null==this.observers.h.__keys__[a.__id__]){var e=this.change.connect(w(a,a.onParameterChange));if(c)e.once();else this.observers.set(a,e)}if(b)a.onParameterChange(this)},removeObserver:function(a){null!=this.observers.h.__keys__[a.__id__]&&(this.observers.h[a.__id__].dispose(),this.observers.remove(a))},__class__:Xb};var Ua=function(){};
Ua.__name__=!0;Ua.prototype={__class__:Ua};var Ga=function(){};Ga.__name__=!0;Ga.prototype={__class__:Ga};var gb=function(){this.max=1;this.min=0};gb.__name__=!0;gb.__interfaces__=[Ga];gb.prototype={map:function(a){return 0.5<a?1:0},mapInverse:function(a){return 1==a?1:0},__class__:gb};var r={__ename__:!0,__constructs__:["BOOL","INT","FLOAT","FLOAT_EXPONENTIAL"],BOOL:["BOOL",0]};r.BOOL.__enum__=r;r.INT=["INT",1];r.INT.__enum__=r;r.FLOAT=["FLOAT",2];r.FLOAT.__enum__=r;r.FLOAT_EXPONENTIAL=["FLOAT_EXPONENTIAL",
3];r.FLOAT_EXPONENTIAL.__enum__=r;var x=function(){};x.__name__=!0;x.getMapping=function(a,b,c){null==c&&(c=1);null==b&&(b=0);switch(a[1]){case 0:return new gb;case 1:return new hb(b|0,c|0);case 2:return new ib(b,c);case 3:return new jb(b,c)}return null};var jb=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b;this._t2=0;0>=a&&(this._t2=1+-1*a);this._min=a+this._t2;this._max=b+this._t2;this._t0=Math.log(this._max/this._min);this._t1=1/this._t0};jb.__name__=!0;jb.__interfaces__=[Ga];
jb.prototype={map:function(a){return this._min*Math.exp(a*this._t0)-this._t2},mapInverse:function(a){return Math.log((a+this._t2)/this._min)*this._t1},__class__:jb};var ib=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b};ib.__name__=!0;ib.__interfaces__=[Ga];ib.prototype={map:function(a){return this.min+a*(this.max-this.min)},mapInverse:function(a){return(a-this.min)/(this.max-this.min)},__class__:ib};var hb=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b};hb.__name__=
!0;hb.__interfaces__=[Ga];hb.prototype={map:function(a){return Math.round(this.min+a*(this.max-this.min))},mapInverse:function(a){return(a-this.min)/(this.max-this.min)},__class__:hb};var va=function(){};va.__name__=!0;var y=function(){this._flags=0;this.owner=this.next=null};y.__name__=!0;y.__interfaces__=[va];y.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},
__class__:y,__properties__:{get_name:"get_name"}};var g=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};g.__name__=!0;g.__interfaces__=[va];g.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,
c=this.firstComponent;null!=c;){var e=c.next;if(c==a)return null==b?this.firstComponent=e:(b.owner=this,b.next=e),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=e}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,e=this.firstChild;null!=e;)c=e,e=e.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=
null,c=this.firstChild;null!=c;){var e=c.next;if(c==a){null==b?this.firstChild=e:b.next=e;c.parent=null;c.next=null;break}b=c;c=e}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},toString:function(){return this.toStringImpl("")},toStringImpl:function(a){for(var b="",c=this.firstComponent;null!=c;)b+=c.get_name(),
null!=c.next&&(b+=", "),c=c.next;for(var b=b+"\n",c=String.fromCharCode(9492),e=String.fromCharCode(9500),d=String.fromCharCode(9472),f=String.fromCharCode(9474),h=this.firstChild;null!=h;)var s=null==h.next,b=b+(a+(s?c:e)+d+d+" "),b=b+h.toStringImpl(a+(s?" ":f)+"   "),h=h.next;return b},__class__:g};var Kc=function(){};Kc.__name__=!0;var Yb=function(){};Yb.__name__=!0;Yb.prototype={__class__:Yb};var Ha=function(){};Ha.__name__=!0;Ha.__interfaces__=[Yb];Ha.prototype={init:function(){var a=this;q.fixAndroidMath();
var b=null;try{b=window.flambe.canvas}catch(c){c instanceof p&&(c=c.val)}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new Ia(b);this._pointer=new P;this._mouse=new kb(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new Ja;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";
this._container.style.msTouchAction="none";var e=0,d=function(c){if(!(1E3>c.timeStamp-e)){var d=b.getBoundingClientRect(),f=a.getX(c,d),d=a.getY(c,d);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(f,d,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,d);break;case "mouseup":a._mouse.submitUp(f,d,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,d,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};
window.addEventListener("mousedown",d,!1);window.addEventListener("mousemove",d,!1);window.addEventListener("mouseup",d,!1);b.addEventListener("mousewheel",d,!1);b.addEventListener("DOMMouseScroll",d,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var f="undefined"!=typeof window.ontouchstart,d="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||d){var h=new lb(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=h;d=function(b){var c;
c=f?b.changedTouches:[b];var d=b.target.getBoundingClientRect();e=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();q.SHOULD_HIDE_MOBILE_BROWSER&&q.hideMobileBrowser();for(b=0;b<c.length;){var W=c[b];++b;var i=a.getX(W,d),s=a.getY(W,d);h.submitDown((f?W.identifier:W.pointerId)|0,i,s)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)W=c[b],++b,i=a.getX(W,d),s=a.getY(W,d),h.submitMove((f?W.identifier:
W.pointerId)|0,i,s);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)W=c[b],++b,i=a.getX(W,d),s=a.getY(W,d),h.submitUp((f?W.identifier:W.pointerId)|0,i,s)}};f?(b.addEventListener("touchstart",d,!1),b.addEventListener("touchmove",d,!1),b.addEventListener("touchend",d,!1),b.addEventListener("touchcancel",d,!1)):(b.addEventListener("MSPointerDown",d,!1),b.addEventListener("MSPointerMove",d,!1),b.addEventListener("MSPointerUp",d,!1))}else this._touch=new mb;
var s=window.onerror;window.onerror=function(a,b,c){k.uncaughtError.emit(a);return null!=s?s(a,b,c):!1};var i=q.loadExtension("hidden",window.document);null!=i.value?(d=function(){k.hidden.set__(O.field(window.document,i.field))},d(null),window.document.addEventListener(i.prefix+"visibilitychange",d,!1)):(d=function(a){k.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",d,!1),window.addEventListener("pagehide",d,!1));k.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});
this._skipFrame=!1;this._lastUpdate=Date.now();var g=q.loadExtension("requestAnimationFrame").value;if(null!=g){var j=window.performance,m=null!=j&&q.polyfill("now",j);m?this._lastUpdate=j.now():null;var l=null,l=function(c){a.update(m?j.now():c);g(l,b)};g(l,b)}else window.setInterval(function(){a.update(Date.now())},16);Va.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new z(this,a)).promise},getStage:function(){return this._stage},getTime:function(){return Date.now()/
1E3},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;k.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new ba;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;
case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Lc.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(q.detectSlowDriver(b))null;
else return new nb(this._stage,b)}catch(c){c instanceof p&&(c=c.val)}return new Ka(a)},__class__:Ha};var R=function(a,b){this._value=a;this._changed=null!=b?new wa(b):null};R.__name__=!0;R.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new wa);return this._changed},__class__:R,__properties__:{get_changed:"get_changed",
set__:"set__"}};var La=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};La.__name__=!0;La.__interfaces__=[va];La.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:La};var K=function(a){this._head=null!=a?new La(this,a):null;this._deferredTasks=null};K.__name__=!0;K.prototype={connectImpl:function(a,b){var c=this,e=new La(this,a);this._head==K.DISPATCHING_SENTINEL?
this.defer(function(){c.listAdd(e,b)}):this.listAdd(e,b);return e},disconnect:function(a){var b=this;this._head==K.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Zb(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=K.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),
a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,e=this._head;null!=e;)c=e,e=e._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:K};var wa=function(a){K.call(this,a)};wa.__name__=!0;wa.__super__=K;wa.prototype=n(K.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==
K.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),e=c;null!=e;)e._listener(a,b),e.stayInList||e.dispose(),e=e._next;this.didEmit(c)},__class__:wa});var B=function(a){K.call(this,a)};B.__name__=!0;B.__super__=K;B.prototype=n(K.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==K.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},
emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:B});var F=function(a,b){this._behavior=null;R.call(this,a,b)};F.__name__=!0;F.__super__=R;F.prototype=n(R.prototype,{set__:function(a){this._behavior=null;return R.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(R.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,
b,c){this.set_behavior(new Wa(this._value,a,b,c))},animateBy:function(a,b,c){this.set_behavior(new Wa(this._value,this._value+a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:F,__properties__:n(R.prototype.__properties__,{set_behavior:"set_behavior"})});var k=function(){};k.__name__=!0;k.init=function(){k._calledInit||(k._platform.init(),k._calledInit=!0)};k.loadAssetPack=function(a){return k._platform.loadAssetPack(a)};var Va=function(){};Va.__name__=!0;Va.info=
function(){null};Va.__super__=Kc;Va.prototype=n(Kc.prototype,{__class__:Va});var $b=function(){this._realDt=0};$b.__name__=!0;$b.__super__=y;$b.prototype=n(y.prototype,{get_name:function(){return"SpeedAdjuster_10"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:$b});var ac=function(){};ac.__name__=!0;ac.prototype={__class__:ac};var H=function(){};H.__name__=!0;H.linear=function(a){return a};H.quadOut=function(a){return a*(2-a)};H.quartOut=function(a){return 1-
--a*a*a*a};var Wa=function(a,b,c,e){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=e?e:H.linear};Wa.__name__=!0;Wa.__interfaces__=[ac];Wa.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Wa};var Xa=function(){};Xa.__name__=!0;Xa.__interfaces__=[va];var o={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),
WEBP:["WEBP",0]};o.WEBP.__enum__=o;o.JXR=["JXR",1];o.JXR.__enum__=o;o.PNG=["PNG",2];o.PNG.__enum__=o;o.JPG=["JPG",3];o.JPG.__enum__=o;o.GIF=["GIF",4];o.GIF.__enum__=o;o.DDS=["DDS",5];o.DDS.__enum__=o;o.PVR=["PVR",6];o.PVR.__enum__=o;o.PKM=["PKM",7];o.PKM.__enum__=o;o.MP3=["MP3",8];o.MP3.__enum__=o;o.M4A=["M4A",9];o.M4A.__enum__=o;o.OPUS=["OPUS",10];o.OPUS.__enum__=o;o.OGG=["OGG",11];o.OGG.__enum__=o;o.WAV=["WAV",12];o.WAV.__enum__=o;o.Data=["Data",13];o.Data.__enum__=o;var bc=function(a,b,c,e){this.name=
a;this.url=b;this.format=c;this.bytes=e};bc.__name__=!0;bc.prototype={__class__:bc};var ob=function(){};ob.__name__=!0;ob.__interfaces__=[va];ob.prototype={__class__:ob};var pb=function(){};pb.__name__=!0;pb.__interfaces__=[Xa];pb.prototype={__class__:pb};var Z=function(){this._localBase=this._remoteBase=null;this._entries=[]};Z.__name__=!0;Z.fromAssets=function(a,b){null==b&&(b=!0);var c=O.field(qb.getType(Z).assets[0],a);if(null==c){if(b)throw new p(S.withFields("Missing asset pack",["name",a]));
return null}var e=new Z;e.set_localBase("assets");for(var d=0;d<c.length;){var f=c[d];++d;var h=f.name,s=a+"/"+h+"?v="+D.string(f.md5),i=Z.inferFormat(h);i!=o.Data&&(h=S.removeFileExtension(h));e.add(h,s,f.bytes,i)}return e};Z.inferFormat=function(a){a=S.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return o.GIF;case "jpg":case "jpeg":return o.JPG;case "jxr":case "wdp":return o.JXR;case "png":return o.PNG;case "webp":return o.WEBP;case "dds":return o.DDS;case "pvr":return o.PVR;
case "pkm":return o.PKM;case "m4a":return o.M4A;case "mp3":return o.MP3;case "ogg":return o.OGG;case "opus":return o.OPUS;case "wav":return o.WAV}else null;return o.Data};Z.prototype={add:function(a,b,c,e){null==c&&(c=0);null==e&&(e=Z.inferFormat(b));a=new bc(a,b,e,c);this._entries.push(a);return a},iterator:function(){return u.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Z._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?S.joinPath(b,
a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Mc.that(!Ta.startsWith(a,"http://")&&!Ta.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:Z,__properties__:{get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var rb=function(a){y.call(this);this.container=a;this.behaviours=
[];this.change=new xa;this.visibleBounds=new ya;this._rotation=this._panY=this._panX=this._targetY=this._targetX=0;this._zoom=1;this.invalidated=!0};rb.__name__=!0;rb.__super__=y;rb.prototype=n(y.prototype,{get_name:function(){return"Camera_7"},onAdded:function(){this.container=this.owner;this.rootSprite=this.container._compMap.Sprite_0;if(null==this.rootSprite)throw new p("Uh-oh! No Sprite found in the container Entity "+D.string(this.container));this.owner.add(this.controller=new sb(this));this.stageResized=
k._platform.getStage().resize.connect(w(this,this.onStageResized),!0);this.onStageResized()},onRemoved:function(){this.reset();for(var a=0,b=this.behaviours;a<b.length;){var c=b[a];++a;c.dispose()}this.behaviours=null;null!=this.controller&&(this.controller.dispose(),this.controller=null);null!=this.stageResized&&(this.stageResized.dispose(),this.stageResized=null);this.container=this.rootSprite=null},onUpdate:function(a){for(var b=this.stageCentreX,c=this.stageCentreY,e=0,d=this.behaviours;e<d.length;){var f=
d[e];++e;f.update(a)}if(this.invalidated){this.rootSprite.anchorX.set__(this._targetX-this._panX);this.rootSprite.anchorY.set__(this._targetY-this._panY);this.rootSprite.rotation.set__(this._rotation);this.rootSprite.setScale(this._zoom);this.rootSprite.x.set__(b);this.rootSprite.y.set__(c);this.visibleBounds.set(this.rootSprite.anchorX._value-b/this._zoom,this.rootSprite.anchorY._value-c/this._zoom,this.stageWidth/this._zoom,this.stageHeight/this._zoom);a=0;for(b=this.behaviours;a<b.length;)c=b[a],
++a,c.postUpdate();this.invalidated=!1;this.change.emit()}},onStageResized:function(){this.stageWidth=k._platform.getStage().get_width();this.stageHeight=k._platform.getStage().get_height();this.stageCentreX=this.stageWidth/2;this.stageCentreY=this.stageHeight/2;this.invalidated=!0},reset:function(){this.invalidated=this.invalidated||1!=this._zoom;this._zoom=1;this.invalidated=this.invalidated||0!=this._targetX;this._targetX=0;this.invalidated=this.invalidated||0!=this._targetY;this._targetY=0;this.set_panX(this.set_panY(function(a){a.invalidated=
a.invalidated||0!=a._rotation;return a._rotation=0}(this)));this.invalidated=!0;this.controller.setToCurrent();return this},set_zoom:function(a){this.invalidated=this.invalidated||a!=this._zoom;return this._zoom=a},set_rotation:function(a){this.invalidated=this.invalidated||a!=this._rotation;return this._rotation=a},set_targetX:function(a){this.invalidated=this.invalidated||a!=this._targetX;return this._targetX=a},set_targetY:function(a){this.invalidated=this.invalidated||a!=this._targetY;return this._targetY=
a},set_panX:function(a){this.invalidated=this.invalidated||a!=this._panX;return this._panX=a},set_panY:function(a){this.invalidated=this.invalidated||a!=this._panY;return this._panY=a},__class__:rb,__properties__:n(y.prototype.__properties__,{set_rotation:"set_rotation",set_panY:"set_panY",set_panX:"set_panX",set_targetY:"set_targetY",set_targetX:"set_targetX",set_zoom:"set_zoom"})});var sb=function(a){this.camera=null;y.call(this);this.camera=a};sb.__name__=!0;sb.__super__=y;sb.prototype=n(y.prototype,
{get_name:function(){return"CameraController_6"},onAdded:function(){this.panX=new F(this.camera._panX);this.panY=new F(this.camera._panY);this.targetX=new F(this.camera._targetX);this.targetY=new F(this.camera._targetY);this.zoom=new F(this.camera._zoom);this.rotation=new F(this.camera._rotation)},onUpdate:function(a){this.panX.update(a);this.panY.update(a);this.targetX.update(a);this.targetY.update(a);this.zoom.update(a);this.rotation.update(a);this.camera.set_panX(this.panX._value);this.camera.set_panY(this.panY._value);
this.camera.set_targetX(this.targetX._value);this.camera.set_targetY(this.targetY._value);this.camera.set_zoom(this.zoom._value);this.camera.set_rotation(this.rotation._value)},onRemoved:function(){this.rotation=this.zoom=this.targetY=this.targetX=this.panY=this.panX=this.camera=null},setToCurrent:function(){this.panX.set__(this.camera._panX);this.panY.set__(this.camera._panY);this.targetX.set__(this.camera._targetX);this.targetY.set__(this.camera._targetY);this.zoom.set__(this.camera._zoom);this.rotation.set__(this.camera._rotation)},
__class__:sb});var pa=function(a){this._enabled=!1;this.camera=a;this.controller=a.controller};pa.__name__=!0;pa.prototype={update:function(){},postUpdate:function(){},dispose:function(){this.set_enabled(!1);this.camera=this.controller=null},set_enabled:function(a){return this._enabled=a},__class__:pa,__properties__:{set_enabled:"set_enabled"}};var tb=function(a,b){this.scrollZoom=!0;this.mouseMoved=!1;this.lastX=this.lastY=this.x=this.y=0;this.bounds=b;pa.call(this,a)};tb.__name__=!0;tb.__super__=
pa;tb.prototype=n(pa.prototype,{validatePanX:function(a){if(this._enabled&&null!=this.bounds)if(0>a){if(0<this.camera.visibleBounds.get_right()-this.bounds.get_right())return 0}else if(0<a&&0>this.camera.visibleBounds.x-this.bounds.x)return 0;return a},validatePanY:function(a){if(this._enabled&&null!=this.bounds)if(0>a){if(0<this.camera.visibleBounds.get_bottom()-this.bounds.get_bottom())return 0}else if(0<a&&0>this.camera.visibleBounds.y-this.bounds.y)return 0;return a},update:function(){if(this.mouseMoved){this.mouseMoved=
!1;var a=this.controller,b=a.zoom._value,c=(this.x-this.lastX)/b,b=(this.y-this.lastY)/b;this.lastX=this.x;this.lastY=this.y;var e=a.panX;e.set__(e._value+this.validatePanX(c));a=a.panY;a.set__(a._value+this.validatePanY(b))}},onMouseDown:function(a){if(this._enabled){var b=k._platform.getMouse();if(a.button==Q.Right||a.button==Q.Left&&k._platform.getKeyboard().isDown(d.Space))this.lastX=a.viewX,this.lastY=a.viewY,this.mouseDownConnection.dispose(),this.mouseDownConnection=null,this.mouseMoveConnection=
b.move.connect(w(this,this.onMouseMove)),this.mouseUpConnection=b.up.connect(w(this,this.onMouseUp))}},onMouseUp:function(){this.mouseUpConnection.dispose();this.mouseUpConnection=null;this.mouseMoveConnection.dispose();this.mouseMoveConnection=null;this._enabled&&(this.mouseDownConnection=k._platform.getMouse().down.connect(w(this,this.onMouseDown)))},onMouseMove:function(a){this._enabled&&(this.mouseMoved=!0,this.x=a.viewX,this.y=a.viewY)},onMouseScroll:function(a){if(this._enabled&&this.scrollZoom){var b=
this.controller;k._platform.getKeyboard().isDown(d.Shift)?b.rotation.animateBy(0<a?-22.5:22.5,0.25,H.quadOut):(a=b.zoom._value*(0<a?1.2:0.8),a!=b.zoom._value&&b.zoom.animateTo(a,0.25,H.quadOut))}},setupControl:function(){var a=k._platform.getMouse();this.mouseDownConnection=a.down.connect(w(this,this.onMouseDown));this.mouseScrollConnection=a.scroll.connect(w(this,this.onMouseScroll))},removeControl:function(){null!=this.mouseMoveConnection&&(this.mouseMoveConnection.dispose(),this.mouseMoveConnection=
null);null!=this.mouseScrollConnection&&(this.mouseScrollConnection.dispose(),this.mouseScrollConnection=null);null!=this.mouseDownConnection&&(this.mouseDownConnection.dispose(),this.mouseDownConnection=null);null!=this.mouseUpConnection&&(this.mouseUpConnection.dispose(),this.mouseUpConnection=null)},set_enabled:function(a){!a&&this._enabled?(this.removeControl(),this._enabled=!1):k._platform.getMouse().get_supported()&&a&&!this._enabled&&(this.setupControl(),this._enabled=!0);return this._enabled},
__class__:tb});var ub=function(a,b,c){this.min=b;this.max=c;pa.call(this,a)};ub.__name__=!0;ub.__super__=pa;ub.prototype=n(pa.prototype,{update:function(){if(this._enabled){var a=Math.min(Math.max(this.min,this.camera._zoom),this.max);this.camera._zoom!=a&&(this.camera._zoom=this.controller.zoom.set__(a))}},__class__:ub});var cc=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};cc.__name__=!0;cc.prototype={__class__:cc};var t=function(){this._sinCache=this._cosCache=0;this.blendMode=
this.scissor=null;var a=this;y.call(this);this._flags|=182;this._localMatrix=new ea;var b=function(){a._flags|=24};this.x=new F(0,b);this.y=new F(0,b);this.rotation=new F(0,function(){a._flags|=152});this.scaleX=new F(1,b);this.scaleY=new F(1,b);this.anchorX=new F(0,b);this.anchorY=new F(0,b);this.alpha=new F(1)};t.__name__=!0;t.hitTest=function(a,b,c){var e=a._compMap.Sprite_0;if(null!=e){if(6!=(e._flags&6))return null;e.getLocalMatrix().inverseTransform(b,c,t._scratchPoint)&&(b=t._scratchPoint.x,
c=t._scratchPoint.y);var d=e.scissor;if(null!=d&&!d.contains(b,c))return null}a=t.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=e&&e.containsLocal(b,c)?e:null};t.render=function(a,b){var c=a._compMap.Sprite_0;if(null!=c){var e=c.alpha._value;if(0==(c._flags&2)||0>=e)return;b.save();1>e&&b.multiplyAlpha(e);null!=c.blendMode&&b.setBlendMode(c.blendMode);var e=c.getLocalMatrix(),d=e.m02,f=e.m12;0!=(c._flags&32)&&(d=Math.round(d),f=Math.round(f));b.transform(e.m00,e.m10,e.m01,e.m11,d,f);e=
c.scissor;null!=e&&b.applyScissor(e.x,e.y,e.width,e.height);c.draw(b)}e=a._compMap.Director_8;if(null!=e){e=e.occludedScenes;for(d=0;d<e.length;)f=e[d],++d,t.render(f,b)}for(e=a.firstChild;null!=e;)d=e.next,t.render(e,b),e=d;null!=c&&b.restore()};t.hitTestBackwards=function(a,b,c){if(null!=a){var e=t.hitTestBackwards(a.next,b,c);return null!=e?e:t.hitTest(a,b,c)}return null};t.__super__=y;t.prototype=n(y.prototype,{get_name:function(){return"Sprite_0"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},
containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){if(0!=(this._flags&8)){this._flags&=-9;if(0!=(this._flags&128)){this._flags&=-129;var a=3.141592653589793*this.rotation._value/180;this._sinCache=Math.sin(a);this._cosCache=Math.cos(a)}var a=this.scaleX._value,b=this.scaleY._value;this._localMatrix.set(this._cosCache*a,this._sinCache*a,-this._sinCache*b,this._cosCache*b,this.x._value,this.y._value);this._localMatrix.translate(-this.anchorX._value,
-this.anchorY._value)}return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);
return this},disablePixelSnapping:function(){this.set_pixelSnapping(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==
this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_0;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new B);return this._pointerDown},get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new B);return this._pointerMove},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new B);return this._pointerUp},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=
new B);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=k._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;null!=a._hoverConnection&&(a._hoverConnection.dispose(),a._hoverConnection=null)}))},set_pointerEnabled:function(a){this._flags=dc.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=
dc.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),
this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:t,__properties__:n(y.prototype.__properties__,{get_pointerOut:"get_pointerOut",get_pointerUp:"get_pointerUp",get_pointerMove:"get_pointerMove",get_pointerDown:"get_pointerDown",set_pointerEnabled:"set_pointerEnabled",set_pixelSnapping:"set_pixelSnapping"})});var qa=function(a,b,c){t.call(this);this.color=a;this.width=new F(b);this.height=
new F(c)};qa.__name__=!0;qa.__super__=t;qa.prototype=n(t.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){t.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:qa});var vb=function(a,b){qa.call(this,a,1,1);this.camera=b;this.onStageResize()};vb.__name__=!0;vb.__super__=qa;vb.prototype=n(qa.prototype,
{onAdded:function(){this.centerAnchor();this.updateConnection=this.camera.change.connect(w(this,this.updateBackground));this.resizeConnection=k._platform.getStage().resize.connect(w(this,this.onStageResize));this.onStageResize()},onUpdate:function(){if(this.needsUpdate){var a=this.camera._zoom,b=Math.min(32/a,512);this.setScaleXY((this.stageWidth+b)/a,(this.stageHeight+b)/a);a=this.camera.rootSprite;this.setXY(a.anchorX._value-a.x._value+this.stageCentreX,a.anchorY._value-a.y._value+this.stageCentreY);
this.needsUpdate=!1}},onStageResize:function(){this.stageWidth=k._platform.getStage().get_width();this.stageHeight=k._platform.getStage().get_height();this.stageCentreX=this.stageWidth/2;this.stageCentreY=this.stageHeight/2;this.needsUpdate=!0},updateBackground:function(){this.needsUpdate=!0},onRemoved:function(){null!=this.camera&&(this.camera=null);null!=this.updateConnection&&(this.updateConnection.dispose(),this.updateConnection=null);null!=this.resizeConnection&&(this.resizeConnection.dispose(),
this.resizeConnection=null);qa.prototype.onRemoved.call(this)},__class__:vb});var L={__ename__:!0,__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(","),Normal:["Normal",0]};L.Normal.__enum__=L;L.Add=["Add",1];L.Add.__enum__=L;L.Multiply=["Multiply",2];L.Multiply.__enum__=L;L.Screen=["Screen",3];L.Screen.__enum__=L;L.Mask=["Mask",4];L.Mask.__enum__=L;L.Copy=["Copy",5];L.Copy.__enum__=L;var wb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=
this.y=this.width=this.height=0;this.charCode=a};wb.__name__=!0;wb.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?D["int"](this._kernings.h[a]):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new T);this._kernings.h[a]=b},__class__:wb};var za=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};za.__name__=
!0;za.prototype={layoutText:function(a,b,c,e,d){null==d&&(d=0);null==e&&(e=0);null==c&&(c=0);null==b&&(b=ia.Left);return new Aa(this,a,b,c,e,d)},reload:function(){this._glyphs=new T;this._glyphs.h[za.NEWLINE.charCode]=za.NEWLINE;for(var a=new Ma(this._file.toString()),b=new T,c=this.name.lastIndexOf("/"),c=0<=c?u.substr(this.name,0,c+1):"",e=a.keywords();e.hasNext();)switch(e.next()){case "info":for(var d=a.pairs();d.hasNext();){var f=d.next();switch(f.key){case "size":this.size=f.getInt()}}break;
case "common":for(d=a.pairs();d.hasNext();)switch(f=d.next(),f.key){case "lineHeight":this.lineHeight=f.getInt()}break;case "page":for(var d=0,f=null,h=a.pairs();h.hasNext();){var s=h.next();switch(s.key){case "id":d=s.getInt();break;case "file":f=s.getString()}}f=this._pack.getTexture(c+S.removeFileExtension(f));b.h[d]=f;break;case "char":d=null;for(f=a.pairs();f.hasNext();)switch(h=f.next(),h.key){case "id":d=new wb(h.getInt());break;case "x":d.x=h.getInt();break;case "y":d.y=h.getInt();break;case "width":d.width=
h.getInt();break;case "height":d.height=h.getInt();break;case "page":h=h.getInt();d.page=b.h[h];break;case "xoffset":d.xOffset=h.getInt();break;case "yoffset":d.yOffset=h.getInt();break;case "xadvance":d.xAdvance=h.getInt()}this._glyphs.h[d.charCode]=d;break;case "kerning":d=null;h=f=0;for(s=a.pairs();s.hasNext();){var i=s.next();switch(i.key){case "first":d=this._glyphs.h[i.getInt()];break;case "second":f=i.getInt();break;case "amount":h=i.getInt()}}null!=d&&0!=h&&d.setKerning(f,h)}},__class__:za};
var ia={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};ia.Left.__enum__=ia;ia.Center=["Center",1];ia.Center.__enum__=ia;ia.Right=["Right",2];ia.Right.__enum__=ia;var Aa=function(a,b,c,e,d,f){this.lines=0;var h=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+f);this.bounds=new ya;for(var s=[],f=b.length,i=0;i<f;){var g=i++,g=b.charCodeAt(g),g=a._glyphs.h[g];null!=g?this._glyphs.push(g):null}for(var b=-1,j=0,m=0,a=a._glyphs.h[10],f=
function(){h.bounds.width=$.max(h.bounds.width,j);h.bounds.height+=m;s[h.lines]=j;m=j=0;++h.lines},i=0;i<this._glyphs.length;){g=this._glyphs[i];this._offsets[i]=Math.round(j);var l=0<e&&j+g.width>e;l||g==a?(l&&(0<=b?(this._glyphs[b]=a,j=this._offsets[b],i=b):this._glyphs.splice(i,0,a)),b=-1,m=this._lineOffset,f()):(32==g.charCode&&(b=i),j+=g.xAdvance+d,m=$.max(m,g.height+g.yOffset),i+1<this._glyphs.length&&(j+=g.getKerning(this._glyphs[i+1].charCode)));++i}f();d=0;a=Aa.getAlignOffset(c,s[0],e);b=
1.79769313486231E308;f=-1.79769313486231E308;g=i=0;for(l=this._glyphs.length;g<l;){var k=this._glyphs[g];10==k.charCode&&(d+=this._lineOffset,++i,a=Aa.getAlignOffset(c,s[i],e));this._offsets[g]+=a;var o=d+k.yOffset,b=b<o?b:o,f=$.max(f,o+k.height);++g}this.bounds.x=Aa.getAlignOffset(c,this.bounds.width,e);this.bounds.y=b;this.bounds.height=f-b};Aa.__name__=!0;Aa.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};Aa.prototype={draw:function(a){for(var b=
0,c=0,e=this._glyphs.length;c<e;){var d=this._glyphs[c];10==d.charCode?b+=this._lineOffset:d.draw(a,this._offsets[c],b);++c}},__class__:Aa};var Ma=function(a){this._configText=a;this._keywordPattern=new ma("([A-Za-z]+)(.*)","");this._pairPattern=new ma('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};Ma.__name__=!0;Ma.advance=function(a,b){var c=b.matchedPos();return u.substr(a,c.pos+c.len,a.length)};Ma.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Ma.advance(b,a._keywordPattern);
a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Ma.advance(b,a._pairPattern);return new ec(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Ma};var ec=function(a,b){this.key=a;this._value=b};ec.__name__=!0;ec.prototype={getInt:function(){return D.parseInt(this._value)},getString:function(){return 34!=
this._value.charCodeAt(0)?null:u.substr(this._value,1,this._value.length-2)},__class__:ec};var fc=function(){};fc.__name__=!0;fc.prototype={__class__:fc};var A=function(a){t.call(this);this.texture=a};A.__name__=!0;A.__super__=t;A.prototype=n(t.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:A});
var ca=function(a){this._width=this._height=this._x=this._y=0;y.call(this);this.parts=a;if(9!=a.length)throw new p("Expected exactly 9 parts, but got "+a.length);this.xOffset=a[8].getNaturalWidth();this.yOffset=a[8].getNaturalHeight();this.minWidth=this.xOffset+this.xOffset+1;this.minHeight=this.yOffset+this.yOffset+1;this._width=this.minWidth;this._height=this.minHeight;this.set_x(this.set_y(0))};ca.__name__=!0;ca.fromSubTexture=function(a,b,c,e,d){null==d&&(d=0);null==e&&(e=0);null==c&&(c=0);null==
b&&(b=0);1>b&&(b=Math.round(a.get_width()/2));1>c&&(c=Math.round(a.get_height()/2));var f=Math.round(a.get_width()/2),h=Math.round(a.get_height()/2),s=a.get_parent(),a=new ca([new A(s.subTexture(a.get_x()+f,a.get_y(),1,c)),new A(s.subTexture(a.get_x()+f,a.get_y()+h,1,1)),new A(s.subTexture(a.get_x()+f,a.get_y()+a.get_height()-c,1,c)),new A(s.subTexture(a.get_x()+a.get_width()-b,a.get_y(),b,c)),new A(s.subTexture(a.get_x()+a.get_width()-b,a.get_y()+h,b,1)),new A(s.subTexture(a.get_x()+a.get_width()-
b,a.get_y()+a.get_height()-c,b,c)),new A(s.subTexture(a.get_x(),a.get_y(),b,c)),new A(s.subTexture(a.get_x(),a.get_y()+h,b,1)),new A(s.subTexture(a.get_x(),a.get_y()+a.get_height()-c,b,c))]);0<e&&a.set_width(e);0<d&&a.set_height(d);return a};ca.__super__=y;ca.prototype=n(y.prototype,{get_name:function(){return"NineSlice_5"},onAdded:function(){for(var a=0,b=this.parts;a<b.length;){var c=b[a];++a;this.owner.addChild((new g).add(c.disablePointer()))}},set_width:function(a){a=a<this.minWidth?this.minWidth:
a;this.parts[0].scaleX.set__(this.parts[1].scaleX.set__(this.parts[2].scaleX.set__(a-this.minWidth)));this.parts[3].x.set__(this.parts[4].x.set__(this.parts[5].x.set__(this._x+a-this.xOffset-1)));return this._width=a},set_height:function(a){a=a<this.minHeight?this.minHeight:a;this.parts[1].scaleY.set__(this.parts[4].scaleY.set__(this.parts[7].scaleY.set__(a-this.minHeight)));this.parts[2].y.set__(this.parts[5].y.set__(this.parts[8].y.set__(this._y+a-this.yOffset-1)));return this._height=a},set_x:function(a){this.parts[0].x.set__(this.parts[1].x.set__(this.parts[2].x.set__(a+
this.xOffset)));this.parts[3].x.set__(this.parts[4].x.set__(this.parts[5].x.set__(a+this._width-this.xOffset-1)));this.parts[6].x.set__(this.parts[7].x.set__(this.parts[8].x.set__(a)));return this._x=a},set_y:function(a){this.parts[0].y.set__(this.parts[3].y.set__(this.parts[6].y.set__(a)));this.parts[1].y.set__(this.parts[4].y.set__(this.parts[7].y.set__(a+this.yOffset)));this.parts[2].y.set__(this.parts[5].y.set__(this.parts[8].y.set__(a+this._height-this.yOffset-1)));return this._y=a},__class__:ca,
__properties__:n(y.prototype.__properties__,{set_height:"set_height",set_width:"set_width",set_y:"set_y",set_x:"set_x"})});var Na={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",0]};Na.Portrait.__enum__=Na;Na.Landscape=["Landscape",1];Na.Landscape.__enum__=Na;var Nc=function(){};Nc.__name__=!0;Nc.parse=function(a,b){for(var c=new X,e=a.elements();e.hasNext();){var d=e.next();if(d.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+d.nodeType);if("TextureAtlas"==
d.nodeName)for(d=d.elementsNamed("SubTexture");d.hasNext();){var f=d.next(),h=f.get("name"),f=b.subTexture(D.parseInt(f.get("x")),D.parseInt(f.get("y")),D.parseInt(f.get("width")),D.parseInt(f.get("height")));null!=I[h]?c.setReserved(h,f):c.h[h]=f}}return c};var xb=function(){};xb.__name__=!0;xb.__interfaces__=[Xa];xb.prototype={__class__:xb,__properties__:{get_height:"get_height",get_width:"get_width"}};var yb=function(){};yb.__name__=!0;yb.__interfaces__=[xb];yb.prototype={__class__:yb,__properties__:{get_y:"get_y",
get_x:"get_x",get_parent:"get_parent"}};var Oa=function(a,b){null==b&&(b="");this._layout=null;var c=this;t.call(this);this._font=a;this._text=b;this._align=ia.Left;this._flags|=256;var e=function(){c._flags|=256};this.wrapWidth=new F(0,e);this.letterSpacing=new F(0,e);this.lineSpacing=new F(0,e)};Oa.__name__=!0;Oa.__super__=t;Oa.prototype=n(t.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:
this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=256);return a},updateLayout:function(){0!=(this._flags&256)&&(this._flags&=-257,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,
this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){t.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:Oa,__properties__:n(t.prototype.__properties__,{set_text:"set_text"})});var d={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(","),
A:["A",0]};d.A.__enum__=d;d.B=["B",1];d.B.__enum__=d;d.C=["C",2];d.C.__enum__=d;d.D=["D",3];d.D.__enum__=d;d.E=["E",4];d.E.__enum__=d;d.F=["F",5];d.F.__enum__=d;d.G=["G",6];d.G.__enum__=d;d.H=["H",7];d.H.__enum__=d;d.I=["I",8];d.I.__enum__=d;d.J=["J",9];d.J.__enum__=d;d.K=["K",10];d.K.__enum__=d;d.L=["L",11];d.L.__enum__=d;d.M=["M",12];d.M.__enum__=d;d.N=["N",13];d.N.__enum__=d;d.O=["O",14];d.O.__enum__=d;d.P=["P",15];d.P.__enum__=d;d.Q=["Q",16];d.Q.__enum__=d;d.R=["R",17];d.R.__enum__=d;d.S=["S",
18];d.S.__enum__=d;d.T=["T",19];d.T.__enum__=d;d.U=["U",20];d.U.__enum__=d;d.V=["V",21];d.V.__enum__=d;d.W=["W",22];d.W.__enum__=d;d.X=["X",23];d.X.__enum__=d;d.Y=["Y",24];d.Y.__enum__=d;d.Z=["Z",25];d.Z.__enum__=d;d.Number0=["Number0",26];d.Number0.__enum__=d;d.Number1=["Number1",27];d.Number1.__enum__=d;d.Number2=["Number2",28];d.Number2.__enum__=d;d.Number3=["Number3",29];d.Number3.__enum__=d;d.Number4=["Number4",30];d.Number4.__enum__=d;d.Number5=["Number5",31];d.Number5.__enum__=d;d.Number6=
["Number6",32];d.Number6.__enum__=d;d.Number7=["Number7",33];d.Number7.__enum__=d;d.Number8=["Number8",34];d.Number8.__enum__=d;d.Number9=["Number9",35];d.Number9.__enum__=d;d.Numpad0=["Numpad0",36];d.Numpad0.__enum__=d;d.Numpad1=["Numpad1",37];d.Numpad1.__enum__=d;d.Numpad2=["Numpad2",38];d.Numpad2.__enum__=d;d.Numpad3=["Numpad3",39];d.Numpad3.__enum__=d;d.Numpad4=["Numpad4",40];d.Numpad4.__enum__=d;d.Numpad5=["Numpad5",41];d.Numpad5.__enum__=d;d.Numpad6=["Numpad6",42];d.Numpad6.__enum__=d;d.Numpad7=
["Numpad7",43];d.Numpad7.__enum__=d;d.Numpad8=["Numpad8",44];d.Numpad8.__enum__=d;d.Numpad9=["Numpad9",45];d.Numpad9.__enum__=d;d.NumpadAdd=["NumpadAdd",46];d.NumpadAdd.__enum__=d;d.NumpadDecimal=["NumpadDecimal",47];d.NumpadDecimal.__enum__=d;d.NumpadDivide=["NumpadDivide",48];d.NumpadDivide.__enum__=d;d.NumpadEnter=["NumpadEnter",49];d.NumpadEnter.__enum__=d;d.NumpadMultiply=["NumpadMultiply",50];d.NumpadMultiply.__enum__=d;d.NumpadSubtract=["NumpadSubtract",51];d.NumpadSubtract.__enum__=d;d.F1=
["F1",52];d.F1.__enum__=d;d.F2=["F2",53];d.F2.__enum__=d;d.F3=["F3",54];d.F3.__enum__=d;d.F4=["F4",55];d.F4.__enum__=d;d.F5=["F5",56];d.F5.__enum__=d;d.F6=["F6",57];d.F6.__enum__=d;d.F7=["F7",58];d.F7.__enum__=d;d.F8=["F8",59];d.F8.__enum__=d;d.F9=["F9",60];d.F9.__enum__=d;d.F10=["F10",61];d.F10.__enum__=d;d.F11=["F11",62];d.F11.__enum__=d;d.F12=["F12",63];d.F12.__enum__=d;d.F13=["F13",64];d.F13.__enum__=d;d.F14=["F14",65];d.F14.__enum__=d;d.F15=["F15",66];d.F15.__enum__=d;d.Left=["Left",67];d.Left.__enum__=
d;d.Up=["Up",68];d.Up.__enum__=d;d.Right=["Right",69];d.Right.__enum__=d;d.Down=["Down",70];d.Down.__enum__=d;d.Alt=["Alt",71];d.Alt.__enum__=d;d.Backquote=["Backquote",72];d.Backquote.__enum__=d;d.Backslash=["Backslash",73];d.Backslash.__enum__=d;d.Backspace=["Backspace",74];d.Backspace.__enum__=d;d.CapsLock=["CapsLock",75];d.CapsLock.__enum__=d;d.Comma=["Comma",76];d.Comma.__enum__=d;d.Command=["Command",77];d.Command.__enum__=d;d.Control=["Control",78];d.Control.__enum__=d;d.Delete=["Delete",79];
d.Delete.__enum__=d;d.End=["End",80];d.End.__enum__=d;d.Enter=["Enter",81];d.Enter.__enum__=d;d.Equals=["Equals",82];d.Equals.__enum__=d;d.Escape=["Escape",83];d.Escape.__enum__=d;d.Home=["Home",84];d.Home.__enum__=d;d.Insert=["Insert",85];d.Insert.__enum__=d;d.LeftBracket=["LeftBracket",86];d.LeftBracket.__enum__=d;d.Minus=["Minus",87];d.Minus.__enum__=d;d.PageDown=["PageDown",88];d.PageDown.__enum__=d;d.PageUp=["PageUp",89];d.PageUp.__enum__=d;d.Period=["Period",90];d.Period.__enum__=d;d.Quote=
["Quote",91];d.Quote.__enum__=d;d.RightBracket=["RightBracket",92];d.RightBracket.__enum__=d;d.Semicolon=["Semicolon",93];d.Semicolon.__enum__=d;d.Shift=["Shift",94];d.Shift.__enum__=d;d.Slash=["Slash",95];d.Slash.__enum__=d;d.Space=["Space",96];d.Space.__enum__=d;d.Tab=["Tab",97];d.Tab.__enum__=d;d.Menu=["Menu",98];d.Menu.__enum__=d;d.Search=["Search",99];d.Search.__enum__=d;d.Unknown=function(a){a=["Unknown",100,a];a.__enum__=d;return a};var gc=function(){this.init(0,null)};gc.__name__=!0;gc.prototype=
{init:function(a,b){this.id=a;this.key=b},__class__:gc};var Q={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};Q.Left.__enum__=Q;Q.Middle=["Middle",1];Q.Middle.__enum__=Q;Q.Right=["Right",2];Q.Right.__enum__=Q;Q.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Q;return a};var ra={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};ra.Default.__enum__=ra;ra.Button=["Button",1];ra.Button.__enum__=ra;ra.None=["None",2];ra.None.__enum__=ra;var hc=
function(){this.init(0,0,0,null)};hc.__name__=!0;hc.prototype={init:function(a,b,c,e){this.id=a;this.viewX=b;this.viewY=c;this.button=e},__class__:hc};var Ya={__ename__:!0,__constructs__:["Mouse","Touch"]};Ya.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Ya;return a};Ya.Touch=function(a){a=["Touch",1,a];a.__enum__=Ya;return a};var ic=function(){this.init(0,0,0,null,null)};ic.__name__=!0;ic.prototype={init:function(a,b,c,e,d){this.id=a;this.viewX=b;this.viewY=c;this.hit=e;this.source=d;this._stopped=
!1},__class__:ic};var jc=function(a){this.id=a;this._source=Ya.Touch(this)};jc.__name__=!0;jc.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:jc};var $=function(){};$.__name__=!0;$.max=function(a,b){return a>b?a:b};$.min=function(a,b){return a<b?a:b};var ea=function(){this.identity()};ea.__name__=!0;ea.multiply=function(a,b,c){null==c&&(c=new ea);var e=a.m00*b.m00+a.m01*b.m10,d=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=e;c.m01=d;c.m02=f;e=a.m10*b.m00+a.m11*b.m10;
d=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=e;c.m11=d;c.m12=f;return c};ea.prototype={set:function(a,b,c,e,d,f){this.m00=a;this.m01=c;this.m02=d;this.m10=b;this.m11=e;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-
this.m00*this.m12)/a);return!0},transformArray:function(a,b,c){for(var e=0;e<b;){var d=a[e],f=a[e+1];c[e++]=d*this.m00+f*this.m01+this.m02;c[e++]=d*this.m10+f*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var e=this.determinant();if(0==e)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/e;c.y=(b*this.m00-a*this.m10)/e;return!0},clone:function(a){null==a&&(a=new ea);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,
this.m12);return a},__class__:ea};var ya=function(a,b,c,e){null==e&&(e=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,e)};ya.__name__=!0;ya.prototype={set:function(a,b,c,e){this.x=a;this.y=b;this.width=c;this.height=e},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new ya);a.set(this.x,
this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},get_right:function(){return this.x+this.width},get_bottom:function(){return this.y+this.height},__class__:ya,__properties__:{get_bottom:"get_bottom",get_right:"get_right"}};var M=function(){};M.__name__=!0;M.__interfaces__=[Xa];M.prototype={__class__:M};var Ba=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new zb;this._bytesLoaded=new X;this._pack=
new Ab(b,this);var e=ua.array(b);if(0==e.length)this.handleSuccess();else{for(var d=new X,f=0;f<e.length;){var h=e[f];++f;var s=d.get(h.name);null==s&&(s=[],d.set(h.name,s));s.push(h)}this._assetsRemaining=ua.count(d);for(e=new Bb(d,d.arrayKeys());e.hasNext();)d=[e.next()],this.pickBestEntry(d[0],function(a){return function(e){if(null!=e){var d=b.getFullURL(e);try{c.loadEntry(d,e)}catch(f){f instanceof p&&(f=f.val),c.handleError(e,"Unexpected error: "+D.string(f))}d=c.promise;d.set_total(d._total+
e.bytes)}else e=a[0][0],Ba.isAudio(e.format)?c.handleLoad(e,aa.getInstance()):c.handleError(e,"Could not find a supported format to load")}}(d))}};Ba.__name__=!0;Ba.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};Ba.prototype={pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var e=0;e<c.length;){var d=c[e];++e;for(var f=0;f<a.length;){var h=a[f];++f;if(h.format==d){b(h);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},
handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,e=this._bytesLoaded.iterator();e.hasNext();)var d=e.next(),
c=c+d;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(S.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:Ba};var Ab=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new X;this.sounds=new X;this.files=new X};Ab.__name__=!0;Ab.__interfaces__=[ob];Ab.prototype={getTexture:function(a,
b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw new p(S.withFields("Missing texture",["name",a]));return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw new p(S.withFields("Missing file",["name",a]));return c},__class__:Ab};var Za=function(a){this._content=a};Za.__name__=!0;Za.__interfaces__=[pb];Za.__super__=M;Za.prototype=n(M.prototype,{toString:function(){return this._content},__class__:Za});var kc=function(){};kc.__name__=!0;kc.prototype=
{__class__:kc,__properties__:{get_supported:"get_supported"}};var ba=function(){this.down=new B;this.up=new B;this.backButton=new xa;this._keyStates=new T};ba.__name__=!0;ba.__interfaces__=[kc];ba.prototype={get_supported:function(){return!0},isDown:function(a){return this.isCodeDown(Ca.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.h.hasOwnProperty(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.h.hasOwnProperty(a)||
(this._keyStates.h[a]=!0,ba._sharedEvent.init(ba._sharedEvent.id+1,Ca.toKey(a)),this.down.emit(ba._sharedEvent));return!0},submitUp:function(a){this._keyStates.h.hasOwnProperty(a)&&(this._keyStates.remove(a),ba._sharedEvent.init(ba._sharedEvent.id+1,Ca.toKey(a)),this.up.emit(ba._sharedEvent))},__class__:ba,__properties__:{get_supported:"get_supported"}};var lc=function(){};lc.__name__=!0;lc.prototype={__class__:lc,__properties__:{get_supported:"get_supported"}};var Y=function(a){this._pointer=a;this._source=
Ya.Mouse(Y._sharedEvent);this.down=new B;this.move=new B;this.up=new B;this.scroll=new B;this._y=this._x=0;this._cursor=ra.Default;this._buttonStates=new T};Y.__name__=!0;Y.__interfaces__=[lc];Y.prototype={get_supported:function(){return!0},isDown:function(a){return this.isCodeDown($a.toButtonCode(a))},submitDown:function(a,b,c){this._buttonStates.h.hasOwnProperty(c)||(this._buttonStates.h[c]=!0,this.prepare(a,b,$a.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Y._sharedEvent))},
submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Y._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.h.hasOwnProperty(c)&&(this._buttonStates.remove(c),this.prepare(a,b,$a.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Y._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},isCodeDown:function(a){return this._buttonStates.h.hasOwnProperty(a)},
prepare:function(a,b,c){this._x=a;this._y=b;Y._sharedEvent.init(Y._sharedEvent.id+1,a,b,c)},__class__:Y,__properties__:{get_supported:"get_supported"}};var mc=function(){};mc.__name__=!0;mc.prototype={__class__:mc};var P=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new B;this.move=new B;this.up=new B;this._x=a;this._y=b;this._isDown=c};P.__name__=!0;P.__interfaces__=[mc];P.prototype={submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var e=
[],d=t.hitTest(k.root,a,b);if(null!=d){var f=d.owner;do{var h=f._compMap.Sprite_0;null!=h&&e.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,d,c);for(a=0;a<e.length;)if(b=e[a],++a,b.onPointerDown(P._sharedEvent),P._sharedEvent._stopped)return;this.down.emit(P._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var e=[],d=t.hitTest(k.root,a,b);if(null!=d){var f=d.owner;do{var h=f._compMap.Sprite_0;null!=h&&e.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,d,c);for(a=0;a<
e.length;)if(b=e[a],++a,b.onPointerMove(P._sharedEvent),P._sharedEvent._stopped)return;this.move.emit(P._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var e=[],d=t.hitTest(k.root,a,b);if(null!=d){var f=d.owner;do{var h=f._compMap.Sprite_0;null!=h&&e.push(h);f=f.parent}while(null!=f)}this.prepare(a,b,d,c);for(a=0;a<e.length;)if(b=e[a],++a,b.onPointerUp(P._sharedEvent),P._sharedEvent._stopped)return;this.up.emit(P._sharedEvent)}},prepare:function(a,
b,c,e){this._x=a;this._y=b;P._sharedEvent.init(P._sharedEvent.id+1,a,b,c,e)},__class__:P};var fa=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this.root=a;this._width=b;this._height=c};fa.__name__=!0;fa.__interfaces__=[yb];fa.__super__=M;fa.prototype=n(M.prototype,{subTexture:function(a,b,c,e){c=this.root.createTexture(c,e);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_parent:function(){return this._parent},get_x:function(){return this._x},
get_y:function(){return this._y},get_width:function(){return this._width},get_height:function(){return this._height},__class__:fa,__properties__:{get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x",get_parent:"get_parent"}});var Cb=function(){};Cb.__name__=!0;Cb.prototype={__class__:Cb,__properties__:{get_supported:"get_supported"}};var lb=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new T;this._points=[];this.down=new B;this.move=new B;this.up=
new B};lb.__name__=!0;lb.__interfaces__=[Cb];lb.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.h.hasOwnProperty(a)){var e=new jc(a);e.init(b,c);this._pointMap.h[a]=e;this._points.push(e);null==this._pointerTouch&&(this._pointerTouch=e,this._pointer.submitDown(b,c,e._source));this.down.emit(e)}},submitMove:function(a,b,c){a=this._pointMap.h[a];null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,
b,c){var e=this._pointMap.h[a];null!=e&&(e.init(b,c),this._pointMap.remove(a),u.remove(this._points,e),this._pointerTouch==e&&(this._pointerTouch=null,this._pointer.submitUp(b,c,e._source)),this.up.emit(e))},__class__:lb,__properties__:{get_supported:"get_supported"}};var Db=function(){};Db.__name__=!0;Db.__interfaces__=[Xa];var aa=function(){this._playback=new Eb(this)};aa.__name__=!0;aa.__interfaces__=[Db];aa.getInstance=function(){null==aa._instance&&(aa._instance=new aa);return aa._instance};
aa.__super__=M;aa.prototype=n(M.prototype,{__class__:aa});var Fb=function(){};Fb.__name__=!0;Fb.__interfaces__=[va];Fb.prototype={__class__:Fb};var Eb=function(a){this._sound=a;this.volume=new F(0);this._complete=new R(!0)};Eb.__name__=!0;Eb.__interfaces__=[Fb];Eb.prototype={__class__:Eb};var mb=function(){this.down=new B;this.move=new B;this.up=new B};mb.__name__=!0;mb.__interfaces__=[Cb];mb.prototype={get_supported:function(){return!1},__class__:mb,__properties__:{get_supported:"get_supported"}};
var ab=function(){this._entries=[]};ab.__name__=!0;ab.__interfaces__=[va];ab.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new nc(a,b,c))},addDisposingListener:function(a,b,c){var e=this;this.addListener(a,b,function(a){e.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:ab};var nc=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=
c};nc.__name__=!0;nc.prototype={__class__:nc};var bb=function(){};bb.__name__=!0;bb.__interfaces__=[fc];bb.prototype={__class__:bb};var oc=function(){};oc.__name__=!0;oc.prototype={__class__:oc,__properties__:{get_type:"get_type"}};var cb=function(){};cb.__name__=!0;cb.__interfaces__=[oc];cb.prototype={__class__:cb};var Ca=function(){};Ca.__name__=!0;Ca.toKey=function(a){switch(a){case 65:return d.A;case 66:return d.B;case 67:return d.C;case 68:return d.D;case 69:return d.E;case 70:return d.F;case 71:return d.G;
case 72:return d.H;case 73:return d.I;case 74:return d.J;case 75:return d.K;case 76:return d.L;case 77:return d.M;case 78:return d.N;case 79:return d.O;case 80:return d.P;case 81:return d.Q;case 82:return d.R;case 83:return d.S;case 84:return d.T;case 85:return d.U;case 86:return d.V;case 87:return d.W;case 88:return d.X;case 89:return d.Y;case 90:return d.Z;case 48:return d.Number0;case 49:return d.Number1;case 50:return d.Number2;case 51:return d.Number3;case 52:return d.Number4;case 53:return d.Number5;
case 54:return d.Number6;case 55:return d.Number7;case 56:return d.Number8;case 57:return d.Number9;case 96:return d.Numpad0;case 97:return d.Numpad1;case 98:return d.Numpad2;case 99:return d.Numpad3;case 100:return d.Numpad4;case 101:return d.Numpad5;case 102:return d.Numpad6;case 103:return d.Numpad7;case 104:return d.Numpad8;case 105:return d.Numpad9;case 107:return d.NumpadAdd;case 110:return d.NumpadDecimal;case 111:return d.NumpadDivide;case 108:return d.NumpadEnter;case 106:return d.NumpadMultiply;
case 109:return d.NumpadSubtract;case 112:return d.F1;case 113:return d.F2;case 114:return d.F3;case 115:return d.F4;case 116:return d.F5;case 117:return d.F6;case 118:return d.F7;case 119:return d.F8;case 120:return d.F9;case 121:return d.F10;case 122:return d.F11;case 123:return d.F12;case 37:return d.Left;case 38:return d.Up;case 39:return d.Right;case 40:return d.Down;case 18:return d.Alt;case 192:return d.Backquote;case 220:return d.Backslash;case 8:return d.Backspace;case 20:return d.CapsLock;
case 188:return d.Comma;case 15:return d.Command;case 17:return d.Control;case 46:return d.Delete;case 35:return d.End;case 13:return d.Enter;case 187:return d.Equals;case 27:return d.Escape;case 36:return d.Home;case 45:return d.Insert;case 219:return d.LeftBracket;case 189:return d.Minus;case 34:return d.PageDown;case 33:return d.PageUp;case 190:return d.Period;case 222:return d.Quote;case 221:return d.RightBracket;case 186:return d.Semicolon;case 16:return d.Shift;case 191:return d.Slash;case 32:return d.Space;
case 9:return d.Tab;case 16777234:return d.Menu;case 16777247:return d.Search}return d.Unknown(a)};Ca.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;
case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;
case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;
case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var Ja=function(){this._tickables=
[]};Ja.__name__=!0;Ja.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_10;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var e=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=e}for(c=a.firstChild;null!=c;)e=c.next,Ja.updateEntity(c,b),c=e};Ja.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}k.volume.update(a);
Ja.updateEntity(k.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),t.render(k.root,b),a.didRender())},__class__:Ja};var pc=function(){};pc.__name__=!0;pc.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var $a=function(){};$a.__name__=!0;$a.toButton=function(a){switch(a){case 0:return Q.Left;case 1:return Q.Middle;case 2:return Q.Right}return Q.Unknown(a)};$a.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};
var Gb=function(){};Gb.__name__=!0;Gb.prototype={__class__:Gb};var Hb=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};Hb.__name__=!0;Hb.__interfaces__=[bb];Hb.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,c,e,d,f){this._canvasCtx.transform(a,b,c,e,d,f)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,e,d,f,h){this._firstDraw?
(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,e,d,f,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+e|0,a.rootY+d|0,f|0,h|0,b|0,c|0,f|0,h|0)},fillRect:function(a,b,c,e,d){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,e,d),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+D.string(a);
this._canvasCtx.fillStyle="#"+D.string(a);this._canvasCtx.fillRect(b|0,c|0,e|0,d|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,e){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,e|0);this._canvasCtx.clip()},
willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:Hb};var Ka=function(a){this.graphics=new Hb(a,!1);this._hasGPU=new R(!0)};Ka.__name__=!0;Ka.__interfaces__=[cb];Ka.prototype={get_type:function(){return ja.Canvas},createTextureFromImage:function(a){a=new db(Ka.CANVAS_TEXTURES?q.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},
didRender:function(){this.graphics.didRender()},__class__:Ka,__properties__:{get_type:"get_type"}};var Ib=function(a,b,c){fa.call(this,a,b,c)};Ib.__name__=!0;Ib.__super__=fa;Ib.prototype=n(fa.prototype,{__class__:Ib});var db=function(a){this.image=a;this.width=a.width;this.height=a.height};db.__name__=!0;db.__interfaces__=[Gb];db.__super__=M;db.prototype=n(M.prototype,{createTexture:function(a,b){return new Ib(this,a,b)},__class__:db});var z=function(a,b){Ba.call(this,a,b)};z.__name__=!0;z.detectImageFormats=
function(a){var b=[o.PNG,o.JPG,o.GIF],c=2,e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(o.WEBP);--c;0==c&&a(b)};e.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(o.JXR);--c;0==c&&a(b)};d.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
z.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==w(a,a.canPlayType))return[];var b=new ma("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!E.get_supported()&&b.match(c))return[];for(var b=[{format:o.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:o.MP3,mimeType:"audio/mpeg"},{format:o.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:o.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:o.WAV,mimeType:"audio/wav"}],c=[],
e=0;e<b.length;){var d=b[e];++e;var f="";try{f=a.canPlayType(d.mimeType)}catch(h){h instanceof p&&(h=h.val)}""!=f&&c.push(d.format)}return c};z.supportsBlob=function(){if(z._detectBlobSupport){z._detectBlobSupport=!1;if((new ma("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;z._URL=q.loadExtension("URL").value}return null!=z._URL&&null!=
z._URL.createObjectURL};z.__super__=Ba;z.prototype=n(Ba.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var e;e=window.document.createElement("img");var d=new ab;d.addDisposingListener(e,"load",function(){z.supportsBlob()&&z._URL.revokeObjectURL(e.src);var a=c._platform.getRenderer().createTextureFromImage(e);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});d.addDisposingListener(e,"error",function(){c.handleError(b,"Failed to load image")});
z.supportsBlob()?this.download(a,b,"blob",function(a){e.src=z._URL.createObjectURL(a)}):e.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(E.get_supported())this.download(a,b,"arraybuffer",function(a){E.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new E(a));return!0},function(){c.handleLoad(b,aa.getInstance());
return!1})});else{var f;f=window.document.createElement("audio");f.preload="auto";var h=++z._mediaRefCount;null==z._mediaElements&&(z._mediaElements=new T);z._mediaElements.h[h]=f;d=new ab;d.addDisposingListener(f,"canplaythrough",function(){z._mediaElements.remove(h);c.handleLoad(b,new eb(f))});d.addDisposingListener(f,"error",function(){z._mediaElements.remove(h);var a=f.error.code;3==a||4==a?c.handleLoad(b,aa.getInstance()):c.handleError(b,"Failed to load audio: "+f.error.code)});d.addListener(f,
"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=f.buffered.end(0)/f.duration;c.handleProgress(b,a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Za(a))})}},getAssetFormats:function(a){var b=this;null==z._supportedFormats&&(z._supportedFormats=new zb,z.detectImageFormats(function(a){z._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(z.detectAudioFormats()).concat([o.Data]))}));
z._supportedFormats.get(a)},download:function(a,b,c,e){var d=this,f=null,h=null,g=0,i=!1,j=function(){i&&(i=!1,window.clearInterval(g))},l=3,m=function(){--l;return 0<=l?(h(),!0):!1},h=function(){j();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=c;var h=0;f.onprogress=function(a){i||(i=!0,g=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-h&&!m()&&(j(),d.handleError(b,"Download stalled"))},1E3));h=Date.now();d.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=
f.status||!m())j(),d.handleError(b,"HTTP error "+f.status)};f.onload=function(){var a=f.response;null==a&&(a=f.responseText);j();e(a)};f.send()};h()},__class__:z});var kb=function(a,b){Y.call(this,a);this._canvas=b};kb.__name__=!0;kb.__super__=Y;kb.prototype=n(Y.prototype,{__class__:kb});var eb=function(a){this.audioElement=a};eb.__name__=!0;eb.__interfaces__=[Db];eb.__super__=M;eb.prototype=n(M.prototype,{__class__:eb});var qc=function(){};qc.__name__=!0;qc.prototype={__class__:qc,__properties__:{get_height:"get_height",
get_width:"get_width"}};var Ia=function(a){var b=this;this._canvas=a;this.resize=new xa;this.scaleFactor=Ia.computeScaleFactor();1!=this.scaleFactor&&(q.setVendorStyle(this._canvas,"transform-origin","top left"),q.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));q.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){q.callLater(w(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",w(this,this.onWindowResize),
!1);this.onWindowResize(null);this.orientation=new R(null);null!=window.orientation&&(window.addEventListener("orientationchange",w(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new R(!1);q.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};Ia.__name__=!0;Ia.__interfaces__=[qc];Ia.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d",
null),b=q.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};Ia.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=window.document.documentElement,b=q.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=q.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],
window.document).value,null!=a&&O.callMethod(window.document,a,[])},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,e=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==e)return!1;this._canvas.width=c|0;this._canvas.height=e|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+
100+"px";b.width=window.innerWidth+"px";b.overflow="visible";q.callLater(function(){q.hideMobileBrowser();q.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(q.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==q.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:Ia,__properties__:{get_height:"get_height",get_width:"get_width"}};
var q=function(){};q.__name__=!0;q.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};q.hideMobileBrowser=function(){window.scrollTo(1,0)};q.loadExtension=function(a,b){null==b&&(b=window);var c=O.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+u.substr(a,1,null),e=0,d=q.VENDOR_PREFIXES;e<d.length;){var f=d[e];++e;var h=f+c,g=O.field(b,h);if(null!=g)return{prefix:f,field:h,value:g}}return{prefix:null,field:null,value:null}};q.loadFirstExtension=
function(a,b){for(var c=0;c<a.length;){var e=a[c];++c;e=q.loadExtension(e,b);if(null!=e.field)return e}return{prefix:null,field:null,value:null}};q.polyfill=function(a,b){null==b&&(b=window);var c=q.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};q.setVendorStyle=function(a,b,c){for(var a=a.style,e=0,d=q.VENDOR_PREFIXES;e<d.length;){var f=d[e];++e;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};q.addVendorListener=function(a,b,c,e){for(var d=0,f=q.VENDOR_PREFIXES;d<f.length;){var h=
f[d];++d;a.addEventListener(h+b,c,e)}a.addEventListener(b,c,e)};q.orientation=function(a){switch(a){case -90:case 90:return Na.Landscape;default:return Na.Portrait}};q.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};q.createCanvas=function(a){var b=q.createEmptyCanvas(a.width,a.height),c=b.getContext("2d",null);c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};q.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&
null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};q.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var E=function(a){this.buffer=a};E.__name__=!0;E.__interfaces__=[Db];E.__properties__={get_supported:"get_supported"};E.get_supported=function(){if(E._detectSupport){E._detectSupport=
!1;var a=q.loadExtension("AudioContext").value;null!=a&&(E.ctx=new a,E.gain=E.createGain(),E.gain.connect(E.ctx.destination),k.volume.watch(function(a){E.gain.gain.value=a}))}return null!=E.ctx};E.createGain=function(){var a;try{a=E.ctx.createGain()}catch(b){b instanceof p&&(b=b.val),a=O.callMethod(E.ctx,E.ctx.createGainNode,[])}return a};E.__super__=M;E.prototype=n(M.prototype,{__class__:E});var rc=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=
0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Jb(a);this._drawPatternShader=
new Kb(a);this._fillRectShader=new Lb(a);this.resize(16)};rc.__name__=!0;rc.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},prepareDrawTexture:function(a,b,c,e){e!=this._lastTexture&&(this.flush(),this._lastTexture=e);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},
prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,e,d){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);d!=this._lastShader&&(this.flush(),this._lastShader=d);if(null!=e||null!=this._lastScissor)if(null==e||null==this._lastScissor||!this._lastScissor.equals(e))this.flush(),this._lastScissor=null!=e?e.clone(this._lastScissor):null,this._pendingSetScissor=!0;
this._quads>=this._maxQuads&&this.resize(this._maxQuads<<1);++this._quads;b=this._dataOffset;this._dataOffset+=a<<2;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,
770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&
(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._lastShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(6*
(a<<2));this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var e=c++;b[6*e]=e<<2;b[6*e+1]=(e<<2)+1;b[6*e+2]=(e<<2)+2;b[6*e+3]=(e<<2)+2;b[6*e+4]=(e<<2)+3;b[6*e+5]=e<<2}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=
this._currentRenderTarget=a},__class__:rc};var da=function(a,b){this._inverseProjection=this._stateList=null;null==da._scratchQuadArray&&(da._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};da.__name__=!0;da.__interfaces__=[bb];da.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new Mb,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=
b},transform:function(a,b,c,e,d,f){var h=this._stateList;da._scratchMatrix.set(a,b,c,e,d,f);ea.multiply(h.matrix,da._scratchMatrix,h.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,e,d,f,h){var g=this._stateList,i=a.root,b=this.transformQuad(b,c,f,h),c=i.width,i=i.height,e=(a.rootX+e)/c,d=(a.rootY+d)/i,f=e+f/c,h=d+h/i,c=g.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,
g.blendMode,g.scissor,a),g=this._batcher.data;g[a]=b[0];g[++a]=b[1];g[++a]=e;g[++a]=d;g[++a]=c;g[++a]=b[2];g[++a]=b[3];g[++a]=f;g[++a]=d;g[++a]=c;g[++a]=b[4];g[++a]=b[5];g[++a]=f;g[++a]=h;g[++a]=c;g[++a]=b[6];g[++a]=b[7];g[++a]=e;g[++a]=h;g[++a]=c},fillRect:function(a,b,c,e,d){var f=this._stateList,b=this.transformQuad(b,c,e,d),c=(a&16711680)/16711680,e=(a&65280)/65280,a=(a&255)/255,d=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,f.blendMode,f.scissor),h=this._batcher.data;h[f]=b[0];
h[++f]=b[1];h[++f]=c;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=b[2];h[++f]=b[3];h[++f]=c;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=b[4];h[++f]=b[5];h[++f]=c;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=b[6];h[++f]=b[7];h[++f]=c;h[++f]=e;h[++f]=a;h[++f]=d},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,e){var d=this._stateList,f=da._scratchQuadArray;f[0]=a;f[1]=b;f[2]=a+c;f[3]=b+e;d.matrix.transformArray(f,4,f);this._inverseProjection.transformArray(f,
4,f);a=f[0];b=f[1];c=f[2]-a;e=f[3]-b;0>c&&(a+=c,c=-c);0>e&&(b+=e,e=-e);d.applyScissor(a,b,c,e)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new Mb;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new ea;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,e){var c=a+c,e=b+e,d=da._scratchQuadArray;
d[0]=a;d[1]=b;d[2]=c;d[3]=b;d[4]=c;d[5]=e;d[6]=a;d[7]=e;this._stateList.matrix.transformArray(d,8,d);return d},__class__:da};var Mb=function(){this.scissor=this.prev=this.next=null;this.matrix=new ea;this.alpha=1;this.blendMode=L.Normal};Mb.__name__=!0;Mb.prototype={applyScissor:function(a,b,c,e){if(null!=this.scissor)var d=$.max(this.scissor.x,a),f=$.max(this.scissor.y,b),c=$.min(this.scissor.x+this.scissor.width,a+c),e=$.min(this.scissor.y+this.scissor.height,b+e),a=d,b=f,c=c-d,e=e-f;else this.scissor=
new ya;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(e))},__class__:Mb};var nb=function(a,b){var c=this;this._hasGPU=new R(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(w(this,this.onResize));this.init()};nb.__name__=!0;nb.__interfaces__=[cb];nb.prototype={get_type:function(){return ja.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;
var b=new Da(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new rc(this.gl);this.graphics=
new da(this.batcher,null);this.onResize()},__class__:nb,__properties__:{get_type:"get_type"}};var Nb=function(a,b,c){fa.call(this,a,b,c)};Nb.__name__=!0;Nb.__super__=fa;Nb.prototype=n(fa.prototype,{__class__:Nb});var Da=function(a,b,c){this.framebuffer=null;this._renderer=a;this.width=$.max(2,pc.nextPowerOfTwo(b));this.height=$.max(2,pc.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,
33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9729)};Da.__name__=!0;Da.__interfaces__=[Gb];Da.drawBorder=function(a,b,c){var e=a.getContext("2d",null);e.drawImage(a,b-1,0,1,c,b,0,1,c);e.drawImage(a,0,c-1,b,1,0,c,b,1)};Da.__super__=M;Da.prototype=n(M.prototype,{createTexture:function(a,b){return new Nb(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=q.createEmptyCanvas(this.width,this.height);b.getContext("2d",null).drawImage(a,0,0);
Da.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},__class__:Da});var U=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,U.createShader(a,35633,b));a.attachShader(this._program,U.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};U.__name__=!0;U.createShader=function(a,b,c){b=a.createShader(b);
a.shaderSource(b,c);a.compileShader(b);return b};U.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:U};var Kb=function(a){U.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};Kb.__name__=!0;
Kb.__super__=U;Kb.prototype=n(U.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Kb});var Jb=function(a){U.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};Jb.__name__=!0;Jb.__super__=U;Jb.prototype=n(U.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);
this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Jb});var Lb=function(a){U.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};Lb.__name__=!0;Lb.__super__=U;Lb.prototype=n(U.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,
3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:Lb});var sc=function(){this._transitor=null};sc.__name__=!0;sc.__super__=y;sc.prototype=n(y.prototype,{get_name:function(){return"Director_8"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&
this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_9;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_9;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),
this._transitor=null,this.invalidateVisibility())},__class__:sc,__properties__:n(y.prototype.__properties__,{get_topScene:"get_topScene"})});var tc=function(){};tc.__name__=!0;tc.__super__=y;tc.prototype=n(y.prototype,{get_name:function(){return"Scene_9"},__class__:tc});var ja={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};ja.Stage3D.__enum__=ja;ja.WebGL=["WebGL",1];ja.WebGL.__enum__=ja;ja.Canvas=["Canvas",2];ja.Canvas.__enum__=ja;var Mc=function(){};Mc.__name__=
!0;Mc.that=function(){};var dc=function(){};dc.__name__=!0;dc.set=function(a,b,c){return c?a|b:a&~b};var zb=function(){this.success=new B;this.error=new B;this.progressChanged=new xa;this.hasResult=!1;this._total=this._progress=0};zb.__name__=!0;zb.prototype={set_result:function(a){if(this.hasResult)throw new p("Promise result already assigned");this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},
set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:zb,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var xa=function(a){K.call(this,a)};xa.__name__=!0;xa.__super__=K;xa.prototype=n(K.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==K.DISPATCHING_SENTINEL?
this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:xa});var Zb=function(a){this.next=null;this.fn=a};Zb.__name__=!0;Zb.prototype={__class__:Zb};var S=function(){};S.__name__=!0;S.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,b+1,null):null};S.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?u.substr(a,0,b):a};S.getUrlExtension=
function(a){var b=a.lastIndexOf("?");0<=b&&(a=u.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=u.substr(a,b+1,null));return S.getFileExtension(a)};S.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};S.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",e=0;e<c;){0<e&&(a+=", ");var d=b[e],f=b[e+1];if(D.is(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=d+"="+D.string(f);e+=2}a+="]"}return a};var uc=function(){};uc.__name__=!0;var vc=function(a,
b){this.high=a;this.low=b};vc.__name__=!0;vc.prototype={__class__:vc};var fb=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};fb.__name__=!0;fb.delay=function(a,b){var c=new fb(b);c.run=function(){c.stop();a()};return c};fb.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:fb};var T=function(){this.h={}};T.__name__=!0;T.__interfaces__=[uc];T.prototype={remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];
return!0},__class__:T};var Fa=function(){this.h={};this.h.__keys__={}};Fa.__name__=!0;Fa.__interfaces__=[uc];Fa.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Fa.count);this.h[c]=b;this.h.__keys__[c]=a},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},__class__:Fa};var Bb=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};Bb.__name__=!0;Bb.prototype={hasNext:function(){return this.index<this.count},
next:function(){return this.map.get(this.keys[this.index++])},__class__:Bb};var X=function(){this.h={}};X.__name__=!0;X.__interfaces__=[uc];X.prototype={set:function(a,b){null!=I[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=I[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=I[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+
a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},keys:function(){var a=this.arrayKeys();return u.iter(a)},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Bb(this,this.arrayKeys())},__class__:X};var ka={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:["Blocked",0]};ka.Blocked.__enum__=
ka;ka.Overflow=["Overflow",1];ka.Overflow.__enum__=ka;ka.OutsideBounds=["OutsideBounds",2];ka.OutsideBounds.__enum__=ka;ka.Custom=function(a){a=["Custom",3,a];a.__enum__=ka;return a};var qb=function(){};qb.__name__=!0;qb.getType=function(a){a=qb.getMeta(a);return null==a||null==a.obj?{}:a.obj};qb.getMeta=function(a){return a.__meta__};var oa=function(){};oa.__name__=!0;oa.parse=function(a,b){null==b&&(b=!1);var c=l.createDocument();oa.doParse(a,b,0,c);return c};oa.doParse=function(a,b,c,d){null==
c&&(c=0);for(var g=null,f=1,h=1,j=null,i=0,k=0,o=0,m=a.charCodeAt(c),n=new na,q=1,r=-1;m==m;){switch(f){case 0:switch(m){case 10:case 13:case 9:case 32:break;default:f=h;continue}break;case 1:switch(m){case 60:f=0;h=2;break;default:i=c;f=13;continue}break;case 13:60==m?(n.addSub(a,i,c-i),h=l.createPCData(n.b),n=new na,d.addChild(h),k++,f=0,h=2):38==m&&(n.addSub(a,i,c-i),f=18,q=13,i=c+1);break;case 17:93==m&&93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(m=l.createCData(u.substr(a,i,c-i)),d.addChild(m),
k++,c+=2,f=1);break;case 2:switch(m){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=u.substr(a,c,6).toUpperCase())throw new p("Expected <![CDATA[");c+=5;f=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=u.substr(a,c+2,6).toUpperCase())throw new p("Expected <!DOCTYPE");c+=8;f=16}else{if(45!=a.charCodeAt(c+1)||45!=a.charCodeAt(c+2))throw new p("Expected <\!--");c+=2;f=15}i=c+1;break;case 63:f=14;i=c;break;case 47:if(null==d)throw new p("Expected node name");i=c+1;f=0;h=10;
break;default:f=3;i=c;continue}break;case 3:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(c==i)throw new p("Expected node name");g=l.createElement(u.substr(a,i,c-i));d.addChild(g);k++;f=0;h=4;continue}break;case 4:switch(m){case 47:f=11;break;case 62:f=9;break;default:f=5;i=c;continue}break;case 5:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(i==c)throw new p("Expected attribute name");j=u.substr(a,i,c-i);if(g.exists(j))throw new p("Duplicate attribute");
f=0;h=6;continue}break;case 6:switch(m){case 61:f=0;h=7;break;default:throw new p("Expected =");}break;case 7:switch(m){case 34:case 39:n=new na;f=8;i=c+1;r=m;break;default:throw new p('Expected "');}break;case 8:switch(m){case 38:n.addSub(a,i,c-i);f=18;q=8;i=c+1;break;case 62:if(b)throw new p("Invalid unescaped "+String.fromCharCode(m)+" in attribute value");m==r&&(n.addSub(a,i,c-i),h=n.b,n=new na,g.set(j,h),f=0,h=4);break;case 60:if(b)throw new p("Invalid unescaped "+String.fromCharCode(m)+" in attribute value");
m==r&&(n.addSub(a,i,c-i),h=n.b,n=new na,g.set(j,h),f=0,h=4);break;default:m==r&&(n.addSub(a,i,c-i),h=n.b,n=new na,g.set(j,h),f=0,h=4)}break;case 9:i=c=oa.doParse(a,b,c,g);f=1;break;case 11:switch(m){case 62:f=1;break;default:throw new p("Expected >");}break;case 12:switch(m){case 62:return 0==k&&d.addChild(l.createPCData("")),c;default:throw new p("Expected >");}case 10:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(i==c)throw new p("Expected node name");h=u.substr(a,
i,c-i);if(d.nodeType!=l.Element)throw new p("Bad node type, expected Element but found "+d.nodeType);if(h!=d.nodeName)throw new p("Expected </"+function(){if(d.nodeType!=l.Element)throw"Bad node type, expected Element but found "+d.nodeType;return d.nodeName}(this)+">");f=0;h=12;continue}break;case 15:45==m&&45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(m=l.createComment(u.substr(a,i,c-i)),d.addChild(m),k++,c+=2,f=1);break;case 16:91==m?o++:93==m?o--:62==m&&0==o&&(m=l.createDocType(u.substr(a,i,
c-i)),d.addChild(m),k++,f=1);break;case 14:63==m&&62==a.charCodeAt(c+1)&&(c++,m=u.substr(a,i+1,c-i-2),m=l.createProcessingInstruction(m),d.addChild(m),k++,f=1);break;case 18:if(59==m){i=u.substr(a,i,c-i);if(35==i.charCodeAt(0))i=120==i.charCodeAt(1)?D.parseInt("0"+u.substr(i,1,i.length-1)):D.parseInt(u.substr(i,1,i.length-1)),n.b+=String.fromCharCode(i);else if(oa.escapes.exists(i))n.add(oa.escapes.get(i));else{if(b)throw new p("Undefined entity: "+i);n.b+=D.string("&"+i+";")}i=c+1;f=q}else if(!(97<=
m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)&&35!=m){if(b)throw new p("Invalid character in entity: "+String.fromCharCode(m));n.b+="&";n.addSub(a,i,c-i);c--;i=c+1;f=q}}m=Ta.fastCodeAt(a,++c)}1==f&&(i=c,f=13);if(13==f){if(c!=i||0==k)n.addSub(a,i,c-i),a=l.createPCData(n.b),d.addChild(a),k++;return c}if(!b&&18==f&&13==q)return n.b+="&",n.addSub(a,i,c-i),a=l.createPCData(n.b),d.addChild(a),k++,c;throw new p("Unexpected end");};var p=function(a){Error.call(this);this.val=a;this.message=
""+a;Error.captureStackTrace&&Error.captureStackTrace(this,p)};p.__name__=!0;p.__super__=Error;p.prototype=n(Error.prototype,{__class__:p});var C=function(){};C.__name__=!0;C.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=C.__nativeClassName(a);return null!=a?C.__resolveNativeClass(a):null};C.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c=
"object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,g=a.length;d<g;)var f=d++,c=2!=f?c+(","+C.__string_rec(a[f],b)):c+C.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(g=0;g<c;)f=g++,d+=(0<f?",":"")+C.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(h){return h instanceof p&&(h=h.val),"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;
d="{\n";b+="\t";g=null!=a.hasOwnProperty;for(c in a)if(!g||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+C.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};C.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,g=c.length;d<g;){var f=d++,f=c[f];if(f==
b||C.__interfLoop(f,b))return!0}return C.__interfLoop(a.__super__,b)};C.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Vc:return(a|0)===a;case Qc:return"number"==typeof a;case Rc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Wc:return!0;default:if(null!=a)if("function"==typeof b){if(a instanceof b||C.__interfLoop(C.getClass(a),b))return!0}else{if("object"==typeof b&&C.__isNativeObj(b)&&a instanceof b)return!0}else return!1;
return b==Xc&&null!=a.__name__||b==Yc&&null!=a.__ename__?!0:a.__enum__==b}};C.__nativeClassName=function(a){a=C.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};C.__isNativeObj=function(a){return null!=C.__nativeClassName(a)};C.__resolveNativeClass=function(a){return Jc[a]};var Ob=function(){};Ob.__name__=!0;Ob.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return b instanceof p&&(b=b.val),null}};Ob.getSessionStorage=
function(){try{var a=window.sessionStorage;a.getItem("");return a}catch(b){return b instanceof p&&(b=b.val),null}};var Lc=function(){};Lc.__name__=!0;Lc.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var g=d[c];++c;g=a.getContext(g,b);if(null!=g)return g}return null};var ga=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;)this.a[b++]=0;this.byteLength=a}};ga.__name__=!0;ga.sliceImpl=function(a,
b){var c=new Sc(this,a,null==b?null:b-a),d=new Oc(c.byteLength);(new Sc(d)).set(c);return d};ga.prototype={slice:function(a,b){return new ga(this.a.slice(a,b))},__class__:ga};var sa=function(){};sa.__name__=!0;sa._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new ga(c)}else if(C.__instanceof(a,ga))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof
Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new ga(c);else throw new p("TODO "+D.string(a));c.subarray=sa._subarray;c.set=sa._set;return c};sa._set=function(a,b){if(C.__instanceof(a.buffer,ga)){if(a.byteLength+b>this.byteLength)throw new p("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var g=c++;this[g+b]=a[g]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new p("set() outside of range");c=0;for(d=a.length;c<d;)g=
c++,this[g+b]=a[g]}else throw new p("TODO");};sa._subarray=function(a,b){var c=sa._new(this.slice(a,b));c.byteOffset=a;return c};var V=function(){this.keyboardNotes=new wc(1);this.keyboardInputs=new xc(this.keyboardNotes)};V.__name__=!0;V.main=function(){k.init();var a=window.document.getElementById("noWebAudio");if(E.get_supported())a.parentNode.removeChild(a),V.audioContext=E.ctx,V.instance=new V,Pc.init("bootstrap",(ta=V.instance,w(ta,ta.assetsReady)),5925240);else throw a.className="",new p("Could not create AudioContext. Sorry, but it looks like your browser does not support the Web-Audio APIs ;(");
};V.prototype={assetsReady:function(a){j.setup(a);this.stageWidth=k._platform.getStage().get_width();this.stageHeight=k._platform.getStage().get_height();this.setupFlambe(a);this.monoSynthUI=new Pb(this.textureAtlas,this.keyboardNotes);this.scene.addChild((new g).add(this.monoSynthUI));this.monoSynth=new Qb(V.audioContext.destination,this.keyboardNotes.noteFreq);this.initControl()},setupFlambe:function(a){var b=l.parse(a.getFile("sprites.xml").toString()),a=a.getTexture("sprites");this.textureAtlas=
Nc.parse(b,a);k.root.addChild(this.scene=new g);k.root.addChild(this.ui=new g);this.ui.add(this.uiContainer=new t);this.stageWidth=k._platform.getStage().get_width();this.stageHeight=k._platform.getStage().get_height();this.sceneContainer=new t;this.camera=new rb;this.scene.add(this.sceneContainer).add(this.camera).addChild(this.sceneBackgroundLayer=new g).addChild(this.sceneContentLayer=new g).addChild(this.sceneUILayer=new g);this.cameraMouseControl=new tb(this.camera);this.camera.behaviours.push(this.cameraMouseControl);
this.cameraMouseControl.scrollZoom=!1;this.cameraMouseControl.set_enabled(!0);this.cameraZoomLimit=new ub(this.camera,0.5,1);this.camera.behaviours.push(this.cameraZoomLimit);this.cameraZoomLimit.set_enabled(!0);this.camera.controller.zoom.set__(1);this.scene.addChild((new g).add(new vb(6710886,this.camera)),!1);k._platform.getStage().resize.connect(w(this,this.onResize))},initControl:function(){var a=this;this.monosynthPresets=new Rb;this.monsynthSerialiser=new Sb;var b=[this.monoSynth,this.monsynthSerialiser];
this.initKeyboardInputs();this.monoSynthUI.output.outputLevel.value.addObservers(b,!0);var c=this.monoSynthUI.output.pitchBend;c.returnToDefault=!0;c.labelFormatter=function(b){return c.defaultLabelFormatter(b*a.monoSynth.pitchBendRange/100)};c.value.addObservers(b,!0);var d=this.monoSynthUI.oscillators;d.osc0Type.value.addObservers(b,!0);d.osc0Level.value.addObservers(b,!0);d.osc0Pan.value.addObservers(b,!0);d.osc0Slide.value.addObservers(b,!0);d.osc0Random.value.addObservers(b,!0);d.osc0Detune.value.addObservers(b,
!0);d.osc1Type.value.addObservers(b,!0);d.osc1Level.value.addObservers(b,!0);d.osc1Pan.value.addObservers(b,!0);d.osc1Slide.value.addObservers(b,!0);d.osc1Random.value.addObservers(b,!0);d.osc1Detune.value.addObservers(b,!0);d.oscPhase.value.addObservers(b,!0);d=this.monoSynthUI.adsr;d.attack.value.addObservers(b,!0);d.decay.value.addObservers(b,!0);d.sustain.value.addObservers(b,!0);d.release.value.addObservers(b,!0);d=this.monoSynthUI.filter;d.type.value.addObservers(b,!0);d.frequency.value.addObservers(b,
!0);d.Q.value.addObservers(b,!0);d.attack.value.addObservers(b,!0);d.release.value.addObservers(b,!0);d.range.value.addObservers(b,!0);d=this.monoSynthUI.distortion;d.pregain.value.addObservers(b,!0);d.waveshaperAmount.value.addObservers(b,!0);d.bits.value.addObservers(b,!0);d.rateReduction.value.addObservers(b,!0);d=this.monoSynthUI.delay;d.level.value.addObservers(b,!0);d.time.value.addObservers(b,!0);d.feedback.value.addObservers(b,!0);d.lfpFreq.value.addObservers(b,!0);d.lfpQ.value.addObservers(b,
!0);this.presetIndex=-1;b=[];for(d=this.monosynthPresets.presets.keys();d.hasNext();){var g=d.next();b.push(g)}this.presetNames=b;this.monsynthSerialiser.restoreSession()||this.monsynthSerialiser.deserialise(this.monosynthPresets.get(this.presetNames[this.presetIndex=0]))},nextPreset:function(a){this.presetIndex+=a;0>this.presetIndex?this.presetIndex=this.presetNames.length-1:this.presetIndex>=this.presetNames.length&&(this.presetIndex=0);this.monsynthSerialiser.deserialise(this.monosynthPresets.presets.get(this.presetNames[this.presetIndex]));
null},onKeyDown:function(a){var b=Ca.toKeyCode(a.key);this.activeKeys[b]=!0;if(this.activeKeys[17])switch(a.key[1]){case 17:window.document.location.search="";break;case 5:k._platform.getStage().requestFullscreen()}else switch(a.key[1]){case 83:k._platform.getStage().requestFullscreen(!1);break;case 62:k._platform.getStage().requestFullscreen();break;case 46:this.camera.controller.zoom.animateBy(0.2,0.25,H.quadOut);break;case 51:this.camera.controller.zoom.animateBy(-0.2,0.25,H.quadOut);break;case 52:null;
break;case 53:this.monsynthSerialiser.randomiseAll();break;case 54:this.monsynthSerialiser.resetAll();break;case 68:this.nextPreset(1);break;case 70:this.nextPreset(-1);break;case 67:this.monoSynthUI.keyboardStartOctave(this.monoSynthUI.currentDisplayOctave-1);this.keyboardInputs.octaveShift=this.monoSynthUI.currentDisplayOctave-1;this.keyboardInputs.allNotesOff();break;case 69:this.monoSynthUI.keyboardStartOctave(this.monoSynthUI.currentDisplayOctave+1);this.keyboardInputs.octaveShift=this.monoSynthUI.currentDisplayOctave-
1;this.keyboardInputs.allNotesOff();break;default:if(!this.activeKeys[18])this.keyboardInputs.onQwertyKeyDown(b)}},onKeyUp:function(a){a=Ca.toKeyCode(a.key);this.activeKeys[a]=!1;this.keyboardInputs.onQwertyKeyUp(a)},initKeyboardInputs:function(){var a=this;if(k._platform.getKeyboard().get_supported()){this.activeKeys=Array(256);for(var b=0,c=this.activeKeys.length;b<c;)this.activeKeys[b++]=!1;k._platform.getKeyboard().up.connect(w(this,this.onKeyUp));k._platform.getKeyboard().down.connect(w(this,
this.onKeyDown))}this.setupMidi();this.monoSynthUI.keyboard.keyDown.connect((ta=this.keyboardInputs,w(ta,ta.onNoteKeyDown)));this.monoSynthUI.keyboard.keyUp.connect((ta=this.keyboardInputs,w(ta,ta.onNoteKeyUp)));var d=function(b,c){null==c&&(c=0.8);a.monoSynth.noteOn(V.audioContext.currentTime,0<=b&&128>b?a.keyboardNotes.noteFreq.noteFrequencies[b]:NaN,c,!a.monoSynth.noteIsOn);a.monoSynthUI.keyboard.setNoteState(b,!0)};this.keyboardInputs.noteOn.connect(d);this.keyboardInputs.noteOff.connect(function(b){a.monoSynthUI.keyboard.setNoteState(b,
!1);0<a.keyboardInputs.heldNotes.length?d(a.keyboardInputs.get_lastNote()):a.monoSynth.noteOff(V.audioContext.currentTime)})},setupMidi:function(){var a=this;WebMidi.supported?WebMidi.enable(function(){WebMidi.addListener("noteon",function(b){a.keyboardInputs.onNoteKeyDown(b.note.number,b.velocity)});WebMidi.addListener("noteoff",function(b){a.keyboardInputs.onNoteKeyUp(b.note.number)});WebMidi.addListener("pitchbend",function(b){a.monoSynth.set_pitchBend(b.value)})},function(){null}):null},onResize:function(){this.stageWidth=
k._platform.getStage().get_width();this.stageHeight=k._platform.getStage().get_height()},__class__:V};var Pc=function(){};Pc.__name__=!0;Pc.init=function(a,b,c){null==c&&(c=0);var d=new qa(c,1,k._platform.getStage().get_height());k.root.add(d);var g=k.loadAssetPack(Z.fromAssets(a));g.progressChanged.connect(function(){d.width.animateTo(g._progress/g._total*k._platform.getStage().get_width(),0.25,H.quadOut);d.height.set__(k._platform.getStage().get_height())});g.success.connect(function(a){d.width.animateTo(k._platform.getStage().get_width(),
0.25,H.quadOut);fb.delay(function(){b(a);d.dispose()},250)}).once();g.error.connect(function(a){d.color=16711680;b(null);throw new p(a);})};var Qb=function(a,b){this.noteFreq=this.osc0Freq=this.osc1Freq=440;this._phase=this._pitchBend=this._osc0_detuneCents=this._osc1_detuneCents=0;this.pitchBendRange=200;this.osc0_portamentoTime=this.osc0_randomCents=this.osc1_portamentoTime=this.osc1_randomCents=0;this.noteIsOn=!1;this.freqUtil=b;this.context=a.context;this.outputGain=this.context.createGain();
this.outputGain.connect(a);this.outputGain.gain.value=1;this.delay=new yc(this.context);this.delay._delay.connect(this.outputGain);this.filter=new zc(ha.LOWPASS,null,null,this.context);this.filter.biquad.connect(this.delay._level);this.filter.biquad.connect(this.outputGain);this.distortionGroup=new Ac(this.context);this.distortionGroup.crusher.node.connect(this.filter.biquad);this.adsr=new Bc(this.context,null,this.distortionGroup.pregain);this.setupOscillators()};Qb.__name__=!0;Qb.__interfaces__=
[Ua];Qb.prototype={setupOscillators:function(){this.phaseDelay=this.context.createDelay(1/this.freqUtil.noteFrequencies[0]);this.phaseDelay.connect(this.adsr.node,0);var a;a=this.context.createPanner();a.panningModel="equalpower";var b=1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);a.setPosition(Math.sin(0),0,Math.sin(b));0;this.osc0Pan=a;a=this.context.createPanner();a.panningModel="equalpower";b=1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);a.setPosition(Math.sin(0),
0,Math.sin(b));0;this.osc1Pan=a;this.osc0Pan.connect(this.phaseDelay);this.osc1Pan.connect(this.adsr.node);this.osc0Level=this.context.createGain();this.osc1Level=this.context.createGain();this.osc0Level.connect(this.osc0Pan);this.osc1Level.connect(this.osc1Pan);this.osc0=new Tb(this.context,this.osc0Level);this.osc1=new Tb(this.context,this.osc1Level)},noteOn:function(a,b,c,d){null==d&&(d=!1);null==c&&(c=1);this.noteFreq=this.osc0Freq=this.osc1Freq=b;var b=this._osc0_detuneCents,g=this._osc1_detuneCents;
0<this.osc0_randomCents&&(b+=this.osc0_randomCents*(Math.random()-0.5));0<this.osc1_randomCents&&(g+=this.osc1_randomCents*(Math.random()-0.5));if(0!=this._pitchBend)var f=this._pitchBend*this.pitchBendRange,b=b+f,g=g+f;0!=b&&(this.osc0Freq=this.freqUtil.detuneFreq(this.osc0Freq,b));0!=g&&(this.osc1Freq=this.freqUtil.detuneFreq(this.osc1Freq,g));b=1/this.osc0Freq*this._phase;this.phaseDelay.delayTime.cancelScheduledValues(a);0<this.osc0_portamentoTime?0<b?(this.phaseDelay.delayTime.setValueAtTime(this.phaseDelay.delayTime.value,
a),this.phaseDelay.delayTime.exponentialRampToValueAtTime(b,a+this.osc0_portamentoTime)):this.phaseDelay.delayTime.setValueAtTime(b,a):this.phaseDelay.delayTime.setValueAtTime(b,a);b=this.osc0.get_oscillator();g=this.osc0Freq;f=this.osc0_portamentoTime;b.frequency.cancelScheduledValues(a);0<f&&!d&&g!=b.frequency.value?(b.frequency.setValueAtTime(b.frequency.value,a),b.frequency.exponentialRampToValueAtTime(g,a+f)):b.frequency.setValueAtTime(g,a);b=this.osc1.get_oscillator();g=this.osc1Freq;f=this.osc1_portamentoTime;
b.frequency.cancelScheduledValues(a);0<f&&!d&&g!=b.frequency.value?(b.frequency.setValueAtTime(b.frequency.value,a),b.frequency.exponentialRampToValueAtTime(g,a+f)):b.frequency.setValueAtTime(g,a);if(!this.noteIsOn||d)this.adsr.on(a,c,d),this.filter.on(a,d);this.noteIsOn=!0},noteOff:function(a){var b=this.adsr.off(a);this.filter.off(a);this.osc0.get_oscillator().frequency.cancelScheduledValues(b);this.osc1.get_oscillator().frequency.cancelScheduledValues(b);this.phaseDelay.delayTime.cancelScheduledValues(b);
this.noteIsOn=!1},onParameterChange:function(a){var b=this.context.currentTime,c=a.getValue();switch(a.name){case "outputLevel":this.outputGain.gain.setValueAtTime(c,b);break;case "osc0Type":this.osc0.set_type(c|0);break;case "osc0Level":this.osc0Level.gain.setValueAtTime(c,b);break;case "osc0Pan":a=3.141592653589793*c/2;b=a+1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);this.osc0Pan.setPosition(Math.sin(a),0,Math.sin(b));c;break;case "osc0Slide":this.osc0_portamentoTime=c;break;
case "osc0Detune":this.set_osc0_detuneCents(c|0);break;case "osc0Random":this.osc0_randomCents=c;break;case "osc1Type":this.osc1.set_type(c|0);break;case "osc1Level":this.osc1Level.gain.setValueAtTime(c,b);break;case "osc1Pan":a=3.141592653589793*c/2;b=a+1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);this.osc1Pan.setPosition(Math.sin(a),0,Math.sin(b));c;break;case "osc1Slide":this.osc1_portamentoTime=c;break;case "osc1Detune":this.set_osc1_detuneCents(c|0);break;case "osc1Random":this.osc1_randomCents=
c;break;case "oscPhase":this.set_phase(c);break;case "pitchBend":this.set_pitchBend(-c);break;case "adsrAttack":this.adsr.attack=c;break;case "adsrDecay":this.adsr.decay=c;break;case "adsrSustain":this.adsr.sustain=c;break;case "adsrRelease":this.adsr.release=c;break;case "filterType":this.filter.biquad.type=ha.get(0==(c|0)?ha.LOWPASS:ha.HIGHPASS);break;case "filterFrequency":this.filter.set_frequency(c);break;case "filterQ":this.filter.set_q(c);break;case "filterAttack":this.filter.envAttack=c;break;
case "filterRelease":this.filter.envRelease=c;break;case "filterRange":this.filter.envRange=c;break;case "distortionPregain":this.distortionGroup.pregain.gain.setValueAtTime(1+c,b);break;case "distortionWaveshaperAmount":-1>c?c=-1:1<c&&(c=1);Tc.getDistortionCurve(c,this.distortionGroup.waveshaper.curve);c;break;case "distortionBits":this.distortionGroup.crusher.set_bits(c);break;case "distortionRateReduction":this.distortionGroup.crusher.set_rateReduction(c);break;case "delayTime":this.delay._delay.delayTime.setValueAtTime(c,
b);break;case "delayLevel":this.delay._level.gain.setValueAtTime(c,b);break;case "delayFeedback":this.delay._feedback.gain.setValueAtTime(c,b);break;case "delayLFPFreq":this.delay._lpf.frequency.setValueAtTime(c,b);break;case "delayLFPQ":this.delay._lpf.Q.setValueAtTime(c,b)}},set_phase:function(a){var b=this.context.currentTime;this.phaseDelay.delayTime.cancelScheduledValues(b);this.phaseDelay.delayTime.setValueAtTime(1/this.noteFreq*a,b);return this._phase=a},set_pitchBend:function(a){-1>a?a=-1:
1<a&&(a=1);if(this.noteIsOn){var b=(a-this._pitchBend)*this.pitchBendRange,c=this.freqUtil.detuneFreq(this.osc0Freq,b),b=this.freqUtil.detuneFreq(this.osc1Freq,b),d=this.context.currentTime;this.osc0.get_oscillator().frequency.cancelScheduledValues(d);this.osc0.get_oscillator().frequency.exponentialRampToValueAtTime(c,d+0.016666666666666666);this.osc1.get_oscillator().frequency.cancelScheduledValues(d);this.osc1.get_oscillator().frequency.exponentialRampToValueAtTime(b,d+0.016666666666666666);this.osc0Freq=
c;this.osc1Freq=b}return this._pitchBend=a},set_osc0_detuneCents:function(a){-100>a?a=-100:100<a&&(a=100);if(this.noteIsOn){var b=this.freqUtil.detuneFreq(this.osc0Freq,a-this._osc0_detuneCents),c=this.context.currentTime;this.osc0.get_oscillator().frequency.cancelScheduledValues(c);this.osc0.get_oscillator().frequency.exponentialRampToValueAtTime(b,c+0.016666666666666666);this.osc0Freq=b}return this._osc0_detuneCents=a},set_osc1_detuneCents:function(a){-100>a?a=-100:100<a&&(a=100);if(this.noteIsOn){var b=
this.freqUtil.detuneFreq(this.osc1Freq,a-this._osc1_detuneCents),c=this.context.currentTime;this.osc1.get_oscillator().frequency.cancelScheduledValues(c);this.osc1.get_oscillator().frequency.exponentialRampToValueAtTime(b,c+0.016666666666666666);this.osc1Freq=b}return this._osc1_detuneCents=a},__class__:Qb,__properties__:{set_pitchBend:"set_pitchBend",set_phase:"set_phase",set_osc1_detuneCents:"set_osc1_detuneCents",set_osc0_detuneCents:"set_osc0_detuneCents"}};var Qa=function(a){var b=this;this.sessionDataKey=
""+a+"_sessionParameters";this.presetDataKey=""+a+"_presetParameters_";this.storage=null==Pa._instance?Pa._instance=new Pa:Pa._instance;this.map=new X;window.addEventListener("beforeunload",function(){b.storeSession()})};Qa.__name__=!0;Qa.__interfaces__=[Ua];Qa.prototype={restoreSession:function(){var a=this.storage.session.getItem(this.sessionDataKey);return null!=a?(this.deserialise(a),!0):!1},storeSession:function(){this.storage.setSessionData(this.sessionDataKey,this.serialise())},onParameterChange:function(a){this.map.exists(a.name)||
this.map.set(a.name,a)},resetAll:function(){for(var a=this.map.keys();a.hasNext();)this.map.get(a.next()).setToDefault()},randomiseAll:function(a){null==a&&(a=1);for(var b=this.map.keys();b.hasNext();){var c=this.map.get(b.next()),d=c.getValue(!0),d=d+2*(Math.random()-0.5)*a;0>d?d=-d:1<d&&(d-=1);c.setValue(d,!0)}},serialise:function(){for(var a={},b=this.map.keys();b.hasNext();){var c=b.next();O.setField(a,c,this.map.get(c).normalisedValue)}return JSON.stringify(a)},deserialise:function(a,b){null==
b&&(b=!1);for(var c=JSON.parse(a),d=0,g=O.fields(c);d<g.length;){var f=g[d];++d;if(this.map.exists(f)){var h=D.parseFloat(O.field(c,f));b?this.map.get(f).setDefault(h,!0):this.map.get(f).setValue(h,!0)}}},__class__:Qa};var Ub=function(){this.init()};Ub.__name__=!0;Ub.prototype={get:function(a){return this.presets.get(a)},init:function(){throw new p("ImplementationError - override in a subclass");},__class__:Ub};var Pa=function(){this.local=Ob.getLocalStorage();this.session=Ob.getSessionStorage()};
Pa.__name__=!0;Pa.prototype={setSessionData:function(a,b){this.session.setItem(a,b)},__class__:Pa};var Bc=function(a,b,c){this.release=0.25;this.sustain=0.44;this.decay=0.2;this.attack=0.1;a=a.createGain();a.gain.value=0;null!=b&&b.connect(a);null!=c&&a.connect(c);this.node=a};Bc.__name__=!0;Bc.prototype={on:function(a,b,c){null==c&&(c=!1);null==b&&(b=1);null==a&&(a=0);var d=this.node,g=this.attack,f=this.decay,h=this.sustain;1.0E-4>g&&(g=1.0E-4);1.0E-4>f&&(f=1.0E-4);d.gain.cancelScheduledValues(a);
c&&d.gain.setValueAtTime(d.gain.value,a);d.gain.setTargetAtTime(b,a,Math.log(g+1)/4.605170185988092);1!=h&&(0<f?d.gain.setTargetAtTime(b*h,a+g,Math.log(f+1)/4.605170185988092):d.gain.setValueAtTime(b*h,a+g))},off:function(a){null==a&&(a=0);var b=this.node,c=this.release;1.0E-4>c&&(c=1.0E-4);b.gain.cancelScheduledValues(a);b.gain.setValueAtTime(b.gain.value,a);b.gain.setTargetAtTime(0,a,Math.log(c+1)/4.605170185988092);return a+c},__class__:Bc};var J=function(){};J.__name__=!0;J.get=function(a){switch(a){case 0:return OscillatorTypeShim.SINE;
case 1:return OscillatorTypeShim.SQUARE;case 2:return OscillatorTypeShim.SAWTOOTH;case 3:return OscillatorTypeShim.TRIANGLE;case 4:return OscillatorTypeShim.CUSTOM;default:return null}};var Tb=function(a,b){this.osc=new T;var c;c=a.createOscillator();c.frequency.value=440;c.type=J.get(J.SINE);c.start(0);this.osc.h[J.SINE]=c;c=a.createOscillator();c.frequency.value=440;c.type=J.get(J.SQUARE);c.start(0);this.osc.h[J.SQUARE]=c;c=a.createOscillator();c.frequency.value=440;c.type=J.get(J.SAWTOOTH);c.start(0);
this.osc.h[J.SAWTOOTH]=c;c=a.createOscillator();c.frequency.value=440;c.type=J.get(J.TRIANGLE);c.start(0);this.osc.h[J.TRIANGLE]=c;this._type=0;this._output=b;this.connected=!1};Tb.__name__=!0;Tb.prototype={set_type:function(a){if(this._type!=a||!this.connected)this.connected=!0,this.osc.h[this._type].disconnect(0),this.osc.h[a].connect(this._output);return this._type=a},get_oscillator:function(){return this.osc.h[this._type]},__class__:Tb,__properties__:{get_oscillator:"get_oscillator",set_type:"set_type"}};
var Rb=function(){this.init()};Rb.__name__=!0;Rb.__super__=Ub;Rb.prototype=n(Ub.prototype,{init:function(){null==this.presets&&(this.presets=new X,this.presets.set("Squasaw",'{"outputLevel":0.4599999999999995, "pitchBend":0.5, "osc0Type":0.6666666666666666, "osc0Level":0.43999999999999995, "osc0Pan":0.5, "osc0Slide":0.0990990990990991, "osc0Random":0.060000000000000005, "osc0Detune":0.5, "osc1Type":0.31250000000000006, "osc1Level":0.43999999999999995, "osc1Pan":0.5, "osc1Slide":0.05999999999999996, "osc1Random":0.059999999999999984, "osc1Detune":0.5, "oscPhase":0, "adsrAttack":0.01599999999999999, "adsrDecay":0.029999999999999968, "adsrSustain":0.5800000000000003, "adsrRelease":0.03500000000000001, "filterType":0, "filterFrequency":0.06000000000000005, "filterQ":0.39999999999999947, "filterAttack":0.02299999999999998, "filterRelease":0.03, "filterRange":1, "distortionPregain":0, "distortionWaveshaperAmount":0.7600000000000002, "distortionBits":0.4782608695652174, "distortionRateReduction":0, "delayLevel":0.44999999999999957, "delayTime":0.2329332933293329, "delayFeedback":0.30002500250025005, "delayLFPFreq":0.22999999999999926, "delayLFPQ":0 }'),
this.presets.set("Sirtet",'{"outputLevel":0.4499999999999995,"pitchBend":0.5,"osc0Type":0,"osc0Level":0.5,"osc0Pan":0.5,"osc0Slide":0.0990990990990991,"osc0Random":0,"osc0Detune":0.5,"osc1Type":0,"osc1Level":0.5,"osc1Pan":0.5,"osc1Slide":0.0990990990990991,"osc1Random":0,"osc1Detune":0.5,"oscPhase":0.2699999999999999,"adsrAttack":0.007000000000000001,"adsrDecay":0.1,"adsrSustain":0.3299999999999995,"adsrRelease":0.003,"filterType":1,"filterFrequency":0,"filterQ":0.0999909999099991,"filterAttack":0,"filterRelease":0,"filterRange":0,"distortionPregain":0.4800000000000001,"distortionWaveshaperAmount":0.9299999999999999,"distortionBits":1,"distortionRateReduction":0,"delayLevel":0.01,"delayTime":0.4929332933293329,"delayFeedback":0,"delayLFPFreq":1,"delayLFPQ":0.0999909999099991}'),
this.presets.set("Mesanoir",'{"outputLevel":0.35499718878418207,"pitchBend":0.5,"osc0Type":0.07624358251883545,"osc0Level":0.48556221509352326,"osc0Pan":0.09680561296641832,"osc0Slide":0.07077055245319075,"osc0Random":0.4575806651264429,"osc0Detune":0.8025450077839196,"osc1Type":0.006721058571389937,"osc1Level":0.8622063202783465,"osc1Pan":0.49720164434984326,"osc1Slide":0.2541634194334752,"osc1Random":0.5048075593076646,"osc1Detune":0.12225819798186421,"oscPhase":0.38200558442622423,"adsrAttack":0.7889877760782837,"adsrDecay":0.48192048855125913,"adsrSustain":0.9429306462407112,"adsrRelease":0.1279276450164617,"filterType":0.24608794087544084,"filterFrequency":0.19239046958461392,"filterQ":0.970282814583691,"filterAttack":0.2982791615650058,"filterRelease":0.0030650437809527364,"filterRange":0.7127542118541896,"distortionPregain":0.3336319421604276,"distortionWaveshaperAmount":0.006667260080575943,"distortionBits":0.47723340376725654,"distortionRateReduction":0.04437419539317489,"delayLevel":0.2907389444857835,"delayTime":0.6230580973534239,"delayFeedback":0.5186913178583821,"delayLFPFreq":0.20329118954390266,"delayLFPQ":0.47996358598494304}'),
this.presets.set("Waaaaahp",'{"outputLevel":0.46341293396428185,"pitchBend":0.5,"osc0Type":0.28064297067386834,"osc0Level":0.1763532031327486,"osc0Pan":0.3412646828964354,"osc0Slide":0.4078379269471175,"osc0Random":0.1384059335105121,"osc0Detune":0.34210485965013504,"osc1Type":0.20411056885495782,"osc1Level":0.350563233718276,"osc1Pan":0.7297513120062648,"osc1Slide":0.7983276528088159,"osc1Random":0.012613496277481318,"osc1Detune":0.34069081442430615,"oscPhase":0.3753971047885717,"adsrAttack":0.12518607841804621,"adsrDecay":0.21071386579424134,"adsrSustain":0.43955529714003205,"adsrRelease":0.06789803653955451,"filterType":0.2604490057565272,"filterFrequency":0.022565599996596575,"filterQ":0.8418617065744975,"filterAttack":0.13229004982858905,"filterRelease":0.49194553755223747,"filterRange":0.8064281712286174,"distortionPregain":0.08015941549092531,"distortionWaveshaperAmount":0.5855826642364264,"distortionBits":0.7561208223227576,"distortionRateReduction":0.23606798753142325,"delayLevel":0.6047618193551898,"delayTime":0.4965090568645252,"delayFeedback":0.7778823028968429,"delayLFPFreq":0.492137948796153,"delayLFPQ":0.12913286697766393}'),
this.presets.set("LongTime",'{"outputLevel":0.5423528824560349,"pitchBend":0.5,"osc0Type":0.508481303229928,"osc0Level":0.2903344490192831,"osc0Pan":0.16695982096716755,"osc0Slide":0.008216620494217342,"osc0Random":0.39255549060180783,"osc0Detune":0.22689511254429817,"osc1Type":0.216489977572627,"osc1Level":0.1760277607850732,"osc1Pan":0.8199999999999998,"osc1Slide":0.6387598080778711,"osc1Random":0.50296380976215,"osc1Detune":0.5358693818561733,"oscPhase":0.42055099362507464,"adsrAttack":0.5636245479620992,"adsrDecay":1,"adsrSustain":0.7999999999999998,"adsrRelease":0.2141217650845646,"filterType":0.04347413685172796,"filterFrequency":0.019138042908162144,"filterQ":0.12306910322332176,"filterAttack":0.22199134798720488,"filterRelease":0.04813646869733934,"filterRange":0.7784414859488606,"distortionPregain":0.19512580804526802,"distortionWaveshaperAmount":0.13458260847255588,"distortionBits":0.6648063724253165,"distortionRateReduction":0.5591793827526272,"delayLevel":0.7884579640813172,"delayTime":0.7814509899823321,"delayFeedback":0.6427875032929922,"delayLFPFreq":0.09458289267495279,"delayLFPQ":0.34001128153228544}'),
this.presets.set("Wet Sine",'{"outputLevel":1,"pitchBend":0.5,"osc0Type":0,"osc0Level":0.5,"osc0Pan":0.5,"osc0Slide":0.0990990990990991,"osc0Random":0.04,"osc0Detune":0.5,"osc1Type":0,"osc1Level":0.5,"osc1Pan":0.5,"osc1Slide":0.0990990990990991,"osc1Random":0.04,"osc1Detune":0.5,"oscPhase":0,"adsrAttack":0.07999999999999999,"adsrDecay":0.15,"adsrSustain":0.49999999999999956,"adsrRelease":1,"filterType":0,"filterFrequency":0.17999999999999935,"filterQ":0.8399999999999999,"filterAttack":0.13499999999999998,"filterRelease":0.7300000000000003,"filterRange":1,"distortionPregain":0.09999999999999999,"distortionWaveshaperAmount":0.7000000000000002,"distortionBits":0.13826086956521716,"distortionRateReduction":0,"delayLevel":0.14999999999999986,"delayTime":0.9729332933293332,"delayFeedback":0.4500250025002502,"delayLFPFreq":0.19999999999999982,"delayLFPQ":0}'),
this.presets.set("Floppy Bits",'{"outputLevel":0.4399999999999995,"pitchBend":0.5,"osc0Type":0,"osc0Level":1,"osc0Pan":0.5,"osc0Slide":0.0990990990990991,"osc0Random":0,"osc0Detune":0.5,"osc1Type":0,"osc1Level":1,"osc1Pan":0.5,"osc1Slide":0.0990990990990991,"osc1Random":0,"osc1Detune":0.5,"oscPhase":0,"adsrAttack":0.21000000000000002,"adsrDecay":0.15,"adsrSustain":0.8999999999999999,"adsrRelease":1,"filterType":0,"filterFrequency":1,"filterQ":0.4999999999999998,"filterAttack":1,"filterRelease":0.21999999999999942,"filterRange":1,"distortionPregain":0.29000000000000004,"distortionWaveshaperAmount":0.37,"distortionBits":0.13826086956521716,"distortionRateReduction":0,"delayLevel":0.09999999999999985,"delayTime":0.9729332933293332,"delayFeedback":0.4500250025002502,"delayLFPFreq":0.19999999999999982,"delayLFPQ":0}'),
this.presets.set("Gentle Ben",'{"outputLevel":0.6799999999999998, "pitchBend":0.5, "osc0Type":0.37500000000000006, "osc0Level":0.5, "osc0Pan":0.43999999999999995, "osc0Slide":0.0990990990990991, "osc0Random":0.20000000000000004, "osc0Detune":0.5, "osc1Type":0.598214285714286, "osc1Level":0.5, "osc1Pan":0.56, "osc1Slide":0.0990990990990991, "osc1Random":0.2, "osc1Detune":0.5, "oscPhase":0.17999999999999997, "adsrAttack":0.03750352374993505, "adsrDecay":1, "adsrSustain":1, "adsrRelease":0.2919280948873624, "filterType":0, "filterFrequency":0.1599999999999993, "filterQ":0.8, "filterAttack":0.6719280948873626, "filterRelease":0.21496250072115589, "filterRange":0.9000000000000005, "distortionPregain":0, "distortionWaveshaperAmount":0.8600000000000003, "distortionBits":0.4782608695652174, "distortionRateReduction":0, "delayLevel":0.15999999999999995, "delayTime":0.16293329332933287, "delayFeedback":0.49999999999999956, "delayLFPFreq":1, "delayLFPQ":0.0999909999099991}'),
this.presets.set("WTFTW",'{"outputLevel":0.4399999999999996,"pitchBend":0.5,"osc0Type":0.9464285714285714,"osc0Level":0.4668754586018622,"osc0Pan":0.434224143885076,"osc0Slide":0.09999999999999999,"osc0Random":0.1353575261309743,"osc0Detune":0.5,"osc1Type":0,"osc1Level":0.55,"osc1Pan":0.5818778711184858,"osc1Slide":0.7860790734147436,"osc1Random":0.4989718380384147,"osc1Detune":0.5,"oscPhase":0.6322048523835839,"adsrAttack":0.17999999999999947,"adsrDecay":0.5345427193678916,"adsrSustain":0.9099999999999999,"adsrRelease":0.3135172767948372,"filterType":0,"filterFrequency":0.7800000000000007,"filterQ":0.94,"filterAttack":0.3699999999999995,"filterRelease":0.9243289259783327,"filterRange":0.48999999999999955,"distortionPregain":0.49999999999999956,"distortionWaveshaperAmount":0.8739709560014308,"distortionBits":0.21000000000000005,"distortionRateReduction":0.2,"delayLevel":0.09999999999999974,"delayTime":0.33131938935235605,"delayFeedback":0.0666541256941855,"delayLFPFreq":0.43000000000000005,"delayLFPQ":0}'),
this.presets.set("OwOwOw",'{"outputLevel":0.4404992213845257,"pitchBend":0.5,"osc0Type":0.53176956916494,"osc0Level":0.2848998922854662,"osc0Pan":0.6553399509564042,"osc0Slide":0.3345249738357958,"osc0Random":0.3254045475460585,"osc0Detune":0.48,"osc1Type":0.5856871545048695,"osc1Level":0.34120628116652374,"osc1Pan":0.274271479975432,"osc1Slide":0.19665794456058805,"osc1Random":0.27338116569444537,"osc1Detune":0.46399999999999997,"oscPhase":0.5367797849141063,"adsrAttack":0.13585058337077552,"adsrDecay":0.4118536375463009,"adsrSustain":0.7993384519033133,"adsrRelease":0.24872226793430885,"filterType":0.9169524870812893,"filterFrequency":0.04,"filterQ":1,"filterAttack":0.13216184906661455,"filterRelease":0.6764560150503516,"filterRange":0.2090064475871618,"distortionPregain":0.16845860145986036,"distortionWaveshaperAmount":0.7897845552489162,"distortionBits":0.15361713754013176,"distortionRateReduction":0.47468311311677097,"delayLevel":0.3756582126766443,"delayTime":0.5380281316579925,"delayFeedback":0.18479999119415877,"delayLFPFreq":0.8414817627705634,"delayLFPQ":0.6816484755836427}'),
this.presets.set("Leadish",'{"outputLevel":0.38295858133584215,"pitchBend":0.5,"osc0Type":0.5938830460155663,"osc0Level":0.5741079380363225,"osc0Pan":0.5,"osc0Slide":0.048732493184506884,"osc0Random":0.19387254383414923,"osc0Detune":0.5,"osc1Type":0.3392857142857143,"osc1Level":0.2815980485267937,"osc1Pan":0.5117302227392793,"osc1Slide":0.10685698390325825,"osc1Random":0.01588528836145997,"osc1Detune":0.499,"oscPhase":0.14331354821100817,"adsrAttack":0.15529628787189734,"adsrDecay":0.7664752448908985,"adsrSustain":0.6781206807121636,"adsrRelease":0.4241326441790896,"filterType":0,"filterFrequency":0.12000000000000001,"filterQ":0.5797061326913537,"filterAttack":0.4112402198649936,"filterRelease":0.3100000000000001,"filterRange":0.9099999999999999,"distortionPregain":0.6008890603668984,"distortionWaveshaperAmount":0.13999999999999999,"distortionBits":0.1382608695652172,"distortionRateReduction":0,"delayLevel":0.14624362844973773,"delayTime":0.12053697529227002,"delayFeedback":0.311054561883211,"delayLFPFreq":0.35068133769556864,"delayLFPQ":0.12999999999999995}'),
this.presets.set("Hubble",'{"outputLevel":0.3873323092423376,"pitchBend":0.5,"osc0Type":0.32187723594584483,"osc0Level":0.5501569783687592,"osc0Pan":0.4858733637258412,"osc0Slide":0.46743601735681295,"osc0Random":0.5535920813307174,"osc0Detune":0.5,"osc1Type":0.8837717605887779,"osc1Level":0.7479439487121999,"osc1Pan":0.48710694646462815,"osc1Slide":0.42825166909342927,"osc1Random":0.648777486756444,"osc1Detune":0.48000000000000004,"oscPhase":0.7499087216891347,"adsrAttack":0.42545380499213925,"adsrDecay":0.055507498793303967,"adsrSustain":0.5419561782851814,"adsrRelease":0.6898205606464309,"filterType":0.2519419346936047,"filterFrequency":0.34113304095342756,"filterQ":0.40043697291985136,"filterAttack":0.6723704796470709,"filterRelease":0.7224151427485048,"filterRange":0.6672021801024675,"distortionPregain":0.48588421270251314,"distortionWaveshaperAmount":0.5391920240223409,"distortionBits":0.4782608695652174,"distortionRateReduction":0.06000000000000014,"delayLevel":0.31409743022173675,"delayTime":0.4189383636324062,"delayFeedback":0.626016280371696,"delayLFPFreq":0.5011918721720574,"delayLFPQ":0.20447118736803485}'),
this.presets.set("Voyager",'{"outputLevel":0.596160045024007,"pitchBend":0.48438319687767045,"osc0Type":0.4999197233202217,"osc0Level":0.18356056366115814,"osc0Pan":0.4514487967826426,"osc0Slide":0.5665156216174365,"osc0Random":0.6446686258167036,"osc0Detune":0.5682883285917342,"osc1Type":0.2984360323420594,"osc1Level":0.22554069174453617,"osc1Pan":0.4376573327369988,"osc1Slide":0.2393585837478034,"osc1Random":0.9832042241469026,"osc1Detune":0.7423076857998967,"oscPhase":0.4472648433037101,"adsrAttack":0.41782711129635564,"adsrDecay":0.20043661259114742,"adsrSustain":0.9824869338423012,"adsrRelease":0.93405529389046,"filterType":0,"filterFrequency":0.4091029983200133,"filterQ":0.7449476217851041,"filterAttack":0.09563750846311381,"filterRelease":0.7517979797534644,"filterRange":0.5817121911421419,"distortionPregain":0.34397339383140246,"distortionWaveshaperAmount":0.3808828432671727,"distortionBits":0.8468644326228811,"distortionRateReduction":0.55675847357139,"delayLevel":0.5397429227456447,"delayTime":0.20590351169019483,"delayFeedback":0.7042214359156789,"delayLFPFreq":0.34564317250624277,"delayLFPQ":0.09628216465935173}'),
this.presets.set("Wubby",'{"outputLevel":0.3547301695495845,"pitchBend":0.5687244003638625,"osc0Type":0.18985329801216722,"osc0Level":0.5,"osc0Pan":0.3999999999999999,"osc0Slide":0.8976338338820046,"osc0Random":0.21318695042282343,"osc0Detune":0.8709626849740744,"osc1Type":0.5971007407642901,"osc1Level":0.5,"osc1Pan":0.6800000000000002,"osc1Slide":0.3913495484026367,"osc1Random":0.31218664860352874,"osc1Detune":0.17795773828402162,"oscPhase":0.7634197426959872,"adsrAttack":0.7516864456795156,"adsrDecay":0.3463341192342341,"adsrSustain":0.9874990698881447,"adsrRelease":0.2272168974392116,"filterType":0.3552568070963025,"filterFrequency":0.02000000000000008,"filterQ":0.46939870328358047,"filterAttack":0.34501882079988666,"filterRelease":0.21154665622860203,"filterRange":1,"distortionPregain":0.7599999999999998,"distortionWaveshaperAmount":0.569253307580948,"distortionBits":0.21617076561340814,"distortionRateReduction":0.8200000000000003,"delayLevel":0.34630362316966057,"delayTime":0.6574048277458502,"delayFeedback":0.5750675706842701,"delayLFPFreq":0.3818898075260222,"delayLFPQ":0.20028295053816053}'))},
__class__:Rb});var Sb=function(){Qa.call(this,"monosynth")};Sb.__name__=!0;Sb.__super__=Qa;Sb.prototype=n(Qa.prototype,{__class__:Sb});var zc=function(a,b,c,d,g,f){null==c&&(c=1);null==b&&(b=8E3);this.envRelease=1;this.envAttack=0.1;this.envRange=1;this._frequency=b;this._q=c;this._gain=1;d=d.createBiquadFilter();d.type=ha.get(a);d.frequency.value=b;d.Q.value=c;d.gain.value=0;null!=g&&g.connect(d);null!=f&&d.connect(f);this.biquad=d};zc.__name__=!0;zc.prototype={on:function(a,b){null==b&&(b=!1);var c=
Math.min(this._frequency+this.envRange*(8E3-this._frequency),8E3),d=this.biquad,g=this.envAttack;1.0E-4>g&&(g=1.0E-4);d.frequency.cancelScheduledValues(a);b?d.frequency.setValueAtTime(this._frequency,a):d.frequency.setValueAtTime(d.frequency.value,a);d.frequency.exponentialRampToValueAtTime(c,a+g)},off:function(a){var b=this.biquad,c=this.envRelease;1.0E-4>c&&(c=1.0E-4);b.frequency.cancelScheduledValues(a);b.frequency.setValueAtTime(b.frequency.value,a);b.frequency.setTargetAtTime(this._frequency,
a,Math.log(c+1)/4.605170185988092);return a+c},set_frequency:function(a){var b=this.biquad.context,c=b.sampleRate/2,b=b.currentTime;10>a?a=10:a>c&&(a=c);this.biquad.frequency.cancelScheduledValues(b);this.biquad.frequency.setValueAtTime(a,b);return this._frequency=a},set_q:function(a){1.0E-4>a?a=1.0E-4:1E3<a&&(a=1E3);var b=this.biquad.context.currentTime;this.biquad.Q.cancelScheduledValues(b);this.biquad.Q.setValueAtTime(a,b);return this._q=a},__class__:zc,__properties__:{set_q:"set_q",set_frequency:"set_frequency"}};
var ha=function(){};ha.__name__=!0;ha.get=function(a){switch(a){case 0:return FilterTypeShim.ALLPASS;case 1:return FilterTypeShim.BANDPASS;case 2:return FilterTypeShim.HIGHPASS;case 3:return FilterTypeShim.HIGHSHELF;case 4:return FilterTypeShim.LOWPASS;case 5:return FilterTypeShim.LOWSHELF;case 6:return FilterTypeShim.NOTCH;case 7:return FilterTypeShim.PEAKING;default:return null}};var Cc=function(a,b,c){this.sampleCount=this.tempLeft=this.tempRight=0;this.context=a;this.sampleRate=a.sampleRate;this.set_bits(24);
this.set_rateReduction(1);a=a.createScriptProcessor();null!=b&&b.connect(a);null!=c&&a.connect(c);this.node=a;this.node.onaudioprocess=w(this,this.crusherImpl)};Cc.__name__=!0;Cc.prototype={crusherImpl:function(a){for(var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),d=a.outputBuffer.getChannelData(0),a=a.outputBuffer.getChannelData(1),g=a.length,f=this.exp,h=this.iexp,j=0,i=0,k=0;k<g;){var l=k++;this.sampleCount++;this.sampleCount>=this.samplesPerCycle&&(this.sampleCount=0,
j=0.002*(Math.random()-0.5),i=0.002*(Math.random()-0.5),this.tempLeft=h*(f*b[l]+j|0),this.tempRight=h*(f*c[l]+i|0));d[l]=this.tempLeft;a[l]=this.tempRight}},set_bits:function(a){1>a?a=1:24<a&&(a=24);this._bits!=a&&(this.exp=Math.pow(2,a),this.iexp=1/this.exp);return this._bits=a},set_rateReduction:function(a){1>a?a=1:16<a&&(a=16);return this.samplesPerCycle=this._rateReduction=a},__class__:Cc,__properties__:{set_rateReduction:"set_rateReduction",set_bits:"set_bits"}};var Ac=function(a){var b=this.pregain=
a.createGain(),c;c=a.createWaveShaper();c.curve=new Float32Array(a.sampleRate|0);c.oversample="none";var d=0;-1>d?d=-1:1<d&&(d=1);Tc.getDistortionCurve(d,c.curve);d;null!=b&&b.connect(c);this.waveshaper=c;this.crusher=new Cc(a,this.waveshaper)};Ac.__name__=!0;Ac.prototype={__class__:Ac};var yc=function(a,b){null==b&&(b=1);this._level=a.createGain();this._feedback=a.createGain();this._delay=a.createDelay(b);this._level.gain.value=0.25;this._feedback.gain.value=0.5;this._lpf=a.createBiquadFilter();
this._lpf.type=ha.get(ha.LOWPASS);this._lpf.frequency.value=4E3;this._lpf.Q.value=1;this._level.connect(this._delay);this._delay.connect(this._lpf);this._lpf.connect(this._feedback);this._feedback.connect(this._delay)};yc.__name__=!0;yc.prototype={__class__:yc};var Tc={__name__:!0,getDistortionCurve:function(a,b){null==a&&(a=0);if(-1>a||1<a)throw new p("RangeError");var c;c=null==b?new Float32Array(44100):b;for(var d=c.length,g=2*a/(1-a),f,h=0;h<d;){var j=h++;f=-1+(j+j)/d;c[j]=(1+g)*f/(1+g*Math.abs(f))}return c}},
j=function(){};j.__name__=!0;j.setup=function(a){j.Prime13=new za(a,"font/Prime13");j.Prime20=new za(a,"font/Prime20")};j.getField=function(a,b){null==b&&(b="Pack my box with five dozen liquor jugs.");var c=new Oa(a,b);c.set_pixelSnapping(!0);c.set_pointerEnabled(!1);return c};var Ra=function(a,b,c){this.noteIndex=b;this.isSharp=c;A.call(this,a)};Ra.__name__=!0;Ra.__super__=A;Ra.prototype=n(A.prototype,{__class__:Ra});var Vb=function(a,b,c,d){null==d&&(d=9);null==c&&(c=-2);y.call(this);this.keyboardNotes=
a;this.keyDown=new wa;this.keyUp=new B;this.whiteKeyTexture=null!=I.WhiteKey?b.getReserved("WhiteKey"):b.h.WhiteKey;this.blackKeyTexture=null!=I.BlackKey?b.getReserved("BlackKey"):b.h.BlackKey;this.minOctave=c;this.maxOctave=this.minOctave+d;this.octaveSpace=287};Vb.__name__=!0;Vb.__super__=y;Vb.prototype=n(y.prototype,{get_name:function(){return"KeyboardUI_1"},onAdded:function(){this.container=this.owner._compMap.Sprite_0;var a=this.getKeysData(this.minOctave,this.maxOctave-this.minOctave);this.noteIndexToKey=
new T;var b=0;this.owner.addChild(this.naturals=new g);this.owner.addChild(this.sharps=new g);for(var c=0;c<a.length;){var d=a[c];++c;var j=d.index,f;f=new Ra(this.whiteKeyTexture,j,!1);f.x.set__(b);f.y.set__(0);this.noteIndexToKey.h[j]=f;this.naturals.addChild((new g).add(f));f.get_pointerOut().connect(w(this,this.onKeyPointerOut));f.get_pointerMove().connect(w(this,this.onKeyPointerMove));f.get_pointerDown().connect(w(this,this.onKeyPointerDown));f.get_pointerUp().connect(w(this,this.onKeyPointerUp));
d.hasSharp&&(f=new Ra(this.blackKeyTexture,j+1,!0),f.x.set__(b+26),f.y.set__(0),this.noteIndexToKey.h[j+1]=f,this.sharps.addChild((new g).add(f)),f.get_pointerOut().connect(w(this,this.onKeyPointerOut)),f.get_pointerMove().connect(w(this,this.onKeyPointerMove)),f.get_pointerDown().connect(w(this,this.onKeyPointerDown)),f.get_pointerUp().connect(w(this,this.onKeyPointerUp)));b+=41}this.heldKey=-1},onKeyPointerOut:function(a){!C.__instanceof(a.hit,Ra)&&-1!=this.heldKey&&(this.setKeyIsDown(this.noteIndexToKey.h[this.heldKey],
!1),this.pointerDown=!1,this.keyUp.emit(this.heldKey),this.heldKey=-1)},onKeyPointerMove:function(a){if(this.pointerDown=k._platform.getMouse().get_supported()&&k._platform.getMouse().isDown(Q.Left)||!k._platform.getMouse().get_supported()&&k._platform.getTouch().get_supported())a=a.hit,this.heldKey!=a.noteIndex&&(this.setKeyIsDown(a,!0),this.keyDown.emit(a.noteIndex,1),-1!=this.heldKey&&(this.setKeyIsDown(this.noteIndexToKey.h[this.heldKey],!1),this.keyUp.emit(this.heldKey)),this.heldKey=a.noteIndex)},
onKeyPointerDown:function(a){a=a.hit;this.pointerDown=!0;this.heldKey!=a.noteIndex&&(this.heldKey=a.noteIndex,this.setKeyIsDown(a,!0),this.keyDown.emit(a.noteIndex,1))},onKeyPointerUp:function(a){a=a.hit;this.pointerDown=!1;-1!=this.heldKey&&this.heldKey==a.noteIndex&&(this.heldKey=-1,this.pointerDown=!1,this.setKeyIsDown(a,!1),this.keyUp.emit(a.noteIndex))},getKeysData:function(a,b){null==b&&(b=2);null==a&&(a=2);this.ocataves=b;return this.getUIKeyNoteData(a,b)},setNoteState:function(a,b){this.setKeyIsDown(this.noteIndexToKey.h[a],
b)},setKeyIsDown:function(a,b){b?a.alpha.set__(0.7):a.alpha.animateTo(1,0.16)},getUIKeyNoteData:function(a,b){null==b&&(b=2);null==a&&(a=0);for(var c=this.keyboardNotes.noteFreq.noteNameToIndex("C"+a),d=[],g=0;g<b;){var f=g++;d.push({index:c+12*f,hasSharp:!0});d.push({index:c+2+12*f,hasSharp:!0});d.push({index:c+4+12*f,hasSharp:!1});d.push({index:c+5+12*f,hasSharp:!0});d.push({index:c+7+12*f,hasSharp:!0});d.push({index:c+9+12*f,hasSharp:!0});d.push({index:c+11+12*f,hasSharp:!1})}return d},__class__:Vb});
var Pb=function(a,b){this.currentDisplayOctave=1;t.call(this);this.textureAtlas=a;this.keyboardNotes=b};Pb.__name__=!0;Pb.__super__=t;Pb.prototype=n(t.prototype,{onAdded:function(){this.x.set__(-620);this.y.set__(-348);this.setupBackground();this.setupKeyboard();this.setupPanels()},setupBackground:function(){this.owner.addChild((new g).add(this.background=(new A(this.textureAtlas.get("BackPanelBack"))).disablePointer()));this.background.x.set__(-10)},setupKeyboard:function(){this.keyboard=new Vb(this.keyboardNotes,
this.textureAtlas);this.owner.addChild((new g).add(this.keyboardMask=new t).addChild((new g).add(this.keyboardContainer=new t).add(this.keyboard)));this.keyboardMask.x.set__(64);this.keyboardMask.y.set__(530);this.keyboardMask.scissor=new ya(0,0,1148,164);this.keyboardStartOctave(1,0)},keyboardStartOctave:function(a,b){null==b&&(b=0.25);var c=this.keyboard.minOctave,d=this.keyboard.maxOctave-4;this.currentDisplayOctave=$.max(a<d?a:d,c);this.keyboardContainer.x.animateTo(-this.keyboard.octaveSpace*
(this.currentDisplayOctave-c),b,H.quadOut)},setupPanels:function(){var a=(new A(this.textureAtlas.get("main-panel-bg"))).disablePointer();this.owner.addChild((new g).add(a));a.x.set__(-8);a.y.set__(-4);this.oscillators=new Dc(this.owner,this.textureAtlas);this.adsr=new Ec(this.owner,this.textureAtlas);this.filter=new Fc(this.owner,this.textureAtlas);this.distortion=new Gc(this.owner,this.textureAtlas);this.delay=new Hc(this.owner,this.textureAtlas);this.output=new Ic(this.owner,this.textureAtlas)},
__class__:Pb});var G=function(a,b,c){this.highAccuracy=0.001;this.normalAccuracy=0.01;this.returnToDefaultMin=1.0E-6;this.returnToDefaultSpeed=16;this.returningToDefault=this.returnToDefault=!1;this.moveConnection=null;this.lastTime=this.pX=this.pY=0;this.pointerHasMoved=!1;y.call(this);this.value=new Xb(a,b,c);this.labelFormatter=w(this,this.defaultLabelFormatter)};G.__name__=!0;G.__interfaces__=[Ua];G.roundValueForDisplay=function(a,b){1>b&&(b=1);8<b&&(b=8);var c=Math.pow(10,b),c=Math.round(a*c)/
c,d=""+c;1<b&&-1==d.indexOf(".")&&(d=""+c+".0");return d};G.__super__=y;G.prototype=n(y.prototype,{get_name:function(){return"NumericControl_2"},onAdded:function(){this.owner._compMap.Sprite_0.get_pointerDown().connect(w(this,this.pointerDown));this.value.addObserver(this,!0)},onUpdate:function(a){if(this.returningToDefault){var b=this.value.getValue(!0),c=this.value.normalisedDefaultValue-b;if((0>c?-c:c)<this.returnToDefaultMin)c=0;0!=c?this.value.setValue(b+c*a*this.returnToDefaultSpeed,!0):(this.returningToDefault=
!1,this.value.setToDefault())}},onRemoved:function(){this.value.removeObserver(this)},pointerDown:function(a){this.pointerHasMoved=this.returningToDefault=!1;this.pX=a.viewX;this.pY=a.viewY;null!=this.moveConnection&&this.moveConnection.dispose();this.moveConnection=k._platform.getPointer().move.connect(w(this,this.pointerMove));k._platform.getPointer().up.connect(w(this,this.pointerUp)).once()},pointerMove:function(a){if(a.viewX!=this.pX||a.viewY!=this.pY){var b=this.pX-a.viewX,c=this.pY-a.viewY;
this.pX=a.viewX;this.pY=a.viewY;this.pointerHasMoved=!0;this.lastTime=0;b=(a=k._platform.getKeyboard().isDown(d.Control))?b*this.highAccuracy:b*this.normalAccuracy;c=a?c*this.highAccuracy:c*this.normalAccuracy;this.dragDelta(b,c)}},dragDelta:function(a,b){var c=this.value.getValue(!0)+b;this.value.setValue(1<c?1:0>c?0:c,!0)},doubleClicked:function(){this.value.setValue(this.value.defaultValue)},pointerUp:function(){null!=this.moveConnection&&(this.moveConnection.dispose(),this.moveConnection=null);
if(this.pointerHasMoved)this.returnToDefault&&(this.returningToDefault=!0);else{var a=k._platform.getTime();0.5>a-this.lastTime&&this.doubleClicked();this.lastTime=a}},defaultLabelFormatter:function(a){return G.roundValueForDisplay(a,3)},onParameterChange:function(a){a==this.value&&this.updateDisplay()},updateDisplay:function(){},__class__:G});var Ea=function(a,b,c){this.lastPosition=-1;G.call(this,a,b,c)};Ea.__name__=!0;Ea.create=function(a){null==a&&(a="Slider");var b=V.instance.textureAtlas,c=
new g;c.add(new A(null!=I.OscSliderTrack?b.getReserved("OscSliderTrack"):b.h.OscSliderTrack)).addChild((new g).add(new A(null!=I["slider-thumb_50%"]?b.getReserved("slider-thumb_50%"):b.h["slider-thumb_50%"]))).addChild((new g).add((new A(null!=I["knob-hash_25%"]?b.getReserved("knob-hash_25%"):b.h["knob-hash_25%"])).disablePointer())).addChild((new g).add((new A(null!=I.Icon_Sine?b.getReserved("Icon_Sine"):b.h.Icon_Sine)).disablePointer())).addChild((new g).add((new A(null!=I.Icon_Square?b.getReserved("Icon_Square"):
b.h.Icon_Square)).disablePointer())).addChild((new g).add((new A(null!=I.Icon_Sawtooth?b.getReserved("Icon_Sawtooth"):b.h.Icon_Sawtooth)).disablePointer())).addChild((new g).add((new A(null!=I.Icon_Triangle?b.getReserved("Icon_Triangle"):b.h.Icon_Triangle)).disablePointer()));c.add(new Ea(a,0,x.getMapping(r.INT,J.SINE,J.TRIANGLE)));return c};Ea.__super__=G;Ea.prototype=n(G.prototype,{onAdded:function(){this.display=this.owner._compMap.Sprite_0;var a=this.owner.firstChild;this.thumb=a._compMap.Sprite_0.centerAnchor();
this.thumb.set_pointerEnabled(!0);this.thumb.y.set__(6);a=a.next;this.knobHash=a._compMap.Sprite_0.centerAnchor();this.knobHash.y.set__(3);this.knobHash.alpha.set__(0);var b=-17,a=a.next;this.sine=a._compMap.Sprite_0;this.sine.x.set__(b);this.sine.y.set__(-32);this.sine.alpha.set__(0.5);b+=37;a=a.next;this.square=a._compMap.Sprite_0;this.square.x.set__(b);this.square.y.set__(-34);this.square.alpha.set__(0.5);b+=37;a=a.next;this.sawtooth=a._compMap.Sprite_0;this.sawtooth.x.set__(b+1);this.sawtooth.y.set__(-32);
this.sawtooth.alpha.set__(0.5);a=a.next;this.triangle=a._compMap.Sprite_0;this.triangle.x.set__(b+37+1);this.triangle.y.set__(-33);this.triangle.alpha.set__(0.5);this.minX=0;this.maxX=this.display.getNaturalWidth();this.thumb.get_pointerDown().connect(w(this,this.pointerDown));G.prototype.onAdded.call(this)},pointerDown:function(a){this.knobHash.alpha.animateTo(1,0.5,H.quadOut);G.prototype.pointerDown.call(this,a)},pointerUp:function(a){this.knobHash.alpha.animateTo(0,0.5,H.quadOut);G.prototype.pointerUp.call(this,
a)},pointerMove:function(a){if(a.viewX!=this.pX||a.viewY!=this.pY){var b=this.pX-a.viewX,c=this.pY-a.viewY;this.pX=a.viewX;this.pY=a.viewY;this.pointerHasMoved=!0;this.lastTime=0;this.dragDelta(b,c)}},dragDelta:function(a){a=this.value.getValue(!0)-a/this.display.getNaturalWidth();this.value.setValue(1<a?1:0>a?0:a,!0)},updateDisplay:function(){this.setPosition(Math.round(this.value.getValue()))},getIcon:function(a){switch(a){case 0:return this.sine;case 1:return this.square;case 2:return this.sawtooth;
case 3:return this.triangle;default:return null}},setPosition:function(a){-1!=this.lastPosition&&this.getIcon(this.lastPosition).alpha.animateTo(0.5,0.5,H.quartOut);this.getIcon(a).alpha.animateTo(1,0.25,H.quadOut);var b=a/3*this.display.getNaturalWidth();this.thumb.x.animateTo(b,0.1,H.quadOut);this.knobHash.x.animateTo(b,0.1,H.quadOut);this.lastPosition=a},__class__:Ea});var Sa=function(a,b,c){G.call(this,a,b,c);this.normalAccuracy=1;this.highAccuracy=0.5;this.minY=20};Sa.__name__=!0;Sa.create=function(a){null==
a&&(a="Slider");var b=V.instance.textureAtlas,c=new g;c.add(new A(null!=I.PitchBendBg?b.getReserved("PitchBendBg"):b.h.PitchBendBg)).addChild((new g).add(new A(null!=I.PitchBendDrag?b.getReserved("PitchBendDrag"):b.h.PitchBendDrag)));c.add(new Sa(a,0,x.getMapping(r.FLOAT,-1,1)));return c};Sa.__super__=G;Sa.prototype=n(G.prototype,{onAdded:function(){this.thumbRange=this.owner._compMap.Sprite_0.getNaturalHeight()-this.minY-this.minY;this.thumb=this.owner.firstChild._compMap.Sprite_0;this.thumb.x.set__(6);
this.thumb.anchorY.set__(this.thumb.getNaturalHeight()/2);G.prototype.onAdded.call(this)},dragDelta:function(a,b){var c=this.value.getValue(!0)-b/this.thumbRange;this.value.setValue(1<c?1:0>c?0:c,!0)},updateDisplay:function(){this.setPosition(this.value.getValue(!0))},setPosition:function(a){a=this.minY+a*this.thumbRange;this.thumb.x.set__(5);this.thumb.y.animateTo(a,0.1,H.quadOut)},__class__:Sa});var v=function(a,b,c,d,g,f){this.labelUpdated=!1;G.call(this,a,b,c);this.minAngle=d;this.maxAngle=g;
this.radius=f};v.__name__=!0;v.create=function(a,b,c,d,l,f,h){null==h&&(h="Rotary");null==f&&(f=!0);null==l&&(l=!1);null==d&&(d=2.5132741228718345);null==c&&(c=-2.5132741228718345);var k=V.instance.textureAtlas,i=new g;i.add(new A(k.get("knob_"+(l?"25":"50")+"%"))).addChild((new g).add(new A(null!=I["knob-nipple_50%"]?k.getReserved("knob-nipple_50%"):k.h["knob-nipple_50%"]))).addChild((new g).add(new A(null!=I["knob-hash_50%"]?k.getReserved("knob-hash_50%"):k.h["knob-hash_50%"])));f&&i.addChild((new g).add(j.getField(j.Prime13,
"0.00",2171187).setAlpha(0.75)));i.add(new v(h,b,a,c,d,l?5.25:12));return i};v.__super__=G;v.prototype=n(G.prototype,{onAdded:function(){this.display=this.owner._compMap.Sprite_0.centerAnchor();this.centreX=this.display.anchorX._value;this.centreY=this.display.anchorY._value;var a=this.owner.firstChild;this.knobDot=a._compMap.Sprite_0.centerAnchor().disablePixelSnapping().disablePointer();a=a.next;this.knobHash=a._compMap.Sprite_0;this.knobHash.x.set__(6);this.knobHash.y.set__(6);this.knobHash.alpha.set__(0);
a=a.next;this.valueLabel=D.instance(a._compMap.Sprite_0,Oa);C.__instanceof(this.valueLabel,Oa)?(this.valueLabel.centerAnchor(),this.valueLabel.y.set__(this.centreY+this.display.getNaturalHeight()/2+7)):this.valueLabel=null;G.prototype.onAdded.call(this)},pointerDown:function(a){this.knobHash.alpha.animateTo(0.8,0.5,H.quadOut);G.prototype.pointerDown.call(this,a)},pointerUp:function(a){this.knobHash.alpha.animateTo(0,0.5,H.quadOut);G.prototype.pointerUp.call(this,a)},doubleClicked:function(){this.knobHash.alpha.set__(1);
this.knobHash.alpha.animateTo(0,1,H.quartOut);G.prototype.doubleClicked.call(this)},updateDisplay:function(){this.setKnobPosition();null!=this.valueLabel&&(this.valueLabel.set_text(this.labelFormatter(this.value.getValue())),this.valueLabel.centerAnchor(),this.valueLabel.x.set__(this.centreX),this.valueLabel.alpha.set__(0.7),this.labelUpdated=!0);this.lastUpdate=k._platform.getTime()},onUpdate:function(a){G.prototype.onUpdate.call(this,a);this.labelUpdated&&2.5<k._platform.getTime()-this.lastUpdate&&
(this.labelUpdated=!1,this.valueLabel.alpha.animateTo(0.2,2,H.quadOut))},setKnobPosition:function(){var a=this.value.getValue(!0),b=Math.abs(this.maxAngle-this.minAngle),b=this.minAngle+a*b,a=this.centreX+Math.cos(b-1.5707963267948966)*this.radius,b=this.centreY+Math.sin(b-1.5707963267948966)*this.radius;this.knobDot.setXY(a,b)},__class__:v});var Ec=function(a,b){this.init(a,b);this.position(651,96)};Ec.__name__=!0;Ec.prototype={init:function(a,b){this.owner=a;this._attack=v.create(x.getMapping(r.FLOAT,
0,10),0.1,null,null,null,null,"adsrAttack");this._decay=v.create(x.getMapping(r.FLOAT,0,10),1,null,null,null,null,"adsrDecay");this._sustain=v.create(x.getMapping(r.FLOAT,0,1),1,null,null,null,null,"adsrSustain");this._release=v.create(x.getMapping(r.FLOAT,0,10),0.25,null,null,null,null,"adsrRelease");this._panel=ca.fromSubTexture(b.get("InnerPanelBg"),8,8,280,192);this._diagram=new A(b.get("ADSRDiagram"));a.addChild((new g).add(this._panel).addChild(this._attack).addChild(this._decay).addChild(this._sustain).addChild(this._release).addChild((new g).add(this._diagram)));
this.attack=this._attack._compMap.NumericControl_2;this.decay=this._decay._compMap.NumericControl_2;this.sustain=this._sustain._compMap.NumericControl_2;this.release=this._release._compMap.NumericControl_2},position:function(a,b){var c=b+12,d;d=j.getField(j.Prime20,"AEG",3289650).setAlpha(0.55);this.owner.addChild((new g).add(d));d.x.set__(a+12);d.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._diagram.x.set__(a);this._diagram.y.set__(b-84);this._attack._compMap.Sprite_0.x.set__(a);
this._attack._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"attack",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);this._decay._compMap.Sprite_0.x.set__(a+=64);this._decay._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"decay",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);this._sustain._compMap.Sprite_0.x.set__(a+=64);this._sustain._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,
"sustain",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);this._release._compMap.Sprite_0.x.set__(a+=64);this._release._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"release",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c)},__class__:Ec};var Hc=function(a,b){this.owner=a;this.init(a,b);this.position(420,296)};Hc.__name__=!0;Hc.prototype={init:function(a,b){this._level=v.create(x.getMapping(r.FLOAT,
0,1),0.25,null,null,null,null,"delayLevel");this._time=v.create(x.getMapping(r.FLOAT,1.0E-4,1),0.333,null,null,null,null,"delayTime");this._feedback=v.create(x.getMapping(r.FLOAT,0,0.9999),0.25,null,null,null,null,"delayFeedback");this._lfpFreq=v.create(x.getMapping(r.FLOAT,20,8E3),8E3,null,null,null,null,"delayLFPFreq");this._lfpQ=v.create(x.getMapping(r.FLOAT,1.0E-4,10),1,null,null,null,null,"delayLFPQ");this._panel=ca.fromSubTexture(b.get("InnerPanelBg"),8,8,360,192);a.addChild((new g).add(this._panel).addChild(this._level).addChild(this._time).addChild(this._feedback).addChild(this._lfpFreq).addChild(this._lfpQ));
this.level=this._level._compMap.NumericControl_2;this.time=this._time._compMap.NumericControl_2;this.feedback=this._feedback._compMap.NumericControl_2;this.lfpFreq=this._lfpFreq._compMap.NumericControl_2;this.lfpQ=this._lfpQ._compMap.NumericControl_2},position:function(a,b){var c=b+12,d;d=j.getField(j.Prime20,"Delay",3289650).setAlpha(0.55);this.owner.addChild((new g).add(d));d.x.set__(a+12);d.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._level._compMap.Sprite_0.x.set__(a);
this._level._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._time._compMap.Sprite_0.x.set__(a);this._time._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"time",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._feedback._compMap.Sprite_0.x.set__(a);this._feedback._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,
"feedback",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=80;this._lfpFreq._compMap.Sprite_0.x.set__(a);this._lfpFreq._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"freq",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._lfpQ._compMap.Sprite_0.x.set__(a);this._lfpQ._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"q",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));
d.x.set__(a);d.y.set__(c)},__class__:Hc};var Gc=function(a,b){this.owner=a;this.init(a,b);this.position(937,96)};Gc.__name__=!0;Gc.prototype={init:function(a,b){this._pregain=v.create(x.getMapping(r.FLOAT,0,12),0,null,null,null,null,"distortionPregain");this._waveshaperAmount=v.create(x.getMapping(r.FLOAT,-0.999,0.999),0,null,null,null,null,"distortionWaveshaperAmount");this._bits=v.create(x.getMapping(r.FLOAT,1,24),12,null,null,null,null,"distortionBits");this._rateReduction=v.create(x.getMapping(r.FLOAT,
1,16),1,null,null,null,null,"distortionRateReduction");this._panel=ca.fromSubTexture(b.get("InnerPanelBg"),8,8,272,192);a.addChild((new g).add(this._panel).addChild(this._pregain).addChild(this._waveshaperAmount).addChild(this._bits).addChild(this._rateReduction));this.pregain=this._pregain._compMap.NumericControl_2;this.waveshaperAmount=this._waveshaperAmount._compMap.NumericControl_2;this.bits=this._bits._compMap.NumericControl_2;this.rateReduction=this._rateReduction._compMap.NumericControl_2},
position:function(a,b){var c=b+12,d;d=j.getField(j.Prime20,"Distortion",3289650).setAlpha(0.55);this.owner.addChild((new g).add(d));d.x.set__(a+12);d.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._pregain._compMap.Sprite_0.x.set__(a);this._pregain._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"gain",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._waveshaperAmount._compMap.Sprite_0.x.set__(a);this._waveshaperAmount._compMap.Sprite_0.y.set__(b);
d=j.getField(j.Prime20,"shape",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._bits._compMap.Sprite_0.x.set__(a);this._bits._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"crush",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._rateReduction._compMap.Sprite_0.x.set__(a);this._rateReduction._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"reduce",3289650).setAlpha(0.55).centerAnchor();
this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c)},__class__:Gc};var Fc=function(a,b){this.owner=a;this.init(a,b);this.position(791,296)};Fc.__name__=!0;Fc.prototype={position:function(a,b){var c=b+12,d;d=j.getField(j.Prime20,"Filter",3289650).setAlpha(0.55);this.owner.addChild((new g).add(d));d.x.set__(a+12);d.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._type._compMap.Sprite_0.x.set__(a);this._type._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,
"lp/hp",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._frequency._compMap.Sprite_0.x.set__(a);this._frequency._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"freq",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._Q._compMap.Sprite_0.x.set__(a);this._Q._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"q",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));
d.x.set__(a);d.y.set__(c);a=a+16+64;this._attack._compMap.Sprite_0.x.set__(a);this._attack._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"attack",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._release._compMap.Sprite_0.x.set__(a);this._release._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"release",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c);a+=64;this._range._compMap.Sprite_0.x.set__(a);
this._range._compMap.Sprite_0.y.set__(b);d=j.getField(j.Prime20,"range",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(d));d.x.set__(a);d.y.set__(c)},init:function(a,b){this._type=v.create(x.getMapping(r.INT,0,1),0,null,null,null,null,"filterType");this._frequency=v.create(x.getMapping(r.FLOAT,20,8E3),8E3,null,null,null,null,"filterFrequency");this._Q=v.create(x.getMapping(r.FLOAT,1.0E-4,10),1,null,null,null,null,"filterQ");this._attack=v.create(x.getMapping(r.FLOAT,0,10),
0.25,null,null,null,null,"filterAttack");this._release=v.create(x.getMapping(r.FLOAT,0,10),0.5,null,null,null,null,"filterRelease");this._range=v.create(x.getMapping(r.FLOAT,0,1),0,null,null,null,null,"filterRange");this._panel=ca.fromSubTexture(b.get("InnerPanelBg"),8,8,424,192);a.addChild((new g).add(this._panel).addChild(this._type).addChild(this._frequency).addChild(this._Q).addChild(this._attack).addChild(this._release).addChild(this._range));this.type=this._type._compMap.NumericControl_2;this.frequency=
this._frequency._compMap.NumericControl_2;this.Q=this._Q._compMap.NumericControl_2;this.attack=this._attack._compMap.NumericControl_2;this.release=this._release._compMap.NumericControl_2;this.range=this._range._compMap.NumericControl_2},__class__:Fc};var Dc=function(a,b){this.owner=a;this.init(a,b);this.position(24,96)};Dc.__name__=!0;Dc.prototype={position:function(a,b){var c;c=j.getField(j.Prime20,"waveform",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a+
94);c.y.set__(190);this._oscPanel.set_x(a);this._oscPanel.set_y(b);b+=42;this._osc0Type._compMap.Sprite_0.x.set__(a+38);this._osc0Type._compMap.Sprite_0.y.set__(b+12);a+=210;this._osc0Level._compMap.Sprite_0.x.set__(a);this._osc0Level._compMap.Sprite_0.y.set__(b);c=j.getField(j.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a);c.y.set__(192);this._osc0Pan._compMap.Sprite_0.x.set__(a+=64);this._osc0Pan._compMap.Sprite_0.y.set__(b);c=j.getField(j.Prime20,
"pan",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a);c.y.set__(192);this._osc0Slide._compMap.Sprite_0.x.set__(a+=80);this._osc0Slide._compMap.Sprite_0.y.set__(b);c=j.getField(j.Prime20,"slide",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a);c.y.set__(192);this._osc0Detune._compMap.Sprite_0.x.set__(a+=64);this._osc0Detune._compMap.Sprite_0.y.set__(b);c=j.getField(j.Prime20,"detune",3289650).setAlpha(0.55).centerAnchor();
this.owner.addChild((new g).add(c));c.x.set__(a);c.y.set__(192);this._osc0Random._compMap.Sprite_0.x.set__(a+=64);this._osc0Random._compMap.Sprite_0.y.set__(b);c=j.getField(j.Prime20,"random",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a);c.y.set__(192);this._oscPhase._compMap.Sprite_0.x.set__(a+=80);this._oscPhase._compMap.Sprite_0.y.set__(b+54);c=j.getField(j.Prime20,"phase",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new g).add(c));c.x.set__(a);
c.y.set__(246);a=24;b+=96;this._osc1Type._compMap.Sprite_0.x.set__(a+38);this._osc1Type._compMap.Sprite_0.y.set__(b+12);a+=210;this._osc1Level._compMap.Sprite_0.x.set__(a);this._osc1Level._compMap.Sprite_0.y.set__(b);this._osc1Pan._compMap.Sprite_0.x.set__(a+=64);this._osc1Pan._compMap.Sprite_0.y.set__(b);this._osc1Slide._compMap.Sprite_0.x.set__(a+=80);this._osc1Slide._compMap.Sprite_0.y.set__(b);this._osc1Detune._compMap.Sprite_0.x.set__(a+=64);this._osc1Detune._compMap.Sprite_0.y.set__(b);this._osc1Random._compMap.Sprite_0.x.set__(a+
64);this._osc1Random._compMap.Sprite_0.y.set__(b)},init:function(a,b){this._osc0Type=Ea.create("osc0Type");this._osc0Level=v.create(x.getMapping(r.FLOAT,0,1),0.5,null,null,null,null,"osc0Level");this._osc0Pan=v.create(x.getMapping(r.FLOAT,-1,1),0,null,null,null,null,"osc0Pan");this._osc0Slide=v.create(x.getMapping(r.FLOAT,0.001,1),0.1,null,null,null,null,"osc0Slide");this._osc0Detune=v.create(x.getMapping(r.FLOAT,-200,200),0,null,null,null,null,"osc0Detune");this._osc0Random=v.create(x.getMapping(r.FLOAT,
0,100),0,null,null,null,null,"osc0Random");this._osc1Type=Ea.create("osc1Type");this._osc1Level=v.create(x.getMapping(r.FLOAT,0,1),0.5,null,null,null,null,"osc1Level");this._osc1Pan=v.create(x.getMapping(r.FLOAT,-1,1),0,null,null,null,null,"osc1Pan");this._osc1Slide=v.create(x.getMapping(r.FLOAT,0.001,1),0.1,null,null,null,null,"osc1Slide");this._osc1Detune=v.create(x.getMapping(r.FLOAT,-200,200),0,null,null,null,null,"osc1Detune");this._osc1Random=v.create(x.getMapping(r.FLOAT,0,100),0,null,null,
null,null,"osc1Random");this._oscPhase=v.create(x.getMapping(r.FLOAT,0,1),0,null,null,null,null,"oscPhase");this._oscPanel=ca.fromSubTexture(b.get("InnerPanelBg"),8,8,616,192);a.addChild((new g).add(this._oscPanel).addChild(this._osc0Type).addChild(this._osc0Level).addChild(this._osc0Pan).addChild(this._osc0Slide).addChild(this._osc0Detune).addChild(this._osc0Random).addChild(this._osc1Type).addChild(this._osc1Level).addChild(this._osc1Pan).addChild(this._osc1Slide).addChild(this._osc1Detune).addChild(this._osc1Random).addChild(this._oscPhase));
this.osc0Type=this._osc0Type._compMap.NumericControl_2;this.osc0Level=this._osc0Level._compMap.NumericControl_2;this.osc0Pan=this._osc0Pan._compMap.NumericControl_2;this.osc0Slide=this._osc0Slide._compMap.NumericControl_2;this.osc0Detune=this._osc0Detune._compMap.NumericControl_2;this.osc0Random=this._osc0Random._compMap.NumericControl_2;this.osc1Type=this._osc1Type._compMap.NumericControl_2;this.osc1Level=this._osc1Level._compMap.NumericControl_2;this.osc1Pan=this._osc1Pan._compMap.NumericControl_2;
this.osc1Slide=this._osc1Slide._compMap.NumericControl_2;this.osc1Detune=this._osc1Detune._compMap.NumericControl_2;this.osc1Random=this._osc1Random._compMap.NumericControl_2;this.oscPhase=this._oscPhase._compMap.NumericControl_2},__class__:Dc};var Ic=function(a,b){this._outputLevel=v.create(x.getMapping(r.FLOAT,0,1),1,null,null,null,null,"outputLevel");this._pitchBend=Sa.create("pitchBend");a.addChild((this._panel=(new g).add(ca.fromSubTexture(null!=I.InnerPanelBg?b.getReserved("InnerPanelBg"):b.h.InnerPanelBg,
16,16,386,192))).addChild(this._outputLevel).addChild(this._pitchBend));this.outputLevel=this._outputLevel._compMap.NumericControl_2;this.pitchBend=this._pitchBend._compMap.NumericControl_2;var c=23,d=296;this._panel._compMap.NineSlice_5.set_x(c);this._panel._compMap.NineSlice_5.set_y(d);var k=d+12,f;f=j.getField(j.Prime20,"Output",3289650).setAlpha(0.55);a.addChild((new g).add(f));f.x.set__(c+12);f.y.set__(k);c+=43;d+=116;k=d+54;this._outputLevel._compMap.Sprite_0.x.set__(c);this._outputLevel._compMap.Sprite_0.y.set__(d);
f=j.getField(j.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();a.addChild((new g).add(f));f.x.set__(c);f.y.set__(k);this._pitchBend._compMap.Sprite_0.x.set__(17);this._pitchBend._compMap.Sprite_0.y.set__(549)};Ic.__name__=!0;Ic.prototype={__class__:Ic};var xc=function(a){this.octaveShift=0;this.heldNotes=[];this.noteOn=new wa;this.noteOff=new B;this.keyToNote=a.keycodeToNoteIndex};xc.__name__=!0;xc.prototype={onQwertyKeyDown:function(a){if(this.keyToNote.h.hasOwnProperty(a))this.onNoteKeyDown(this.shiftedNote(this.keyToNote.h[a]))},
onQwertyKeyUp:function(a){if(0<this.heldNotes.length&&this.keyToNote.h.hasOwnProperty(a))this.onNoteKeyUp(this.shiftedNote(this.keyToNote.h[a]))},onNoteKeyDown:function(a,b){null==b&&(b=1);-1==ua.indexOf(this.heldNotes,a)&&(this.heldNotes.push(a),this.noteOn.emit(a,b))},onNoteKeyUp:function(a){a=ua.indexOf(this.heldNotes,a);-1!=a&&this.noteOff.emit(this.heldNotes.splice(a,1)[0])},allNotesOff:function(){for(;0<this.heldNotes.length;)this.noteOff.emit(this.heldNotes.pop())},shiftedNote:function(a){return a+
12*this.octaveShift},get_lastNote:function(){return 0<this.heldNotes.length?this.heldNotes[this.heldNotes.length-1]:-1},__class__:xc,__properties__:{get_lastNote:"get_lastNote"}};var wc=function(a){null==a&&(a=0);this.startOctave=a;this.noteFreq=new la;this.keycodeToNoteFreq=new T;this.keycodeToNoteIndex=new T;this.keycodeToNoteIndex.h[90]=this.noteFreq.noteNameToIndex("C"+a);this.keycodeToNoteIndex.h[83]=this.noteFreq.noteNameToIndex("C#"+a);this.keycodeToNoteIndex.h[88]=this.noteFreq.noteNameToIndex("D"+
a);this.keycodeToNoteIndex.h[68]=this.noteFreq.noteNameToIndex("D#"+a);this.keycodeToNoteIndex.h[67]=this.noteFreq.noteNameToIndex("E"+a);this.keycodeToNoteIndex.h[86]=this.noteFreq.noteNameToIndex("F"+a);this.keycodeToNoteIndex.h[71]=this.noteFreq.noteNameToIndex("F#"+a);this.keycodeToNoteIndex.h[66]=this.noteFreq.noteNameToIndex("G"+a);this.keycodeToNoteIndex.h[72]=this.noteFreq.noteNameToIndex("G#"+a);this.keycodeToNoteIndex.h[78]=this.noteFreq.noteNameToIndex("A"+a);this.keycodeToNoteIndex.h[74]=
this.noteFreq.noteNameToIndex("A#"+a);this.keycodeToNoteIndex.h[77]=this.noteFreq.noteNameToIndex("B"+a);this.keycodeToNoteIndex.h[81]=this.noteFreq.noteNameToIndex("C"+(a+1));this.keycodeToNoteIndex.h[50]=this.noteFreq.noteNameToIndex("C#"+(a+1));this.keycodeToNoteIndex.h[87]=this.noteFreq.noteNameToIndex("D"+(a+1));this.keycodeToNoteIndex.h[51]=this.noteFreq.noteNameToIndex("D#"+(a+1));this.keycodeToNoteIndex.h[69]=this.noteFreq.noteNameToIndex("E"+(a+1));this.keycodeToNoteIndex.h[82]=this.noteFreq.noteNameToIndex("F"+
(a+1));this.keycodeToNoteIndex.h[53]=this.noteFreq.noteNameToIndex("F#"+(a+1));this.keycodeToNoteIndex.h[84]=this.noteFreq.noteNameToIndex("G"+(a+1));this.keycodeToNoteIndex.h[54]=this.noteFreq.noteNameToIndex("G#"+(a+1));this.keycodeToNoteIndex.h[89]=this.noteFreq.noteNameToIndex("A"+(a+1));this.keycodeToNoteIndex.h[55]=this.noteFreq.noteNameToIndex("A#"+(a+1));this.keycodeToNoteIndex.h[85]=this.noteFreq.noteNameToIndex("B"+(a+1));this.keycodeToNoteIndex.h[73]=this.noteFreq.noteNameToIndex("C"+(a+
2));this.keycodeToNoteIndex.h[57]=this.noteFreq.noteNameToIndex("C#"+(a+2));this.keycodeToNoteIndex.h[79]=this.noteFreq.noteNameToIndex("D"+(a+2));this.keycodeToNoteIndex.h[48]=this.noteFreq.noteNameToIndex("D#"+(a+2));this.keycodeToNoteIndex.h[80]=this.noteFreq.noteNameToIndex("E"+(a+2));this.keycodeToNoteIndex.h[219]=this.noteFreq.noteNameToIndex("F"+(a+2));this.keycodeToNoteIndex.h[187]=this.noteFreq.noteNameToIndex("F#"+(a+2));this.keycodeToNoteIndex.h[221]=this.noteFreq.noteNameToIndex("G"+(a+
2));this.keycodeToNoteFreq.h[90]=this.keycodeToNoteIndex.h[90];this.keycodeToNoteFreq.h[83]=this.keycodeToNoteIndex.h[83];this.keycodeToNoteFreq.h[88]=this.keycodeToNoteIndex.h[88];this.keycodeToNoteFreq.h[68]=this.keycodeToNoteIndex.h[68];this.keycodeToNoteFreq.h[67]=this.keycodeToNoteIndex.h[67];this.keycodeToNoteFreq.h[86]=this.keycodeToNoteIndex.h[86];this.keycodeToNoteFreq.h[71]=this.keycodeToNoteIndex.h[71];this.keycodeToNoteFreq.h[66]=this.keycodeToNoteIndex.h[66];this.keycodeToNoteFreq.h[72]=
this.keycodeToNoteIndex.h[72];this.keycodeToNoteFreq.h[78]=this.keycodeToNoteIndex.h[78];this.keycodeToNoteFreq.h[74]=this.keycodeToNoteIndex.h[74];this.keycodeToNoteFreq.h[77]=this.keycodeToNoteIndex.h[77];this.keycodeToNoteFreq.h[81]=this.keycodeToNoteIndex.h[81];this.keycodeToNoteFreq.h[50]=this.keycodeToNoteIndex.h[50];this.keycodeToNoteFreq.h[87]=this.keycodeToNoteIndex.h[87];this.keycodeToNoteFreq.h[51]=this.keycodeToNoteIndex.h[51];this.keycodeToNoteFreq.h[69]=this.keycodeToNoteIndex.h[69];
this.keycodeToNoteFreq.h[82]=this.keycodeToNoteIndex.h[82];this.keycodeToNoteFreq.h[53]=this.keycodeToNoteIndex.h[53];this.keycodeToNoteFreq.h[84]=this.keycodeToNoteIndex.h[84];this.keycodeToNoteFreq.h[54]=this.keycodeToNoteIndex.h[54];this.keycodeToNoteFreq.h[89]=this.keycodeToNoteIndex.h[89];this.keycodeToNoteFreq.h[55]=this.keycodeToNoteIndex.h[55];this.keycodeToNoteFreq.h[85]=this.keycodeToNoteIndex.h[85];this.keycodeToNoteFreq.h[73]=this.keycodeToNoteIndex.h[73];this.keycodeToNoteFreq.h[57]=
this.keycodeToNoteIndex.h[57];this.keycodeToNoteFreq.h[79]=this.keycodeToNoteIndex.h[79];this.keycodeToNoteFreq.h[48]=this.keycodeToNoteIndex.h[48];this.keycodeToNoteFreq.h[80]=this.keycodeToNoteIndex.h[80];this.keycodeToNoteFreq.h[219]=this.keycodeToNoteIndex.h[219];this.keycodeToNoteFreq.h[187]=this.keycodeToNoteIndex.h[187];this.keycodeToNoteFreq.h[221]=this.keycodeToNoteIndex.h[221]};wc.__name__=!0;wc.prototype={__class__:wc};var la=function(){null==la.pitchNames&&(la.pitchNames="C,C#,D,D#,E,F,F#,G,G#,A,A#,B".split(","),
la.altPitchNames=[null,"Db",null,"Eb",null,null,"Gb",null,"Ab",null,"Bb",null]);this.noteFrequencies=new Float32Array(128);this.noteNames=[];this._octaveMiddleC=3;this.set_tuningBase(440)};la.__name__=!0;la.prototype={reset:function(){for(var a=0;128>a;){var b=a++;this.noteNames[b]=this.indexToName(b);this.noteFrequencies[b]=this.get_tuningBase()*Math.pow(2,0.08333333333333333*(b-69))}},detuneFreq:function(a,b){return 0>b?a/Math.pow(2,8.333333333333334E-4*-b):0<b?a*Math.pow(2,8.333333333333334E-4*
b):a},noteNameToIndex:function(a){var b=a.indexOf("/");-1!=b&&(a=a.substring(0,b));for(var c=this.noteNames.length;-1<--c;)if(b=this.noteNames[c],-1<b.indexOf(a))return c;return-1},indexToName:function(a){var b=a%12,a=(0.08333333333333333*a|0)-(5-this.get_octaveMiddleC()),c=la.pitchNames[b]+a;null!=la.altPitchNames[b]&&(c+="/"+la.altPitchNames[b]+a);return c},get_tuningBase:function(){return this._tuningBase},set_tuningBase:function(a){this._tuningBase=a;this.invTuningBase=1/(0.5*this._tuningBase);
this.reset();return this._tuningBase},get_octaveMiddleC:function(){return this._octaveMiddleC},__class__:la,__properties__:{get_octaveMiddleC:"get_octaveMiddleC",set_tuningBase:"set_tuningBase",get_tuningBase:"get_tuningBase"}};var ta,Uc=0;String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var Vc={__name__:["Int"]},Wc={__name__:["Dynamic"]},Qc=Number;Qc.__name__=["Float"];var Rc=Boolean;Rc.__ename__=["Bool"];var Xc={__name__:["Class"]},
Yc={},I={},Oc=Jc.ArrayBuffer||ga;null==Oc.prototype.slice&&(Oc.prototype.slice=ga.sliceImpl);var Sc=Jc.Uint8Array||sa._new,N=O.getProperty(window,"OscillatorNode");null!=N&&(window.OscillatorTypeShim=Object.prototype.hasOwnProperty.call(N,"SINE")?{SINE:N.SINE,SQUARE:N.SQUARE,TRIANGLE:N.TRIANGLE,SAWTOOTH:N.SAWTOOTH,CUSTOM:N.CUSTOM}:{SINE:"sine",SQUARE:"square",TRIANGLE:"triangle",SAWTOOTH:"sawtooth",CUSTOM:"custom"});N=O.getProperty(window,"BiquadFilterNode");null!=N&&(window.FilterTypeShim=Object.prototype.hasOwnProperty.call(N,
"LOWPASS")?{ALLPASS:N.ALLPASS,BANDPASS:N.BANDPASS,HIGHPASS:N.HIGHPASS,HIGHSHELF:N.HIGHSHELF,LOWPASS:N.LOWPASS,LOWSHELF:N.LOWSHELF,NOTCH:N.NOTCH,PEAKING:N.PEAKING}:{ALLPASS:"allpass",BANDPASS:"bandpass",HIGHPASS:"highpass",HIGHSHELF:"highshelf",LOWPASS:"lowpass",LOWSHELF:"lowshelf",NOTCH:"notch",PEAKING:"peaking"});l.Element=0;l.PCData=1;l.CData=2;l.Comment=3;l.DocType=4;l.ProcessingInstruction=5;l.Document=6;Ha.instance=new Ha;K.DISPATCHING_SENTINEL=new La(null,null);k.root=new g;k.uncaughtError=
new B;k.hidden=new R(!1);k.volume=new F(1);k._platform=Ha.instance;k._calledInit=!1;Z.__meta__={obj:{assets:[{fonts:[{bytes:36282,md5:"34cd8532d78f713650634ef478dfd623",name:"Prime14.fnt"},{bytes:7477,md5:"101b85c844af23dac3653398517c3a64",name:"Prime14_0.png"},{bytes:25928,md5:"27b874da0b91f13b8aea700e2c4941e8",name:"Prime22.fnt"},{bytes:10598,md5:"ec88e4cbb5ddfdba128f65bf42d37085",name:"Prime22_0.png"},{bytes:4532,md5:"2a3c2f4c6a650850bb7a0ca33b3b107e",name:"Prime22_1.png"},{bytes:38204,md5:"6c304c676ff5a04e8ce7711797ff72bc",
name:"Prime24.fnt"},{bytes:7852,md5:"1a1deb3df17a98df5b6fe86a5a6bdc1d",name:"Prime24_0.png"},{bytes:7390,md5:"98c00992938b5c49fe59d3e56bf02cc9",name:"Prime24_1.png"},{bytes:38172,md5:"a998ae1940ad065af0fcf1789eccb9cf",name:"Prime32.fnt"},{bytes:29282,md5:"26b89747db7f4025f0afbe9f539bda53",name:"Prime32_0.png"}],bootstrap:[{bytes:36282,md5:"f94cace09224485e66de5aa3e340b85b",name:"font/Prime13.fnt"},{bytes:6789,md5:"a3743dc71ab98ca776d96e431254db71",name:"font/Prime13_0.png"},{bytes:25928,md5:"3547371b8723a1279e87019322db7c4b",
name:"font/Prime20.fnt"},{bytes:11135,md5:"11f874d1bf43c378c3f179d1b23aceae",name:"font/Prime20_0.png"},{bytes:2160,md5:"5379861332321a78770bf9cb376a62fe",name:"font/Prime20_1.png"},{bytes:139359,md5:"dab2703871d3dc449a6b98a8d34be8d7",name:"sprites.png"},{bytes:2472,md5:"977a0d88fbbd61c69de0ecb2c26d68f4",name:"sprites.xml"}]}]}};Z._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();t._scratchPoint=
new cc;za.NEWLINE=new wb(10);ba._sharedEvent=new gc;Y._sharedEvent=new hc;P._sharedEvent=new ic;Ka.CANVAS_TEXTURES=(new ma("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);z._mediaRefCount=0;z._detectBlobSupport=!0;q.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];q.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new ma("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);E._detectSupport=!0;da._scratchMatrix=new ea;Fa.count=0;new vc(0,0);oa.escapes=function(){var a=new X;null!=
I.lt?a.setReserved("lt","<"):a.h.lt="<";null!=I.gt?a.setReserved("gt",">"):a.h.gt=">";null!=I.amp?a.setReserved("amp","&"):a.h.amp="&";null!=I.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=I.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);C.__toStr={}.toString;sa.BYTES_PER_ELEMENT=1;J.SINE=0;J.SQUARE=1;J.SAWTOOTH=2;J.TRIANGLE=3;ha.HIGHPASS=2;ha.LOWPASS=4;V.main()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
