/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function p(a,b){function d(){}d.prototype=a;var h=new d,c;for(c in b)h[c]=b[c];b.toString!==Object.prototype.toString&&(h.toString=b.toString);return h}function zb(a){return a instanceof Array?function(){return s.iter(a)}:"function"==typeof a.iterator?v(a,a.iterator):a.iterator}function v(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=vc++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var e=function(){return K.__string_rec(this,"")},ea=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};ea.__name__=!0;ea.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,
len:this.r.m[0].length}},__class__:ea};var s=function(){};s.__name__=!0;s.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};s.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};s.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;a.splice(d,1);return!0};s.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var ka=function(){};ka.__name__=!0;ka.array=function(a){for(var b=[],a=zb(a)();a.hasNext();){var d=a.next();b.push(d)}return b};ka.count=function(a,b){var d=0;if(null==b)for(var h=zb(a)();h.hasNext();)h.next(),d++;else for(h=zb(a)();h.hasNext();){var c=h.next();b(c)&&d++}return d};ka.indexOf=function(a,b){for(var d=0,h=zb(a)();h.hasNext();){var c=h.next();if(b==c)return d;d++}return-1};var Ab=function(){};Ab.__name__=!0;Math.__name__=!0;var T=function(){};T.__name__=!0;T.field=function(a,b){try{return a[b]}catch(d){return null}};
T.getProperty=function(a,b){var d;return null==a?null:a.__properties__&&(d=a.__properties__["get_"+b])?a[d]():a[b]};T.callMethod=function(a,b,d){return b.apply(a,d)};T.fields=function(a){var b=[];if(null!=a){var d=Object.prototype.hasOwnProperty,h;for(h in a)"__id__"!=h&&"hx__closures__"!=h&&d.call(a,h)&&b.push(h)}return b};var D=function(){};D.__name__=!0;D.is=function(a,b){return K.__instanceof(a,b)};D.instance=function(a,b){return a instanceof b?a:null};D.string=function(a){return K.__string_rec(a,
"")};D["int"]=function(a){return a|0};D.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==s.cca(a,1)||88==s.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};D.parseFloat=function(a){return parseFloat(a)};var Sa=function(){this.b=""};Sa.__name__=!0;Sa.prototype={add:function(a){this.b+=D.string(a)},addSub:function(a,b,d){this.b=null==d?this.b+s.substr(a,b,null):this.b+s.substr(a,b,d)},__class__:Sa};var Ea=function(){};Ea.__name__=!0;Ea.startsWith=function(a,b){return a.length>=b.length&&s.substr(a,
0,b.length)==b};Ea.fastCodeAt=function(a,b){return a.charCodeAt(b)};var m=function(){};m.__name__=!0;m.parse=function(a){return fa.parse(a)};m.createElement=function(a){var b=new m;b.nodeType=m.Element;b._children=[];b._attributes=new U;b.set_nodeName(a);return b};m.createPCData=function(a){var b=new m;b.nodeType=m.PCData;b.set_nodeValue(a);return b};m.createCData=function(a){var b=new m;b.nodeType=m.CData;b.set_nodeValue(a);return b};m.createComment=function(a){var b=new m;b.nodeType=m.Comment;b.set_nodeValue(a);
return b};m.createDocType=function(a){var b=new m;b.nodeType=m.DocType;b.set_nodeValue(a);return b};m.createProcessingInstruction=function(a){var b=new m;b.nodeType=m.ProcessingInstruction;b.set_nodeValue(a);return b};m.createDocument=function(){var a=new m;a.nodeType=m.Document;a._children=[];return a};m.prototype={get_nodeName:function(){if(this.nodeType!=m.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=m.Element)throw"bad nodeType";return this._nodeName=
a},set_nodeValue:function(a){if(this.nodeType==m.Element||this.nodeType==m.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=m.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=m.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=m.Element)throw"bad nodeType";return this._attributes.exists(a)},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,
hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==m.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var d=this.x[a],a=a+1;if(d.nodeType==m.Element)return this.cur=a,d}return null}}},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var h=this.x[b];if(h.nodeType==m.Element&&h._nodeName==a)break;b++}this.cur=b;return b<
d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var h=this.x[b];b++;if(h.nodeType==m.Element&&h._nodeName==a)return this.cur=b,h}return null}}},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&s.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:m,__properties__:{set_nodeValue:"set_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var Bb=function(a,b,d){this.change=new x;this.observers=new ta;this.name=a;this.mapping=
d;this.setDefault(b)};Bb.__name__=!0;Bb.prototype={setDefault:function(a,b){null==b&&(b=!1);var d;b?(d=a,a=this.mapping.map(d)):d=this.mapping.mapInverse(a);this.normalisedDefaultValue=d;this.defaultValue=a;this.setValue(d,!0)},setValue:function(a,b,d){null==d&&(d=!1);null==b&&(b=!1);a=b?a:this.mapping.mapInverse(a);if(d||a!=this.normalisedValue)this.normalisedValue=a,this.change.emit(this)},setToDefault:function(){this.setValue(this.normalisedDefaultValue,!0)},getValue:function(a){null==a&&(a=!1);
return a?this.normalisedValue:this.mapping.map(this.normalisedValue)},addObservers:function(a,b,d){null==d&&(d=!1);null==b&&(b=!1);for(var h=0;h<a.length;){var c=a[h];++h;this.addObserver(c,b,d)}},addObserver:function(a,b,d){null==d&&(d=!1);null==b&&(b=!1);if(null==this.observers.h.__keys__[a.__id__]){var h=this.change.connect(v(a,a.onParameterChange));if(d)h.once();else this.observers.set(a,h)}if(b)a.onParameterChange(this)},removeObserver:function(a){null!=this.observers.h.__keys__[a.__id__]&&(this.observers.h[a.__id__].dispose(),
this.observers.remove(a))},__class__:Bb};var Fa=function(){};Fa.__name__=!0;Fa.prototype={__class__:Fa};var ua=function(){};ua.__name__=!0;ua.prototype={__class__:ua};var Ta=function(){this.max=1;this.min=0};Ta.__name__=!0;Ta.__interfaces__=[ua];Ta.prototype={map:function(a){return 0.5<a?1:0},mapInverse:function(a){return 1==a?1:0},__class__:Ta};var n={__ename__:!0,__constructs__:["BOOL","INT","FLOAT","FLOAT_EXPONENTIAL"],BOOL:["BOOL",0]};n.BOOL.toString=e;n.BOOL.__enum__=n;n.INT=["INT",1];n.INT.toString=
e;n.INT.__enum__=n;n.FLOAT=["FLOAT",2];n.FLOAT.toString=e;n.FLOAT.__enum__=n;n.FLOAT_EXPONENTIAL=["FLOAT_EXPONENTIAL",3];n.FLOAT_EXPONENTIAL.toString=e;n.FLOAT_EXPONENTIAL.__enum__=n;var u=function(){};u.__name__=!0;u.getMapping=function(a,b,d){null==d&&(d=1);null==b&&(b=0);switch(a[1]){case 0:return new Ta;case 1:return new Ua(b|0,d|0);case 2:return new Va(b,d);case 3:return new Wa(b,d)}return null};var Wa=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b;this._t2=0;0>=a&&(this._t2=
1+-1*a);this._min=a+this._t2;this._max=b+this._t2;this._t0=Math.log(this._max/this._min);this._t1=1/this._t0};Wa.__name__=!0;Wa.__interfaces__=[ua];Wa.prototype={map:function(a){return this._min*Math.exp(a*this._t0)-this._t2},mapInverse:function(a){return Math.log((a+this._t2)/this._min)*this._t1},__class__:Wa};var Va=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b};Va.__name__=!0;Va.__interfaces__=[ua];Va.prototype={map:function(a){return this.min+a*(this.max-this.min)},mapInverse:function(a){return(a-
this.min)/(this.max-this.min)},__class__:Va};var Ua=function(a,b){null==b&&(b=1);null==a&&(a=0);this.min=a;this.max=b};Ua.__name__=!0;Ua.__interfaces__=[ua];Ua.prototype={map:function(a){return Math.round(this.min+a*(this.max-this.min))},mapInverse:function(a){return(a-this.min)/(this.max-this.min)},__class__:Ua};var la=function(){};la.__name__=!0;var w=function(){this._flags=0;this.owner=this.next=null};w.__name__=!0;w.__interfaces__=[la];w.prototype={onAdded:function(){},onRemoved:function(){},
onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:w,__properties__:{get_name:"get_name"}};var k=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};k.__name__=!0;k.__interfaces__=[la];k.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=
d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var h=d.next;if(d==a)return null==b?this.firstComponent=h:(b.owner=this,b.next=h),delete this._compMap[d.get_name()],0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=h}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,
h=this.firstChild;null!=h;)d=h,h=h.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var h=d.next;if(d==a){null==b?this.firstChild=h:b.next=h;d.parent=null;d.next=null;break}b=d;d=h}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},toString:function(){return this.toStringImpl("")},toStringImpl:function(a){for(var b="",d=this.firstComponent;null!=d;)b+=d.get_name(),null!=d.next&&(b+=", "),d=d.next;for(var b=b+"\n",d=String.fromCharCode(9492),h=String.fromCharCode(9500),c=String.fromCharCode(9472),g=String.fromCharCode(9474),e=this.firstChild;null!=e;)var q=null==e.next,b=b+(a+(q?d:h)+c+c+" "),b=b+e.toStringImpl(a+(q?" ":g)+"   "),e=e.next;return b},__class__:k};var nc=function(){};nc.__name__=!0;var Cb=
function(){};Cb.__name__=!0;Cb.prototype={__class__:Cb};var va=function(){};va.__name__=!0;va.__interfaces__=[Cb];va.prototype={init:function(){var a=this;o.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new wa(b);this._pointer=new N;this._mouse=new Xa(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new xa;this.musicPlaying=
!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var h=0,c=function(d){if(!(1E3>d.timeStamp-h)){var c=b.getBoundingClientRect(),f=a.getX(d,c),c=a.getY(d,c);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,c,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(f,c);break;case "mouseup":a._mouse.submitUp(f,c,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,
c,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",c,!1);window.addEventListener("mousemove",c,!1);window.addEventListener("mouseup",c,!1);b.addEventListener("mousewheel",c,!1);b.addEventListener("DOMMouseScroll",c,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var g="undefined"!=typeof window.ontouchstart,c="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(g||c){var e=new Ya(this._pointer,
g?4:window.navigator.msMaxTouchPoints);this._touch=e;c=function(b){var d;d=g?b.changedTouches:[b];var c=b.target.getBoundingClientRect();h=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();o.SHOULD_HIDE_MOBILE_BROWSER&&o.hideMobileBrowser();for(b=0;b<d.length;){var f=d[b];++b;var q=a.getX(f,c),i=a.getY(f,c);e.submitDown((g?f.identifier:f.pointerId)|0,q,i)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<
d.length;)f=d[b],++b,q=a.getX(f,c),i=a.getY(f,c),e.submitMove((g?f.identifier:f.pointerId)|0,q,i);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)f=d[b],++b,q=a.getX(f,c),i=a.getY(f,c),e.submitUp((g?f.identifier:f.pointerId)|0,q,i)}};g?(b.addEventListener("touchstart",c,!1),b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",c,!1),b.addEventListener("touchcancel",c,!1)):(b.addEventListener("MSPointerDown",c,!1),b.addEventListener("MSPointerMove",
c,!1),b.addEventListener("MSPointerUp",c,!1))}else this._touch=new Za;var q=window.onerror;window.onerror=function(a,b,d){j.uncaughtError.emit(a);return null!=q?q(a,b,d):!1};var i=o.loadExtension("hidden",window.document);null!=i.value?(c=function(){j.hidden.set__(T.field(window.document,i.field))},c(null),window.document.addEventListener(i.prefix+"visibilitychange",c,!1)):(c=function(a){j.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",c,!1),window.addEventListener("pagehide",
c,!1));j.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var k=o.loadExtension("requestAnimationFrame").value;if(null!=k){var L=window.performance,l=null!=L&&o.polyfill("now",L);l?this._lastUpdate=L.now():null;var m=null,m=function(d){a.update(l?L.now():d);k(m,b)};k(m,b)}else window.setInterval(function(){a.update(Date.now())},16);Ga.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new y(this,
a)).promise},getStage:function(){return this._stage},getTime:function(){return Date.now()/1E3},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;j.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new $;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&
b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){return new ya(a)},__class__:va};var V=function(a,b){this._value=a;this._changed=null!=b?
new Ha(b):null};V.__name__=!0;V.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Ha);return this._changed},__class__:V,__properties__:{get_changed:"get_changed",set__:"set__"}};var za=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};za.__name__=!0;
za.__interfaces__=[la];za.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:za};var J=function(a){this._head=null!=a?new za(this,a):null;this._deferredTasks=null};J.__name__=!0;J.prototype={connectImpl:function(a,b){var d=this,h=new za(this,a);this._head==J.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(h,b)}):this.listAdd(h,b);return h},disconnect:function(a){var b=this;this._head==
J.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new Db(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=J.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,h=this._head;null!=
h;)d=h,h=h._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}},__class__:J};var Ha=function(a){J.call(this,a)};Ha.__name__=!0;Ha.__super__=J;Ha.prototype=p(J.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var d=this;this._head==J.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,
b){for(var d=this.willEmit(),h=d;null!=h;)h._listener(a,b),h.stayInList||h.dispose(),h=h._next;this.didEmit(d)},__class__:Ha});var x=function(a){J.call(this,a)};x.__name__=!0;x.__super__=J;x.prototype=p(J.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==J.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),
d=d._next;this.didEmit(b)},__class__:x});var B=function(a,b){this._behavior=null;V.call(this,a,b)};B.__name__=!0;B.__super__=V;B.prototype=p(V.prototype,{set__:function(a){this._behavior=null;return V.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(V.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,b,d){this.set_behavior(new Ia(this._value,a,b,d))},animateBy:function(a,b,d){this.set_behavior(new Ia(this._value,
this._value+a,b,d))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:B,__properties__:p(V.prototype.__properties__,{set_behavior:"set_behavior"})});var j=function(){};j.__name__=!0;j.init=function(){j._calledInit||(j._platform.init(),j._calledInit=!0)};j.loadAssetPack=function(a){return j._platform.loadAssetPack(a)};var Ga=function(){};Ga.__name__=!0;Ga.info=function(){null};Ga.__super__=nc;Ga.prototype=p(nc.prototype,{__class__:Ga});var Eb=function(){this._realDt=0};
Eb.__name__=!0;Eb.__super__=w;Eb.prototype=p(w.prototype,{get_name:function(){return"SpeedAdjuster_10"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:Eb});var Fb=function(){};Fb.__name__=!0;Fb.prototype={__class__:Fb};var H=function(){};H.__name__=!0;H.linear=function(a){return a};H.quadOut=function(a){return a*(2-a)};H.quartOut=function(a){return 1- --a*a*a*a};var Ia=function(a,b,d,h){this._from=a;this._to=b;this._duration=d;this.elapsed=0;this._easing=
null!=h?h:H.linear};Ia.__name__=!0;Ia.__interfaces__=[Fb];Ia.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Ia};var Ja=function(){};Ja.__name__=!0;Ja.__interfaces__=[la];var i={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(","),WEBP:["WEBP",0]};i.WEBP.toString=e;
i.WEBP.__enum__=i;i.JXR=["JXR",1];i.JXR.toString=e;i.JXR.__enum__=i;i.PNG=["PNG",2];i.PNG.toString=e;i.PNG.__enum__=i;i.JPG=["JPG",3];i.JPG.toString=e;i.JPG.__enum__=i;i.GIF=["GIF",4];i.GIF.toString=e;i.GIF.__enum__=i;i.DDS=["DDS",5];i.DDS.toString=e;i.DDS.__enum__=i;i.PVR=["PVR",6];i.PVR.toString=e;i.PVR.__enum__=i;i.PKM=["PKM",7];i.PKM.toString=e;i.PKM.__enum__=i;i.MP3=["MP3",8];i.MP3.toString=e;i.MP3.__enum__=i;i.M4A=["M4A",9];i.M4A.toString=e;i.M4A.__enum__=i;i.OPUS=["OPUS",10];i.OPUS.toString=
e;i.OPUS.__enum__=i;i.OGG=["OGG",11];i.OGG.toString=e;i.OGG.__enum__=i;i.WAV=["WAV",12];i.WAV.toString=e;i.WAV.__enum__=i;i.Data=["Data",13];i.Data.toString=e;i.Data.__enum__=i;var Gb=function(a,b,d,h){this.name=a;this.url=b;this.format=d;this.bytes=h};Gb.__name__=!0;Gb.prototype={__class__:Gb};var $a=function(){};$a.__name__=!0;$a.__interfaces__=[la];$a.prototype={__class__:$a};var ab=function(){};ab.__name__=!0;ab.__interfaces__=[Ja];ab.prototype={__class__:ab};var X=function(){this._localBase=
this._remoteBase=null;this._entries=[]};X.__name__=!0;X.fromAssets=function(a,b){null==b&&(b=!0);var d=T.field(oc.getType(X).assets[0],a);if(null==d){if(b)throw P.withFields("Missing asset pack",["name",a]);return null}var h=new X;h.set_localBase("assets");for(var c=0;c<d.length;){var g=d[c];++c;var e=g.name,q=a+"/"+e+"?v="+D.string(g.md5),k=X.inferFormat(e);k!=i.Data&&(e=P.removeFileExtension(e));h.add(e,q,g.bytes,k)}return h};X.inferFormat=function(a){a=P.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return i.GIF;
case "jpg":case "jpeg":return i.JPG;case "jxr":case "wdp":return i.JXR;case "png":return i.PNG;case "webp":return i.WEBP;case "dds":return i.DDS;case "pvr":return i.PVR;case "pkm":return i.PKM;case "m4a":return i.M4A;case "mp3":return i.MP3;case "ogg":return i.OGG;case "opus":return i.OPUS;case "wav":return i.WAV}else null;return i.Data};X.prototype={add:function(a,b,d,c){null==d&&(d=0);null==c&&(c=X.inferFormat(b));a=new Gb(a,b,c,d);this._entries.push(a);return a},iterator:function(){return s.iter(this._entries)},
getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&X._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?P.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&pc.that(!Ea.startsWith(a,"http://")&&!Ea.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:X,__properties__:{get_remoteBase:"get_remoteBase",
set_localBase:"set_localBase",get_localBase:"get_localBase"}};var bb=function(a){w.call(this);this.container=a;this.behaviours=[];this.change=new ma;this.visibleBounds=new Ka;this._rotation=this._panY=this._panX=this._targetY=this._targetX=0;this._zoom=1;this.invalidated=!0};bb.__name__=!0;bb.__super__=w;bb.prototype=p(w.prototype,{get_name:function(){return"Camera_7"},onAdded:function(){this.container=this.owner;this.rootSprite=this.container._compMap.Sprite_0;if(null==this.rootSprite)throw"Uh-oh! No Sprite found in the container Entity "+
D.string(this.container);this.owner.add(this.controller=new cb(this));this.stageResized=j._platform.getStage().resize.connect(v(this,this.onStageResized),!0);this.onStageResized()},onRemoved:function(){this.reset();for(var a=0,b=this.behaviours;a<b.length;){var d=b[a];++a;d.dispose()}this.behaviours=null;null!=this.controller&&(this.controller.dispose(),this.controller=null);null!=this.stageResized&&(this.stageResized.dispose(),this.stageResized=null);this.container=this.rootSprite=null},onUpdate:function(a){for(var b=
this.stageCentreX,d=this.stageCentreY,c=0,f=this.behaviours;c<f.length;){var g=f[c];++c;g.update(a)}if(this.invalidated){this.rootSprite.anchorX.set__(this._targetX-this._panX);this.rootSprite.anchorY.set__(this._targetY-this._panY);this.rootSprite.rotation.set__(this._rotation);this.rootSprite.setScale(this._zoom);this.rootSprite.x.set__(b);this.rootSprite.y.set__(d);this.visibleBounds.set(this.rootSprite.anchorX._value-b/this._zoom,this.rootSprite.anchorY._value-d/this._zoom,this.stageWidth/this._zoom,
this.stageHeight/this._zoom);a=0;for(b=this.behaviours;a<b.length;)d=b[a],++a,d.postUpdate();this.invalidated=!1;this.change.emit()}},onStageResized:function(){this.stageWidth=j._platform.getStage().get_width();this.stageHeight=j._platform.getStage().get_height();this.stageCentreX=this.stageWidth/2;this.stageCentreY=this.stageHeight/2;this.invalidated=!0},reset:function(){this.invalidated=this.invalidated||1!=this._zoom;this._zoom=1;this.invalidated=this.invalidated||0!=this._targetX;this._targetX=
0;this.invalidated=this.invalidated||0!=this._targetY;this._targetY=0;this.set_panX(this.set_panY(function(a){a.invalidated=a.invalidated||0!=a._rotation;return a._rotation=0}(this)));this.invalidated=!0;this.controller.setToCurrent();return this},set_zoom:function(a){this.invalidated=this.invalidated||a!=this._zoom;return this._zoom=a},set_rotation:function(a){this.invalidated=this.invalidated||a!=this._rotation;return this._rotation=a},set_targetX:function(a){this.invalidated=this.invalidated||
a!=this._targetX;return this._targetX=a},set_targetY:function(a){this.invalidated=this.invalidated||a!=this._targetY;return this._targetY=a},set_panX:function(a){this.invalidated=this.invalidated||a!=this._panX;return this._panX=a},set_panY:function(a){this.invalidated=this.invalidated||a!=this._panY;return this._panY=a},__class__:bb,__properties__:p(w.prototype.__properties__,{set_panY:"set_panY",set_panX:"set_panX",set_targetY:"set_targetY",set_targetX:"set_targetX",set_rotation:"set_rotation",
set_zoom:"set_zoom"})});var cb=function(a){this.camera=null;w.call(this);this.camera=a};cb.__name__=!0;cb.__super__=w;cb.prototype=p(w.prototype,{get_name:function(){return"CameraController_6"},onAdded:function(){this.panX=new B(this.camera._panX);this.panY=new B(this.camera._panY);this.targetX=new B(this.camera._targetX);this.targetY=new B(this.camera._targetY);this.zoom=new B(this.camera._zoom);this.rotation=new B(this.camera._rotation)},onUpdate:function(a){this.panX.update(a);this.panY.update(a);
this.targetX.update(a);this.targetY.update(a);this.zoom.update(a);this.rotation.update(a);this.camera.set_panX(this.panX._value);this.camera.set_panY(this.panY._value);this.camera.set_targetX(this.targetX._value);this.camera.set_targetY(this.targetY._value);this.camera.set_zoom(this.zoom._value);this.camera.set_rotation(this.rotation._value)},onRemoved:function(){this.rotation=this.zoom=this.targetY=this.targetX=this.panY=this.panX=this.camera=null},setToCurrent:function(){this.panX.set__(this.camera._panX);
this.panY.set__(this.camera._panY);this.targetX.set__(this.camera._targetX);this.targetY.set__(this.camera._targetY);this.zoom.set__(this.camera._zoom);this.rotation.set__(this.camera._rotation)},__class__:cb});var ga=function(a){this._enabled=!1;this.camera=a;this.controller=a.controller};ga.__name__=!0;ga.prototype={update:function(){},postUpdate:function(){},dispose:function(){this.set_enabled(!1);this.camera=this.controller=null},set_enabled:function(a){return this._enabled=a},__class__:ga,__properties__:{set_enabled:"set_enabled"}};
var db=function(a,b){this.scrollZoom=!0;this.mouseMoved=!1;this.lastX=this.lastY=this.x=this.y=0;this.bounds=b;ga.call(this,a)};db.__name__=!0;db.__super__=ga;db.prototype=p(ga.prototype,{validatePanX:function(a){if(this._enabled&&null!=this.bounds)if(0>a){if(0<this.camera.visibleBounds.get_right()-this.bounds.get_right())return 0}else if(0<a&&0>this.camera.visibleBounds.x-this.bounds.x)return 0;return a},validatePanY:function(a){if(this._enabled&&null!=this.bounds)if(0>a){if(0<this.camera.visibleBounds.get_bottom()-
this.bounds.get_bottom())return 0}else if(0<a&&0>this.camera.visibleBounds.y-this.bounds.y)return 0;return a},update:function(){if(this.mouseMoved){this.mouseMoved=!1;var a=this.controller,b=a.zoom._value,d=(this.x-this.lastX)/b,b=(this.y-this.lastY)/b;this.lastX=this.x;this.lastY=this.y;var c=a.panX;c.set__(c._value+this.validatePanX(d));a=a.panY;a.set__(a._value+this.validatePanY(b))}},onMouseDown:function(a){if(this._enabled){var b=j._platform.getMouse();if(a.button==I.Right||a.button==I.Left&&
j._platform.getKeyboard().isDown(c.Space))this.lastX=a.viewX,this.lastY=a.viewY,this.mouseDownConnection.dispose(),this.mouseDownConnection=null,this.mouseMoveConnection=b.move.connect(v(this,this.onMouseMove)),this.mouseUpConnection=b.up.connect(v(this,this.onMouseUp))}},onMouseUp:function(){this.mouseUpConnection.dispose();this.mouseUpConnection=null;this.mouseMoveConnection.dispose();this.mouseMoveConnection=null;this._enabled&&(this.mouseDownConnection=j._platform.getMouse().down.connect(v(this,
this.onMouseDown)))},onMouseMove:function(a){this._enabled&&(this.mouseMoved=!0,this.x=a.viewX,this.y=a.viewY)},onMouseScroll:function(a){if(this._enabled&&this.scrollZoom){var b=this.controller;j._platform.getKeyboard().isDown(c.Shift)?b.rotation.animateBy(0<a?-22.5:22.5,0.25,H.quadOut):(a=b.zoom._value*(0<a?1.2:0.8),a!=b.zoom._value&&b.zoom.animateTo(a,0.25,H.quadOut))}},setupControl:function(){var a=j._platform.getMouse();this.mouseDownConnection=a.down.connect(v(this,this.onMouseDown));this.mouseScrollConnection=
a.scroll.connect(v(this,this.onMouseScroll))},removeControl:function(){null!=this.mouseMoveConnection&&(this.mouseMoveConnection.dispose(),this.mouseMoveConnection=null);null!=this.mouseScrollConnection&&(this.mouseScrollConnection.dispose(),this.mouseScrollConnection=null);null!=this.mouseDownConnection&&(this.mouseDownConnection.dispose(),this.mouseDownConnection=null);null!=this.mouseUpConnection&&(this.mouseUpConnection.dispose(),this.mouseUpConnection=null)},set_enabled:function(a){!a&&this._enabled?
(this.removeControl(),this._enabled=!1):j._platform.getMouse().get_supported()&&a&&!this._enabled&&(this.setupControl(),this._enabled=!0);return this._enabled},__class__:db});var eb=function(a,b,d){this.min=b;this.max=d;ga.call(this,a)};eb.__name__=!0;eb.__super__=ga;eb.prototype=p(ga.prototype,{update:function(){if(this._enabled){var a=Math.min(Math.max(this.min,this.camera._zoom),this.max);this.camera._zoom!=a&&(this.camera._zoom=this.controller.zoom.set__(a))}},__class__:eb});var Hb=function(a,
b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};Hb.__name__=!0;Hb.prototype={__class__:Hb};var r=function(){this.blendMode=this.scissor=null;var a=this;w.call(this);this._flags|=54;this._localMatrix=new Ib;var b=function(){a._flags|=24};this.x=new B(0,b);this.y=new B(0,b);this.rotation=new B(0,b);this.scaleX=new B(1,b);this.scaleY=new B(1,b);this.anchorX=new B(0,b);this.anchorY=new B(0,b);this.alpha=new B(1);this.tintR=new B(1);this.tintG=new B(1);this.tintB=new B(1)};r.__name__=!0;r.hitTest=
function(a,b,d){var c=a._compMap.Sprite_0;if(null!=c){if(6!=(c._flags&6))return null;c.getLocalMatrix().inverseTransform(b,d,r._scratchPoint)&&(b=r._scratchPoint.x,d=r._scratchPoint.y);var f=c.scissor;if(null!=f&&!f.contains(b,d))return null}a=r.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=c&&c.containsLocal(b,d)?c:null};r.render=function(a,b){var d=a._compMap.Sprite_0;if(null!=d){var c=d.alpha._value;if(0==(d._flags&2)||0>=c)return;b.save();b.setTint(d.tintR._value,d.tintG._value,d.tintB._value);
1>c&&b.multiplyAlpha(c);null!=d.blendMode&&b.setBlendMode(d.blendMode);var c=d.getLocalMatrix(),f=c.m02,g=c.m12;0!=(d._flags&32)&&(f=Math.round(f),g=Math.round(g));b.transform(c.m00,c.m10,c.m01,c.m11,f,g);c=d.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);d.draw(b)}c=a._compMap.Director_8;if(null!=c){c=c.occludedScenes;for(f=0;f<c.length;)g=c[f],++f,r.render(g,b)}for(c=a.firstChild;null!=c;)f=c.next,r.render(c,b),c=f;null!=d&&b.restore()};r.hitTestBackwards=function(a,b,d){if(null!=a){var c=
r.hitTestBackwards(a.next,b,d);return null!=c?c:r.hitTest(a,b,d)}return null};r.__super__=w;r.prototype=p(w.prototype,{get_name:function(){return"Sprite_0"},setTint:function(a,b,d,c,f){null==c&&(c=0);0>=c?(this.tintR.set__(a),this.tintG.set__(b),this.tintB.set__(d)):(this.tintR.animateTo(a,c,f),this.tintG.animateTo(b,c,f),this.tintB.animateTo(d,c,f));return this},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&
0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);
return this},setAlpha:function(a){this.alpha.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},disablePixelSnapping:function(){this.set_pixelSnapping(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),
this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.tintR.update(a);this.tintG.update(a);this.tintB.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_0;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==
this._pointerDown&&(this._pointerDown=new x);return this._pointerDown},get_pointerMove:function(){null==this._pointerMove&&(this._pointerMove=new x);return this._pointerMove},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new x);return this._pointerUp},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new x);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=j._platform.getPointer().move.connect(function(b){for(var d=
b.hit;null!=d;){if(d==a)return;d=d.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_pointerEnabled:function(a){this._flags=Jb.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=Jb.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},
onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:r,__properties__:p(w.prototype.__properties__,
{set_pixelSnapping:"set_pixelSnapping",set_pointerEnabled:"set_pointerEnabled",get_pointerOut:"get_pointerOut",get_pointerUp:"get_pointerUp",get_pointerMove:"get_pointerMove",get_pointerDown:"get_pointerDown"})});var ha=function(a,b,d){r.call(this);this.color=a;this.width=new B(b);this.height=new B(d)};ha.__name__=!0;ha.__super__=r;ha.prototype=p(r.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},
onUpdate:function(a){r.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:ha});var fb=function(a,b){ha.call(this,a,1,1);this.camera=b;this.onStageResize()};fb.__name__=!0;fb.__super__=ha;fb.prototype=p(ha.prototype,{onAdded:function(){this.centerAnchor();this.updateConnection=this.camera.change.connect(v(this,this.updateBackground));this.resizeConnection=j._platform.getStage().resize.connect(v(this,this.onStageResize));this.onStageResize()},onUpdate:function(){if(this.needsUpdate){var a=
this.camera._zoom,b=Math.min(32/a,512);this.setScaleXY((this.stageWidth+b)/a,(this.stageHeight+b)/a);a=this.camera.rootSprite;this.setXY(a.anchorX._value-a.x._value+this.stageCentreX,a.anchorY._value-a.y._value+this.stageCentreY);this.needsUpdate=!1}},onStageResize:function(){this.stageWidth=j._platform.getStage().get_width();this.stageHeight=j._platform.getStage().get_height();this.stageCentreX=this.stageWidth/2;this.stageCentreY=this.stageHeight/2;this.needsUpdate=!0},updateBackground:function(){this.needsUpdate=
!0},onRemoved:function(){null!=this.camera&&(this.camera=null);null!=this.updateConnection&&(this.updateConnection.dispose(),this.updateConnection=null);null!=this.resizeConnection&&(this.resizeConnection.dispose(),this.resizeConnection=null);ha.prototype.onRemoved.call(this)},__class__:fb});var Q={__ename__:!0,__constructs__:["Normal","Add","Mask","Copy"],Normal:["Normal",0]};Q.Normal.toString=e;Q.Normal.__enum__=Q;Q.Add=["Add",1];Q.Add.toString=e;Q.Add.__enum__=Q;Q.Mask=["Mask",2];Q.Mask.toString=
e;Q.Mask.__enum__=Q;Q.Copy=["Copy",3];Q.Copy.toString=e;Q.Copy.__enum__=Q;var gb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};gb.__name__=!0;gb.prototype={draw:function(a,b,d){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,d+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?D["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==
this._kernings&&(this._kernings=new R);this._kernings.set(a,b)},__class__:gb};var na=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};na.__name__=!0;na.prototype={layoutText:function(a,b,d,c,f){null==f&&(f=0);null==c&&(c=0);null==d&&(d=0);null==b&&(b=Y.Left);return new oa(this,a,b,d,c,f)},reload:function(){this._glyphs=new R;this._glyphs.set(na.NEWLINE.charCode,na.NEWLINE);for(var a=new Aa(this._file.toString()),b=new R,d=this.name.lastIndexOf("/"),d=0<=d?s.substr(this.name,
0,d+1):"",c=a.keywords();c.hasNext();)switch(c.next()){case "info":for(var f=a.pairs();f.hasNext();){var g=f.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "common":for(f=a.pairs();f.hasNext();)switch(g=f.next(),g.key){case "lineHeight":this.lineHeight=g.getInt()}break;case "page":for(var f=0,g=null,e=a.pairs();e.hasNext();){var q=e.next();switch(q.key){case "id":f=q.getInt();break;case "file":g=q.getString()}}g=this._pack.getTexture(d+P.removeFileExtension(g));b.set(f,g);break;
case "char":f=null;for(g=a.pairs();g.hasNext();)switch(e=g.next(),e.key){case "id":f=new gb(e.getInt());break;case "x":f.x=e.getInt();break;case "y":f.y=e.getInt();break;case "width":f.width=e.getInt();break;case "height":f.height=e.getInt();break;case "page":e=e.getInt();f.page=b.get(e);break;case "xoffset":f.xOffset=e.getInt();break;case "yoffset":f.yOffset=e.getInt();break;case "xadvance":f.xAdvance=e.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;e=g=0;for(q=a.pairs();q.hasNext();){var i=
q.next();switch(i.key){case "first":f=this._glyphs.get(i.getInt());break;case "second":g=i.getInt();break;case "amount":e=i.getInt()}}null!=f&&0!=e&&f.setKerning(g,e)}},__class__:na};var Y={__ename__:!0,__constructs__:["Left","Center","Right"],Left:["Left",0]};Y.Left.toString=e;Y.Left.__enum__=Y;Y.Center=["Center",1];Y.Center.toString=e;Y.Center.__enum__=Y;Y.Right=["Right",2];Y.Right.toString=e;Y.Right.__enum__=Y;var oa=function(a,b,d,c,f,g){this.lines=0;var e=this;this._font=a;this._glyphs=[];this._offsets=
[];this._lineOffset=Math.round(a.lineHeight+g);this.bounds=new Ka;for(var q=[],g=b.length,i=0;i<g;){var k=i++,k=b.charCodeAt(k),k=a._glyphs.get(k);null!=k?this._glyphs.push(k):null}for(var b=-1,L=0,l=0,a=a._glyphs.get(10),g=function(){e.bounds.width=hb.max(e.bounds.width,L);e.bounds.height+=l;q[e.lines]=L;l=L=0;++e.lines},i=0;i<this._glyphs.length;){k=this._glyphs[i];this._offsets[i]=Math.round(L);var j=0<c&&L+k.width>c;j||k==a?(j&&(0<=b?(this._glyphs[b]=a,L=this._offsets[b],i=b):this._glyphs.splice(i,
0,a)),b=-1,l=this._lineOffset,g()):(32==k.charCode&&(b=i),L+=k.xAdvance+f,l=hb.max(l,k.height+k.yOffset),i+1<this._glyphs.length&&(L+=k.getKerning(this._glyphs[i+1].charCode)));++i}g();f=0;a=oa.getAlignOffset(d,q[0],c);b=1.79769313486231E308;g=-1.79769313486231E308;k=i=0;for(j=this._glyphs.length;k<j;){var m=this._glyphs[k];10==m.charCode&&(f+=this._lineOffset,++i,a=oa.getAlignOffset(d,q[i],c));this._offsets[k]+=a;var n=f+m.yOffset;b<n||(b=n);g=hb.max(g,n+m.height);++k}this.bounds.x=oa.getAlignOffset(d,
this.bounds.width,c);this.bounds.y=b;this.bounds.height=g-b};oa.__name__=!0;oa.getAlignOffset=function(a,b,d){switch(a[1]){case 0:return 0;case 2:return d-b;case 1:return Math.round((d-b)/2)}};oa.prototype={draw:function(a){for(var b=0,d=0,c=this._glyphs.length;d<c;){var f=this._glyphs[d];10==f.charCode?b+=this._lineOffset:f.draw(a,this._offsets[d],b);++d}},__class__:oa};var Aa=function(a){this._configText=a;this._keywordPattern=new ea("([A-Za-z]+)(.*)","");this._pairPattern=new ea('([A-Za-z]+)=("[^"]*"|[^\\s]+)',
"")};Aa.__name__=!0;Aa.advance=function(a,b){var d=b.matchedPos();return s.substr(a,d.pos+d.len,a.length)};Aa.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Aa.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Aa.advance(b,a._pairPattern);return new Kb(a._pairPattern.matched(1),
a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Aa};var Kb=function(a,b){this.key=a;this._value=b};Kb.__name__=!0;Kb.prototype={getInt:function(){return D.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:s.substr(this._value,1,this._value.length-2)},__class__:Kb};var Lb=function(){};Lb.__name__=!0;Lb.prototype={__class__:Lb};var z=function(a){r.call(this);this.texture=a};z.__name__=!0;z.__super__=r;z.prototype=p(r.prototype,
{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:z});var aa=function(a){this._width=this._height=this._x=this._y=0;w.call(this);this.parts=a;if(9!=a.length)throw"Expected exactly 9 parts, but got "+a.length;this.xOffset=a[8].getNaturalWidth();this.yOffset=a[8].getNaturalHeight();this.minWidth=this.xOffset+
this.xOffset+1;this.minHeight=this.yOffset+this.yOffset+1;this._width=this.minWidth;this._height=this.minHeight;this.set_x(this.set_y(0))};aa.__name__=!0;aa.fromSubTexture=function(a,b,d,c,f){null==f&&(f=0);null==c&&(c=0);null==d&&(d=0);null==b&&(b=0);1>b&&(b=Math.round(a.get_width()/2));1>d&&(d=Math.round(a.get_height()/2));var g=Math.round(a.get_width()/2),e=Math.round(a.get_height()/2),q=a.get_parent(),a=new aa([new z(q.subTexture(a.get_x()+g,a.get_y(),1,d)),new z(q.subTexture(a.get_x()+g,a.get_y()+
e,1,1)),new z(q.subTexture(a.get_x()+g,a.get_y()+a.get_height()-d,1,d)),new z(q.subTexture(a.get_x()+a.get_width()-b,a.get_y(),b,d)),new z(q.subTexture(a.get_x()+a.get_width()-b,a.get_y()+e,b,1)),new z(q.subTexture(a.get_x()+a.get_width()-b,a.get_y()+a.get_height()-d,b,d)),new z(q.subTexture(a.get_x(),a.get_y(),b,d)),new z(q.subTexture(a.get_x(),a.get_y()+e,b,1)),new z(q.subTexture(a.get_x(),a.get_y()+a.get_height()-d,b,d))]);0<c&&a.set_width(c);0<f&&a.set_height(f);return a};aa.__super__=w;aa.prototype=
p(w.prototype,{get_name:function(){return"NineSlice_5"},onAdded:function(){for(var a=0,b=this.parts;a<b.length;){var d=b[a];++a;this.owner.addChild((new k).add(d.disablePointer()))}},set_width:function(a){a=a<this.minWidth?this.minWidth:a;this.parts[0].scaleX.set__(this.parts[1].scaleX.set__(this.parts[2].scaleX.set__(a-this.minWidth)));this.parts[3].x.set__(this.parts[4].x.set__(this.parts[5].x.set__(this._x+a-this.xOffset-1)));return this._width=a},set_height:function(a){a=a<this.minHeight?this.minHeight:
a;this.parts[1].scaleY.set__(this.parts[4].scaleY.set__(this.parts[7].scaleY.set__(a-this.minHeight)));this.parts[2].y.set__(this.parts[5].y.set__(this.parts[8].y.set__(this._y+a-this.yOffset-1)));return this._height=a},set_x:function(a){this.parts[0].x.set__(this.parts[1].x.set__(this.parts[2].x.set__(a+this.xOffset)));this.parts[3].x.set__(this.parts[4].x.set__(this.parts[5].x.set__(a+this._width-this.xOffset-1)));this.parts[6].x.set__(this.parts[7].x.set__(this.parts[8].x.set__(a)));return this._x=
a},set_y:function(a){this.parts[0].y.set__(this.parts[3].y.set__(this.parts[6].y.set__(a)));this.parts[1].y.set__(this.parts[4].y.set__(this.parts[7].y.set__(a+this.yOffset)));this.parts[2].y.set__(this.parts[5].y.set__(this.parts[8].y.set__(a+this._height-this.yOffset-1)));return this._y=a},__class__:aa,__properties__:p(w.prototype.__properties__,{set_y:"set_y",set_x:"set_x",set_height:"set_height",set_width:"set_width"})});var ia={__ename__:!0,__constructs__:["Portrait","Landscape"],Portrait:["Portrait",
0]};ia.Portrait.toString=e;ia.Portrait.__enum__=ia;ia.Landscape=["Landscape",1];ia.Landscape.toString=e;ia.Landscape.__enum__=ia;var qc=function(){};qc.__name__=!0;qc.parse=function(a,b){for(var d=new U,c=a.elements();c.hasNext();){var f=c.next();if("TextureAtlas"==f.get_nodeName())for(f=f.elementsNamed("SubTexture");f.hasNext();){var g=f.next(),e=g.get("name"),g=b.subTexture(D.parseInt(g.get("x")),D.parseInt(g.get("y")),D.parseInt(g.get("width")),D.parseInt(g.get("height")));d.set(e,g)}}return d};
var ib=function(){};ib.__name__=!0;ib.__interfaces__=[Ja];ib.prototype={__class__:ib};var jb=function(){};jb.__name__=!0;jb.__interfaces__=[ib];jb.prototype={__class__:jb};var Ba=function(a,b){null==b&&(b="");this._layout=null;var d=this;r.call(this);this._font=a;this._text=b;this._align=Y.Left;this._flags|=128;var c=function(){d._flags|=128};this.wrapWidth=new B(0,c);this.letterSpacing=new B(0,c);this.lineSpacing=new B(0,c)};Ba.__name__=!0;Ba.__super__=r;Ba.prototype=p(r.prototype,{draw:function(a){this.updateLayout();
this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},updateLayout:function(){0!=
(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){r.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:Ba,__properties__:p(r.prototype.__properties__,{set_text:"set_text"})});var c={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(","),
A:["A",0]};c.A.toString=e;c.A.__enum__=c;c.B=["B",1];c.B.toString=e;c.B.__enum__=c;c.C=["C",2];c.C.toString=e;c.C.__enum__=c;c.D=["D",3];c.D.toString=e;c.D.__enum__=c;c.E=["E",4];c.E.toString=e;c.E.__enum__=c;c.F=["F",5];c.F.toString=e;c.F.__enum__=c;c.G=["G",6];c.G.toString=e;c.G.__enum__=c;c.H=["H",7];c.H.toString=e;c.H.__enum__=c;c.I=["I",8];c.I.toString=e;c.I.__enum__=c;c.J=["J",9];c.J.toString=e;c.J.__enum__=c;c.K=["K",10];c.K.toString=e;c.K.__enum__=c;c.L=["L",11];c.L.toString=e;c.L.__enum__=
c;c.M=["M",12];c.M.toString=e;c.M.__enum__=c;c.N=["N",13];c.N.toString=e;c.N.__enum__=c;c.O=["O",14];c.O.toString=e;c.O.__enum__=c;c.P=["P",15];c.P.toString=e;c.P.__enum__=c;c.Q=["Q",16];c.Q.toString=e;c.Q.__enum__=c;c.R=["R",17];c.R.toString=e;c.R.__enum__=c;c.S=["S",18];c.S.toString=e;c.S.__enum__=c;c.T=["T",19];c.T.toString=e;c.T.__enum__=c;c.U=["U",20];c.U.toString=e;c.U.__enum__=c;c.V=["V",21];c.V.toString=e;c.V.__enum__=c;c.W=["W",22];c.W.toString=e;c.W.__enum__=c;c.X=["X",23];c.X.toString=
e;c.X.__enum__=c;c.Y=["Y",24];c.Y.toString=e;c.Y.__enum__=c;c.Z=["Z",25];c.Z.toString=e;c.Z.__enum__=c;c.Number0=["Number0",26];c.Number0.toString=e;c.Number0.__enum__=c;c.Number1=["Number1",27];c.Number1.toString=e;c.Number1.__enum__=c;c.Number2=["Number2",28];c.Number2.toString=e;c.Number2.__enum__=c;c.Number3=["Number3",29];c.Number3.toString=e;c.Number3.__enum__=c;c.Number4=["Number4",30];c.Number4.toString=e;c.Number4.__enum__=c;c.Number5=["Number5",31];c.Number5.toString=e;c.Number5.__enum__=
c;c.Number6=["Number6",32];c.Number6.toString=e;c.Number6.__enum__=c;c.Number7=["Number7",33];c.Number7.toString=e;c.Number7.__enum__=c;c.Number8=["Number8",34];c.Number8.toString=e;c.Number8.__enum__=c;c.Number9=["Number9",35];c.Number9.toString=e;c.Number9.__enum__=c;c.Numpad0=["Numpad0",36];c.Numpad0.toString=e;c.Numpad0.__enum__=c;c.Numpad1=["Numpad1",37];c.Numpad1.toString=e;c.Numpad1.__enum__=c;c.Numpad2=["Numpad2",38];c.Numpad2.toString=e;c.Numpad2.__enum__=c;c.Numpad3=["Numpad3",39];c.Numpad3.toString=
e;c.Numpad3.__enum__=c;c.Numpad4=["Numpad4",40];c.Numpad4.toString=e;c.Numpad4.__enum__=c;c.Numpad5=["Numpad5",41];c.Numpad5.toString=e;c.Numpad5.__enum__=c;c.Numpad6=["Numpad6",42];c.Numpad6.toString=e;c.Numpad6.__enum__=c;c.Numpad7=["Numpad7",43];c.Numpad7.toString=e;c.Numpad7.__enum__=c;c.Numpad8=["Numpad8",44];c.Numpad8.toString=e;c.Numpad8.__enum__=c;c.Numpad9=["Numpad9",45];c.Numpad9.toString=e;c.Numpad9.__enum__=c;c.NumpadAdd=["NumpadAdd",46];c.NumpadAdd.toString=e;c.NumpadAdd.__enum__=c;c.NumpadDecimal=
["NumpadDecimal",47];c.NumpadDecimal.toString=e;c.NumpadDecimal.__enum__=c;c.NumpadDivide=["NumpadDivide",48];c.NumpadDivide.toString=e;c.NumpadDivide.__enum__=c;c.NumpadEnter=["NumpadEnter",49];c.NumpadEnter.toString=e;c.NumpadEnter.__enum__=c;c.NumpadMultiply=["NumpadMultiply",50];c.NumpadMultiply.toString=e;c.NumpadMultiply.__enum__=c;c.NumpadSubtract=["NumpadSubtract",51];c.NumpadSubtract.toString=e;c.NumpadSubtract.__enum__=c;c.F1=["F1",52];c.F1.toString=e;c.F1.__enum__=c;c.F2=["F2",53];c.F2.toString=
e;c.F2.__enum__=c;c.F3=["F3",54];c.F3.toString=e;c.F3.__enum__=c;c.F4=["F4",55];c.F4.toString=e;c.F4.__enum__=c;c.F5=["F5",56];c.F5.toString=e;c.F5.__enum__=c;c.F6=["F6",57];c.F6.toString=e;c.F6.__enum__=c;c.F7=["F7",58];c.F7.toString=e;c.F7.__enum__=c;c.F8=["F8",59];c.F8.toString=e;c.F8.__enum__=c;c.F9=["F9",60];c.F9.toString=e;c.F9.__enum__=c;c.F10=["F10",61];c.F10.toString=e;c.F10.__enum__=c;c.F11=["F11",62];c.F11.toString=e;c.F11.__enum__=c;c.F12=["F12",63];c.F12.toString=e;c.F12.__enum__=c;c.F13=
["F13",64];c.F13.toString=e;c.F13.__enum__=c;c.F14=["F14",65];c.F14.toString=e;c.F14.__enum__=c;c.F15=["F15",66];c.F15.toString=e;c.F15.__enum__=c;c.Left=["Left",67];c.Left.toString=e;c.Left.__enum__=c;c.Up=["Up",68];c.Up.toString=e;c.Up.__enum__=c;c.Right=["Right",69];c.Right.toString=e;c.Right.__enum__=c;c.Down=["Down",70];c.Down.toString=e;c.Down.__enum__=c;c.Alt=["Alt",71];c.Alt.toString=e;c.Alt.__enum__=c;c.Backquote=["Backquote",72];c.Backquote.toString=e;c.Backquote.__enum__=c;c.Backslash=
["Backslash",73];c.Backslash.toString=e;c.Backslash.__enum__=c;c.Backspace=["Backspace",74];c.Backspace.toString=e;c.Backspace.__enum__=c;c.CapsLock=["CapsLock",75];c.CapsLock.toString=e;c.CapsLock.__enum__=c;c.Comma=["Comma",76];c.Comma.toString=e;c.Comma.__enum__=c;c.Command=["Command",77];c.Command.toString=e;c.Command.__enum__=c;c.Control=["Control",78];c.Control.toString=e;c.Control.__enum__=c;c.Delete=["Delete",79];c.Delete.toString=e;c.Delete.__enum__=c;c.End=["End",80];c.End.toString=e;c.End.__enum__=
c;c.Enter=["Enter",81];c.Enter.toString=e;c.Enter.__enum__=c;c.Equals=["Equals",82];c.Equals.toString=e;c.Equals.__enum__=c;c.Escape=["Escape",83];c.Escape.toString=e;c.Escape.__enum__=c;c.Home=["Home",84];c.Home.toString=e;c.Home.__enum__=c;c.Insert=["Insert",85];c.Insert.toString=e;c.Insert.__enum__=c;c.LeftBracket=["LeftBracket",86];c.LeftBracket.toString=e;c.LeftBracket.__enum__=c;c.Minus=["Minus",87];c.Minus.toString=e;c.Minus.__enum__=c;c.PageDown=["PageDown",88];c.PageDown.toString=e;c.PageDown.__enum__=
c;c.PageUp=["PageUp",89];c.PageUp.toString=e;c.PageUp.__enum__=c;c.Period=["Period",90];c.Period.toString=e;c.Period.__enum__=c;c.Quote=["Quote",91];c.Quote.toString=e;c.Quote.__enum__=c;c.RightBracket=["RightBracket",92];c.RightBracket.toString=e;c.RightBracket.__enum__=c;c.Semicolon=["Semicolon",93];c.Semicolon.toString=e;c.Semicolon.__enum__=c;c.Shift=["Shift",94];c.Shift.toString=e;c.Shift.__enum__=c;c.Slash=["Slash",95];c.Slash.toString=e;c.Slash.__enum__=c;c.Space=["Space",96];c.Space.toString=
e;c.Space.__enum__=c;c.Tab=["Tab",97];c.Tab.toString=e;c.Tab.__enum__=c;c.Menu=["Menu",98];c.Menu.toString=e;c.Menu.__enum__=c;c.Search=["Search",99];c.Search.toString=e;c.Search.__enum__=c;c.Unknown=function(a){a=["Unknown",100,a];a.__enum__=c;a.toString=e;return a};var Mb=function(){this.init(0,null)};Mb.__name__=!0;Mb.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Mb};var I={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"],Left:["Left",0]};I.Left.toString=e;I.Left.__enum__=
I;I.Middle=["Middle",1];I.Middle.toString=e;I.Middle.__enum__=I;I.Right=["Right",2];I.Right.toString=e;I.Right.__enum__=I;I.Unknown=function(a){a=["Unknown",3,a];a.__enum__=I;a.toString=e;return a};var ba={__ename__:!0,__constructs__:["Default","Button","None"],Default:["Default",0]};ba.Default.toString=e;ba.Default.__enum__=ba;ba.Button=["Button",1];ba.Button.toString=e;ba.Button.__enum__=ba;ba.None=["None",2];ba.None.toString=e;ba.None.__enum__=ba;var Nb=function(){this.init(0,0,0,null)};Nb.__name__=
!0;Nb.prototype={init:function(a,b,d,c){this.id=a;this.viewX=b;this.viewY=d;this.button=c},__class__:Nb};var La={__ename__:!0,__constructs__:["Mouse","Touch"]};La.Mouse=function(a){a=["Mouse",0,a];a.__enum__=La;a.toString=e;return a};La.Touch=function(a){a=["Touch",1,a];a.__enum__=La;a.toString=e;return a};var Ob=function(){this.init(0,0,0,null,null)};Ob.__name__=!0;Ob.prototype={init:function(a,b,d,c,f){this.id=a;this.viewX=b;this.viewY=d;this.hit=c;this.source=f;this._stopped=!1},__class__:Ob};
var Pb=function(a){this.id=a;this._source=La.Touch(this)};Pb.__name__=!0;Pb.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Pb};var hb=function(){};hb.__name__=!0;hb.max=function(a,b){return a>b?a:b};var Ib=function(){this.identity()};Ib.__name__=!0;Ib.prototype={set:function(a,b,d,c,f,g){this.m00=a;this.m01=d;this.m02=f;this.m10=b;this.m11=c;this.m12=g},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,c,f){var g=Math.sin(f),f=Math.cos(f);this.set(f*d,g*d,-g*c,
f*c,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,d){var c=this.determinant();if(0==c)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/c;d.y=(b*this.m00-a*this.m10)/c;return!0},__class__:Ib};var Ka=function(a,b,d,c){null==c&&(c=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,c)};Ka.__name__=!0;Ka.prototype={set:function(a,b,d,
c){this.x=a;this.y=b;this.width=d;this.height=c},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},get_right:function(){return this.x+this.width},get_bottom:function(){return this.y+this.height},__class__:Ka,__properties__:{get_bottom:"get_bottom",get_right:"get_right"}};var O=function(){};O.__name__=!0;O.__interfaces__=[Ja];O.prototype=
{__class__:O};var pa=function(a,b){var d=this;this.manifest=b;this._platform=a;this.promise=new kb;this._bytesLoaded=new U;this._pack=new lb(b,this);var c=ka.array(b);if(0==c.length)this.handleSuccess();else{for(var f=new U,g=0;g<c.length;){var e=c[g];++g;var q=f.get(e.name);null==q&&(q=[],f.set(e.name,q));q.push(e)}this._assetsRemaining=ka.count(f);for(c=f.iterator();c.hasNext();)f=[c.next()],this.pickBestEntry(f[0],function(a){return function(c){if(null!=c){var h=b.getFullURL(c);try{d.loadEntry(h,
c)}catch(f){d.handleError(c,"Unexpected error: "+D.string(f))}h=d.promise;h.set_total(h._total+c.bytes)}else c=a[0][0],pa.isAudio(c.format)?d.handleLoad(c,Z.getInstance()):d.handleError(c,"Could not find a supported format to load")}}(f))}};pa.__name__=!0;pa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};pa.prototype={pickBestEntry:function(a,b){this.getAssetFormats(function(d){for(var c=0;c<d.length;){var f=d[c];++c;for(var g=0;g<a.length;){var e=
a[g];++g;if(e.format==f){b(e);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var d;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:d=this._pack.sounds;break;case 13:d=this._pack.files}d.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,
b){this._bytesLoaded.set(a.name,b);for(var d=0,c=this._bytesLoaded.iterator();c.hasNext();)var f=c.next(),d=d+f;this.promise.set_progress(d)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(P.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:pa};var lb=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new U;
this.sounds=new U;this.files=new U};lb.__name__=!0;lb.__interfaces__=[$a];lb.prototype={getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);if(null==d&&b)throw P.withFields("Missing texture",["name",a]);return d},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);if(null==d&&b)throw P.withFields("Missing file",["name",a]);return d},__class__:lb};var Ma=function(a){this._content=a};Ma.__name__=!0;Ma.__interfaces__=[ab];Ma.__super__=O;Ma.prototype=p(O.prototype,{toString:function(){return this._content},
__class__:Ma});var Qb=function(){};Qb.__name__=!0;Qb.prototype={__class__:Qb};var $=function(){this.down=new x;this.up=new x;this.backButton=new ma;this._keyStates=new R};$.__name__=!0;$.__interfaces__=[Qb];$.prototype={get_supported:function(){return!0},isDown:function(a){return this.isCodeDown(qa.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||
(this._keyStates.set(a,!0),$._sharedEvent.init($._sharedEvent.id+1,qa.toKey(a)),this.down.emit($._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),$._sharedEvent.init($._sharedEvent.id+1,qa.toKey(a)),this.up.emit($._sharedEvent))},__class__:$,__properties__:{get_supported:"get_supported"}};var Rb=function(){};Rb.__name__=!0;Rb.prototype={__class__:Rb};var W=function(a){this._pointer=a;this._source=La.Mouse(W._sharedEvent);this.down=new x;this.move=
new x;this.up=new x;this.scroll=new x;this._y=this._x=0;this._cursor=ba.Default;this._buttonStates=new R};W.__name__=!0;W.__interfaces__=[Rb];W.prototype={get_supported:function(){return!0},isDown:function(a){return this.isCodeDown(Na.toButtonCode(a))},submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,Na.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit(W._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,
b,this._source);this.move.emit(W._sharedEvent)},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,b,Na.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit(W._sharedEvent))},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(d);return!0},isCodeDown:function(a){return this._buttonStates.exists(a)},prepare:function(a,b,d){this._x=a;this._y=b;W._sharedEvent.init(W._sharedEvent.id+1,a,b,
d)},__class__:W,__properties__:{get_supported:"get_supported"}};var Sb=function(){};Sb.__name__=!0;Sb.prototype={__class__:Sb};var N=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new x;this.move=new x;this.up=new x;this._x=a;this._y=b;this._isDown=d};N.__name__=!0;N.__interfaces__=[Sb];N.prototype={submitDown:function(a,b,d){if(!this._isDown){this.submitMove(a,b,d);this._isDown=!0;var c=[],f=r.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_0;null!=
e&&c.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,d);for(a=0;a<c.length;)if(b=c[a],++a,b.onPointerDown(N._sharedEvent),N._sharedEvent._stopped)return;this.down.emit(N._sharedEvent)}},submitMove:function(a,b,d){if(!(a==this._x&&b==this._y)){var c=[],f=r.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_0;null!=e&&c.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,d);for(a=0;a<c.length;)if(b=c[a],++a,b.onPointerMove(N._sharedEvent),N._sharedEvent._stopped)return;this.move.emit(N._sharedEvent)}},
submitUp:function(a,b,d){if(this._isDown){this.submitMove(a,b,d);this._isDown=!1;var c=[],f=r.hitTest(j.root,a,b);if(null!=f){var g=f.owner;do{var e=g._compMap.Sprite_0;null!=e&&c.push(e);g=g.parent}while(null!=g)}this.prepare(a,b,f,d);for(a=0;a<c.length;)if(b=c[a],++a,b.onPointerUp(N._sharedEvent),N._sharedEvent._stopped)return;this.up.emit(N._sharedEvent)}},prepare:function(a,b,d,c){this._x=a;this._y=b;N._sharedEvent.init(N._sharedEvent.id+1,a,b,d,c)},__class__:N};var ra=function(a,b,d){this._x=
this._y=0;this._parent=null;this.rootX=this.rootY=0;this.root=a;this._width=b;this._height=d};ra.__name__=!0;ra.__interfaces__=[jb];ra.__super__=O;ra.prototype=p(O.prototype,{subTexture:function(a,b,d,c){d=this.root.createTexture(d,c);d._parent=this;d._x=a;d._y=b;d.rootX=this.rootX+a;d.rootY=this.rootY+b;return d},get_parent:function(){return this._parent},get_x:function(){return this._x},get_y:function(){return this._y},get_width:function(){return this._width},get_height:function(){return this._height},
__class__:ra,__properties__:{get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x",get_parent:"get_parent"}});var mb=function(){};mb.__name__=!0;mb.prototype={__class__:mb};var Ya=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new R;this._points=[];this.down=new x;this.move=new x;this.up=new x};Ya.__name__=!0;Ya.__interfaces__=[mb];Ya.prototype={get_supported:function(){return!0},submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var c=new Pb(a);
c.init(b,d);this._pointMap.set(a,c);this._points.push(c);null==this._pointerTouch&&(this._pointerTouch=c,this._pointer.submitDown(b,d,c._source));this.down.emit(c)}},submitMove:function(a,b,d){a=this._pointMap.get(a);null!=a&&(a.init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._source),this.move.emit(a))},submitUp:function(a,b,d){var c=this._pointMap.get(a);null!=c&&(c.init(b,d),this._pointMap.remove(a),s.remove(this._points,c),this._pointerTouch==c&&(this._pointerTouch=null,this._pointer.submitUp(b,
d,c._source)),this.up.emit(c))},__class__:Ya,__properties__:{get_supported:"get_supported"}};var nb=function(){};nb.__name__=!0;nb.__interfaces__=[Ja];var Z=function(){this._playback=new ob(this)};Z.__name__=!0;Z.__interfaces__=[nb];Z.getInstance=function(){null==Z._instance&&(Z._instance=new Z);return Z._instance};Z.__super__=O;Z.prototype=p(O.prototype,{__class__:Z});var rc=function(){};rc.__name__=!0;rc.__interfaces__=[la];var ob=function(a){this._sound=a;this.volume=new B(0);this._complete=new V(!0)};
ob.__name__=!0;ob.__interfaces__=[rc];ob.prototype={__class__:ob};var Za=function(){this.down=new x;this.move=new x;this.up=new x};Za.__name__=!0;Za.__interfaces__=[mb];Za.prototype={get_supported:function(){return!1},__class__:Za,__properties__:{get_supported:"get_supported"}};var Oa=function(){this._entries=[]};Oa.__name__=!0;Oa.__interfaces__=[la];Oa.prototype={addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new Tb(a,b,d))},addDisposingListener:function(a,b,d){var c=this;
this.addListener(a,b,function(a){c.dispose();d(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}this._entries=[]},__class__:Oa};var Tb=function(a,b,d){this.dispatcher=a;this.type=b;this.listener=d};Tb.__name__=!0;Tb.prototype={__class__:Tb};var pb=function(){};pb.__name__=!0;pb.__interfaces__=[Lb];pb.prototype={__class__:pb};var Ub=function(){};Ub.__name__=!0;Ub.prototype={__class__:Ub};var qb=function(){};qb.__name__=
!0;qb.__interfaces__=[Ub];qb.prototype={__class__:qb};var qa=function(){};qa.__name__=!0;qa.toKey=function(a){switch(a){case 65:return c.A;case 66:return c.B;case 67:return c.C;case 68:return c.D;case 69:return c.E;case 70:return c.F;case 71:return c.G;case 72:return c.H;case 73:return c.I;case 74:return c.J;case 75:return c.K;case 76:return c.L;case 77:return c.M;case 78:return c.N;case 79:return c.O;case 80:return c.P;case 81:return c.Q;case 82:return c.R;case 83:return c.S;case 84:return c.T;case 85:return c.U;
case 86:return c.V;case 87:return c.W;case 88:return c.X;case 89:return c.Y;case 90:return c.Z;case 48:return c.Number0;case 49:return c.Number1;case 50:return c.Number2;case 51:return c.Number3;case 52:return c.Number4;case 53:return c.Number5;case 54:return c.Number6;case 55:return c.Number7;case 56:return c.Number8;case 57:return c.Number9;case 96:return c.Numpad0;case 97:return c.Numpad1;case 98:return c.Numpad2;case 99:return c.Numpad3;case 100:return c.Numpad4;case 101:return c.Numpad5;case 102:return c.Numpad6;
case 103:return c.Numpad7;case 104:return c.Numpad8;case 105:return c.Numpad9;case 107:return c.NumpadAdd;case 110:return c.NumpadDecimal;case 111:return c.NumpadDivide;case 108:return c.NumpadEnter;case 106:return c.NumpadMultiply;case 109:return c.NumpadSubtract;case 112:return c.F1;case 113:return c.F2;case 114:return c.F3;case 115:return c.F4;case 116:return c.F5;case 117:return c.F6;case 118:return c.F7;case 119:return c.F8;case 120:return c.F9;case 121:return c.F10;case 122:return c.F11;case 123:return c.F12;
case 37:return c.Left;case 38:return c.Up;case 39:return c.Right;case 40:return c.Down;case 18:return c.Alt;case 192:return c.Backquote;case 220:return c.Backslash;case 8:return c.Backspace;case 20:return c.CapsLock;case 188:return c.Comma;case 15:return c.Command;case 17:return c.Control;case 46:return c.Delete;case 35:return c.End;case 13:return c.Enter;case 187:return c.Equals;case 27:return c.Escape;case 36:return c.Home;case 45:return c.Insert;case 219:return c.LeftBracket;case 189:return c.Minus;
case 34:return c.PageDown;case 33:return c.PageUp;case 190:return c.Period;case 222:return c.Quote;case 221:return c.RightBracket;case 186:return c.Semicolon;case 16:return c.Shift;case 191:return c.Slash;case 32:return c.Space;case 9:return c.Tab;case 16777234:return c.Menu;case 16777247:return c.Search}return c.Unknown(a)};qa.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;
case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;
case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;
case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;
case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var xa=function(){this._tickables=[]};xa.__name__=!0;xa.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_10;if(null!=d&&(d._realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(d=a.firstComponent;null!=d;){var c=d.next;0==(d._flags&1)&&(d._flags|=1,d.onStart());d.onUpdate(b);d=c}for(d=
a.firstChild;null!=d;)c=d.next,xa.updateEntity(d,b),d=c};xa.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}j.volume.update(a);xa.updateEntity(j.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),r.render(j.root,b),a.didRender())},__class__:xa};var Na=function(){};Na.__name__=!0;Na.toButton=function(a){switch(a){case 0:return I.Left;case 1:return I.Middle;case 2:return I.Right}return I.Unknown(a)};
Na.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};var Vb=function(){};Vb.__name__=!0;Vb.prototype={__class__:Vb};var rb=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};rb.__name__=!0;rb.__interfaces__=[pb];rb.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,d,c,f,g){this._canvasCtx.transform(a,b,d,c,f,g)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,d){this.drawSubTexture(a,
b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,c,f,g,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,d,c,f,g,e),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+c|0,a.rootY+f|0,g|0,e|0,b|0,d|0,g|0,e|0)},fillRect:function(a,b,d,c,f){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,d,c,f),this._canvasCtx.globalCompositeOperation=
"source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+D.string(a);this._canvasCtx.fillStyle="#"+D.string(a);this._canvasCtx.fillRect(b|0,d|0,c|0,f|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,d,c){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|
0,d|0,c|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},setTint:function(){},__class__:rb};var ya=function(a){this.graphics=new rb(a,!1);this._hasGPU=new V(!0)};ya.__name__=!0;ya.__interfaces__=[qb];ya.prototype={get_type:function(){return ca.Canvas},createTextureFromImage:function(a){a=new Pa(ya.CANVAS_TEXTURES?o.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},
willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:ya,__properties__:{get_type:"get_type"}};var sb=function(a,b,d){ra.call(this,a,b,d)};sb.__name__=!0;sb.__super__=ra;sb.prototype=p(ra.prototype,{__class__:sb});var Pa=function(a){this.image=a;this.width=a.width;this.height=a.height};Pa.__name__=!0;Pa.__interfaces__=[Vb];Pa.__super__=O;Pa.prototype=p(O.prototype,{createTexture:function(a,b){return new sb(this,a,b)},__class__:Pa});var y=function(a,
b){pa.call(this,a,b)};y.__name__=!0;y.detectImageFormats=function(a){var b=[i.PNG,i.JPG,i.GIF],d=2,c;c=window.document.createElement("img");c.onload=c.onerror=function(){1==c.width&&b.unshift(i.WEBP);--d;0==d&&a(b)};c.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f;f=window.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&b.unshift(i.JXR);--d;0==d&&a(b)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
y.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==v(a,a.canPlayType))return[];var b=new ea("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),d=window.navigator.userAgent;if(!C.get_supported()&&b.match(d))return[];for(var b=[{format:i.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:i.MP3,mimeType:"audio/mpeg"},{format:i.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:i.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:i.WAV,mimeType:"audio/wav"}],d=[],
c=0;c<b.length;){var f=b[c];++c;var g="";try{g=a.canPlayType(f.mimeType)}catch(e){}""!=g&&d.push(f.format)}return d};y.supportsBlob=function(){if(y._detectBlobSupport){y._detectBlobSupport=!1;if((new ea("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;y._URL=o.loadExtension("URL").value}return null!=y._URL&&null!=y._URL.createObjectURL};
y.__super__=pa;y.prototype=p(pa.prototype,{loadEntry:function(a,b){var d=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var c;c=window.document.createElement("img");var f=new Oa;f.addDisposingListener(c,"load",function(){y.supportsBlob()&&y._URL.revokeObjectURL(c.src);var a=d._platform.getRenderer().createTextureFromImage(c);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});f.addDisposingListener(c,"error",function(){d.handleError(b,"Failed to load image")});y.supportsBlob()?this.download(a,
b,"blob",function(a){c.src=y._URL.createObjectURL(a)}):c.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=d._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(C.get_supported())this.download(a,b,"arraybuffer",function(a){C.ctx.decodeAudioData(a,function(a){d.handleLoad(b,new C(a))},function(){d.handleLoad(b,Z.getInstance())})});else{var g;g=window.document.createElement("audio");
g.preload="auto";var e=++y._mediaRefCount;null==y._mediaElements&&(y._mediaElements=new R);y._mediaElements.set(e,g);f=new Oa;f.addDisposingListener(g,"canplaythrough",function(){y._mediaElements.remove(e);d.handleLoad(b,new Qa(g))});f.addDisposingListener(g,"error",function(){y._mediaElements.remove(e);var a=g.error.code;3==a||4==a?d.handleLoad(b,Z.getInstance()):d.handleError(b,"Failed to load audio: "+g.error.code)});f.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=
g.buffered.end(0)/g.duration;d.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}break;case 13:this.download(a,b,"text",function(a){d.handleLoad(b,new Ma(a))})}},getAssetFormats:function(a){var b=this;null==y._supportedFormats&&(y._supportedFormats=new kb,y.detectImageFormats(function(a){y._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(y.detectAudioFormats()).concat([i.Data]))}));y._supportedFormats.get(a)},download:function(a,b,d,c){var f=this,
g=null,e=null,i=0,k=!1,l=function(){k&&(k=!1,window.clearInterval(i))},L=3,j=function(){--L;return 0<=L?(e(),!0):!1},e=function(){l();null!=g&&g.abort();g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType=d;var e=0;g.onprogress=function(a){k||(k=!0,i=window.setInterval(function(){4!=g.readyState&&5E3<Date.now()-e&&!j()&&(l(),f.handleError(b,"Download stalled"))},1E3));e=Date.now();f.handleProgress(b,a.loaded)};g.onerror=function(){if(0!=g.status||!j())l(),f.handleError(b,"HTTP error "+g.status)};
g.onload=function(){var a=g.response;null==a&&(a=g.responseText);l();c(a)};g.send()};e()},__class__:y});var Xa=function(a,b){W.call(this,a);this._canvas=b};Xa.__name__=!0;Xa.__super__=W;Xa.prototype=p(W.prototype,{__class__:Xa});var Qa=function(a){this.audioElement=a};Qa.__name__=!0;Qa.__interfaces__=[nb];Qa.__super__=O;Qa.prototype=p(O.prototype,{__class__:Qa});var Wb=function(){};Wb.__name__=!0;Wb.prototype={__class__:Wb};var wa=function(a){var b=this;this._canvas=a;this.resize=new ma;this.scaleFactor=
wa.computeScaleFactor();1!=this.scaleFactor&&(o.setVendorStyle(this._canvas,"transform-origin","top left"),o.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));o.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){o.callLater(v(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",v(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new V(null);null!=window.orientation&&(window.addEventListener("orientationchange",
v(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new V(!1);o.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};wa.__name__=!0;wa.__interfaces__=[Wb];wa.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=o.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||
1136<a*b?1:a};wa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=window.document.documentElement,b=o.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=o.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],window.document).value,null!=a&&T.callMethod(window.document,a,[])},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();
this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var d=this.scaleFactor*a,c=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==c)return!1;this._canvas.width=d|0;this._canvas.height=c|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";o.callLater(function(){o.hideMobileBrowser();o.callLater(function(){b.height=window.innerHeight+
"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(o.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==o.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:wa,__properties__:{get_height:"get_height",get_width:"get_width"}};var o=function(){};o.__name__=!0;o.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};o.hideMobileBrowser=function(){window.scrollTo(1,0)};o.loadExtension=
function(a,b){null==b&&(b=window);var d=T.field(b,a);if(null!=d)return{prefix:"",field:a,value:d};for(var d=a.charAt(0).toUpperCase()+s.substr(a,1,null),c=0,f=o.VENDOR_PREFIXES;c<f.length;){var g=f[c];++c;var e=g+d,i=T.field(b,e);if(null!=i)return{prefix:g,field:e,value:i}}return{prefix:null,field:null,value:null}};o.loadFirstExtension=function(a,b){for(var d=0;d<a.length;){var c=a[d];++d;c=o.loadExtension(c,b);if(null!=c.field)return c}return{prefix:null,field:null,value:null}};o.polyfill=function(a,
b){null==b&&(b=window);var d=o.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};o.setVendorStyle=function(a,b,d){for(var a=a.style,c=0,f=o.VENDOR_PREFIXES;c<f.length;){var g=f[c];++c;a.setProperty("-"+g+"-"+b,d)}a.setProperty(b,d)};o.addVendorListener=function(a,b,d,c){for(var f=0,g=o.VENDOR_PREFIXES;f<g.length;){var e=g[f];++f;a.addEventListener(e+b,d,c)}a.addEventListener(b,d,c)};o.orientation=function(a){switch(a){case -90:case 90:return ia.Landscape;default:return ia.Portrait}};o.createEmptyCanvas=
function(a,b){var d;d=window.document.createElement("canvas");d.width=a;d.height=b;return d};o.createCanvas=function(a){var b=o.createEmptyCanvas(a.width,a.height),d=b.getContext("2d");d.save();d.globalCompositeOperation="copy";d.drawImage(a,0,0);d.restore();return b};o.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var C=function(a){this.buffer=
a};C.__name__=!0;C.__interfaces__=[nb];C.__properties__={get_supported:"get_supported"};C.get_supported=function(){if(C._detectSupport){C._detectSupport=!1;var a=o.loadExtension("AudioContext").value;null!=a&&(C.ctx=new a,C.gain=C.createGain(),C.gain.connect(C.ctx.destination),j.volume.watch(function(a){C.gain.gain.value=a}))}return null!=C.ctx};C.createGain=function(){return null!=C.ctx.createGain?C.ctx.createGain():C.ctx.createGainNode()};C.__super__=O;C.prototype=p(O.prototype,{__class__:C});var Xb=
function(){this._transitor=null};Xb.__name__=!0;Xb.__super__=w;Xb.prototype=p(w.prototype,{get_name:function(){return"Director_8"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;
return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_9;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_9;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:Xb,
__properties__:p(w.prototype.__properties__,{get_topScene:"get_topScene"})});var Yb=function(){};Yb.__name__=!0;Yb.__super__=w;Yb.prototype=p(w.prototype,{get_name:function(){return"Scene_9"},__class__:Yb});var ca={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"],Stage3D:["Stage3D",0]};ca.Stage3D.toString=e;ca.Stage3D.__enum__=ca;ca.WebGL=["WebGL",1];ca.WebGL.toString=e;ca.WebGL.__enum__=ca;ca.Canvas=["Canvas",2];ca.Canvas.toString=e;ca.Canvas.__enum__=ca;var pc=function(){};pc.__name__=!0;
pc.that=function(){};var Jb=function(){};Jb.__name__=!0;Jb.set=function(a,b,d){return d?a|b:a&~b};var kb=function(){this.success=new x;this.error=new x;this.progressChanged=new ma;this.hasResult=!1;this._total=this._progress=0};kb.__name__=!0;kb.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=
a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:kb,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var ma=function(a){J.call(this,a)};ma.__name__=!0;ma.__super__=J;ma.prototype=p(J.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==J.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):
this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ma});var Db=function(a){this.next=null;this.fn=a};Db.__name__=!0;Db.prototype={__class__:Db};var P=function(){};P.__name__=!0;P.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?s.substr(a,b+1,null):null};P.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?s.substr(a,0,b):a};P.getUrlExtension=function(a){var b=a.lastIndexOf("?");
0<=b&&(a=s.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=s.substr(a,b+1,null));return P.getFileExtension(a)};P.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};P.withFields=function(a,b){var d=b.length;if(0<d){for(var a=0<a.length?a+" [":a+"[",c=0;c<d;){0<c&&(a+=", ");var f=b[c],g=b[c+1];if(D.is(g,Error)){var e=g.stack;null!=e&&(g=e)}a+=f+"="+D.string(g);c+=2}a+="]"}return a};var Ra=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};Ra.__name__=
!0;Ra.delay=function(a,b){var d=new Ra(b);d.run=function(){d.stop();a()};return d};Ra.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Ra};var R=function(){this.h={}};R.__name__=!0;R.__interfaces__=[Ab];R.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:R};var ta=function(){this.h=
{};this.h.__keys__={}};ta.__name__=!0;ta.__interfaces__=[Ab];ta.prototype={set:function(a,b){var d=a.__id__||(a.__id__=++ta.count);this.h[d]=b;this.h.__keys__[d]=a},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},__class__:ta};var U=function(){this.h={}};U.__name__=!0;U.__interfaces__=[Ab];U.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+
a)},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return s.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:U};var oc=function(){};oc.__name__=!0;oc.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var fa=function(){};fa.__name__=!0;fa.parse=function(a){var b=m.createDocument();fa.doParse(a,0,b);return b};fa.doParse=
function(a,b,d){null==b&&(b=0);for(var c=null,f=1,g=1,e=null,i=0,k=0,l=0,j=a.charCodeAt(b),n=new Sa;j==j;){switch(f){case 0:switch(j){case 10:case 13:case 9:case 32:break;default:f=g;continue}break;case 1:switch(j){case 60:f=0;g=2;break;default:i=b;f=13;continue}break;case 13:60==j?(g=m.createPCData(n.b+s.substr(a,i,b-i)),n=new Sa,d.addChild(g),k++,f=0,g=2):38==j&&(n.addSub(a,i,b-i),f=18,g=13,i=b+1);break;case 17:93==j&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=m.createCData(s.substr(a,i,b-
i)),d.addChild(f),k++,b+=2,f=1);break;case 2:switch(j){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=s.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=s.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;f=15}i=b+1;break;case 63:f=14;i=b;break;case 47:if(null==d)throw"Expected node name";i=b+1;f=0;g=10;break;default:f=
3;i=b;continue}break;case 3:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(b==i)throw"Expected node name";c=m.createElement(s.substr(a,i,b-i));d.addChild(c);f=0;g=4;continue}break;case 4:switch(j){case 47:f=11;k++;break;case 62:f=9;k++;break;default:f=5;i=b;continue}break;case 5:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(i==b)throw"Expected attribute name";e=s.substr(a,i,b-i);if(c.exists(e))throw"Duplicate attribute";f=0;g=6;continue}break;
case 6:switch(j){case 61:f=0;g=7;break;default:throw"Expected =";}break;case 7:switch(j){case 34:case 39:f=8;i=b;break;default:throw'Expected "';}break;case 8:j==a.charCodeAt(i)&&(g=s.substr(a,i+1,b-i-1),c.set(e,g),f=0,g=4);break;case 9:i=b=fa.doParse(a,b,c);f=1;break;case 11:switch(j){case 62:f=1;break;default:throw"Expected >";}break;case 12:switch(j){case 62:return 0==k&&d.addChild(m.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==
j||95==j||45==j)){if(i==b)throw"Expected node name";if(s.substr(a,i,b-i)!=d.get_nodeName())throw"Expected </"+d.get_nodeName()+">";f=0;g=12;continue}break;case 15:45==j&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(d.addChild(m.createComment(s.substr(a,i,b-i))),b+=2,f=1);break;case 16:91==j?l++:93==j?l--:62==j&&0==l&&(d.addChild(m.createDocType(s.substr(a,i,b-i))),f=1);break;case 14:63==j&&62==a.charCodeAt(b+1)&&(b++,f=s.substr(a,i+1,b-i-2),d.addChild(m.createProcessingInstruction(f)),f=1);break;
case 18:59==j&&(i=s.substr(a,i,b-i),35==i.charCodeAt(0)?(i=120==i.charCodeAt(1)?D.parseInt("0"+s.substr(i,1,i.length-1)):D.parseInt(s.substr(i,1,i.length-1)),n.add(String.fromCharCode(i))):fa.escapes.exists(i)?n.add(fa.escapes.get(i)):n.b+=D.string("&"+i+";"),i=b+1,f=g)}j=Ea.fastCodeAt(a,++b)}1==f&&(i=b,f=13);if(13==f)return(b!=i||0==k)&&d.addChild(m.createPCData(n.b+s.substr(a,i,b-i))),b;throw"Unexpected end";};var K=function(){};K.__name__=!0;K.getClass=function(a){return a instanceof Array&&null==
a.__enum__?Array:a.__class__};K.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",c=2,f=a.length;c<f;)var g=c++,d=2!=g?d+(","+K.__string_rec(a[g],b)):d+K.__string_rec(a[g],b);return d+")"}d=a.length;c="[";b+="\t";for(f=0;f<d;)g=f++,c+=(0<g?",":"")+K.__string_rec(a[g],b);return c+"]"}try{c=
a.toString}catch(e){return"???"}if(null!=c&&c!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;d=null;c="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=b+d+" : "+K.__string_rec(a[d],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};K.__interfLoop=function(a,b){if(null==
a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var c=0,f=d.length;c<f;){var g=c++,g=d[g];if(g==b||K.__interfLoop(g,b))return!0}return K.__interfLoop(a.__super__,b)};K.__instanceof=function(a,b){if(null==b)return!1;switch(b){case wc:return(a|0)===a;case tc:return"number"==typeof a;case uc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case xc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof
b||K.__interfLoop(K.getClass(a),b)))return!0}else return!1;return b==yc&&null!=a.__name__||b==zc&&null!=a.__ename__?!0:a.__enum__==b}};var tb=function(){};tb.__name__=!0;tb.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};tb.getSessionStorage=function(){try{var a=window.sessionStorage;a.getItem("");return a}catch(b){return null}};var S=function(){this.keyboardNotes=new Zb(1);this.keyboardInputs=new $b(this.keyboardNotes)};S.__name__=!0;S.main=
function(){j.init();var a=window.document.getElementById("noWebAudio");if(C.get_supported())a.parentNode.removeChild(a),S.audioContext=C.ctx,S.instance=new S,sc.init("bootstrap",(ja=S.instance,v(ja,ja.assetsReady)),5925240);else throw a.className="","Could not create AudioContext. Sorry, but it looks like your browser does not support the Web-Audio APIs ;(";};S.prototype={assetsReady:function(a){l.setup(a);this.stageWidth=j._platform.getStage().get_width();this.stageHeight=j._platform.getStage().get_height();
this.setupFlambe(a);this.monoSynthUI=new ub(this.textureAtlas,this.keyboardNotes);this.scene.addChild((new k).add(this.monoSynthUI));this.monoSynth=new vb(S.audioContext.destination,this.keyboardNotes.noteFreq);this.initControl()},setupFlambe:function(a){var b=m.parse(a.getFile("sprites.xml").toString()),a=a.getTexture("sprites");this.textureAtlas=qc.parse(b,a);j.root.addChild(this.scene=new k);j.root.addChild(this.ui=new k);this.ui.add(this.uiContainer=new r);this.stageWidth=j._platform.getStage().get_width();
this.stageHeight=j._platform.getStage().get_height();this.sceneContainer=new r;this.camera=new bb;this.scene.add(this.sceneContainer).add(this.camera).addChild(this.sceneBackgroundLayer=new k).addChild(this.sceneContentLayer=new k).addChild(this.sceneUILayer=new k);this.cameraMouseControl=new db(this.camera);this.camera.behaviours.push(this.cameraMouseControl);this.cameraMouseControl.scrollZoom=!1;this.cameraMouseControl.set_enabled(!0);this.cameraZoomLimit=new eb(this.camera,0.5,1);this.camera.behaviours.push(this.cameraZoomLimit);
this.cameraZoomLimit.set_enabled(!0);this.camera.controller.zoom.set__(1);this.scene.addChild((new k).add(new fb(6710886,this.camera)),!1);j._platform.getStage().resize.connect(v(this,this.onResize))},initControl:function(){var a=this;this.settings=new ac;this.paramSerialiser=new wb(this.settings);var b=[this.monoSynth,this.paramSerialiser];this.initKeyboardInputs();this.monoSynthUI.output.outputLevel.value.addObservers(b,!0);var d=this.monoSynthUI.output.pitchBend;d.returnToDefault=!0;d.labelFormatter=
function(b){return d.defaultLabelFormatter(b*a.monoSynth.pitchBendRange/100)};d.value.addObservers(b,!0);var c=this.monoSynthUI.oscillators;c.osc0Type.value.addObservers(b,!0);c.osc0Level.value.addObservers(b,!0);c.osc0Pan.value.addObservers(b,!0);c.osc0Slide.value.addObservers(b,!0);c.osc0Random.value.addObservers(b,!0);c.osc0Detune.value.addObservers(b,!0);c.osc1Type.value.addObservers(b,!0);c.osc1Level.value.addObservers(b,!0);c.osc1Pan.value.addObservers(b,!0);c.osc1Slide.value.addObservers(b,
!0);c.osc1Random.value.addObservers(b,!0);c.osc1Detune.value.addObservers(b,!0);c.oscPhase.value.addObservers(b,!0);c=this.monoSynthUI.adsr;c.attack.value.addObservers(b,!0);c.decay.value.addObservers(b,!0);c.sustain.value.addObservers(b,!0);c.release.value.addObservers(b,!0);c=this.monoSynthUI.filter;c.type.value.addObservers(b,!0);c.frequency.value.addObservers(b,!0);c.Q.value.addObservers(b,!0);c.attack.value.addObservers(b,!0);c.release.value.addObservers(b,!0);c.range.value.addObservers(b,!0);
c=this.monoSynthUI.distortion;c.pregain.value.addObservers(b,!0);c.waveshaperAmount.value.addObservers(b,!0);c.bits.value.addObservers(b,!0);c.rateReduction.value.addObservers(b,!0);c=this.monoSynthUI.delay;c.level.value.addObservers(b,!0);c.time.value.addObservers(b,!0);c.feedback.value.addObservers(b,!0);c.lfpFreq.value.addObservers(b,!0);c.lfpQ.value.addObservers(b,!0);this.presetIndex=-1;b=[];for(c=E.get_names();c.hasNext();){var f=c.next();b.push(f)}this.presetNames=b;this.paramSerialiser.restoreSession()||
this.paramSerialiser.deserialise(E.get(this.presetNames[this.presetIndex=0]))},nextPreset:function(a){this.presetIndex+=a;0>this.presetIndex?this.presetIndex=this.presetNames.length-1:this.presetIndex>=this.presetNames.length&&(this.presetIndex=0);this.paramSerialiser.deserialise(E.get(this.presetNames[this.presetIndex]));null},onKeyDown:function(a){var b=qa.toKeyCode(a.key);this.activeKeys[b]=!0;switch(a.key[1]){case 83:j._platform.getStage().requestFullscreen(!1);break;case 5:case 62:j._platform.getStage().requestFullscreen();
break;case 46:this.camera.controller.zoom.animateBy(0.2,0.25,H.quadOut);break;case 51:this.camera.controller.zoom.animateBy(-0.2,0.25,H.quadOut);break;case 52:null;break;case 53:this.paramSerialiser.randomiseAll();break;case 54:this.paramSerialiser.resetAll();break;case 68:this.nextPreset(1);break;case 70:this.nextPreset(-1);break;default:if(!this.activeKeys[17]&&!this.activeKeys[18])this.keyboardInputs.onQwertyKeyDown(b)}},onKeyUp:function(a){a=qa.toKeyCode(a.key);this.activeKeys[a]=!1;this.keyboardInputs.onQwertyKeyUp(a)},
initKeyboardInputs:function(){var a=this;if(j._platform.getKeyboard().get_supported()){this.activeKeys=Array(256);for(var b=0,c=this.activeKeys.length;b<c;)this.activeKeys[b++]=!1;j._platform.getKeyboard().up.connect(v(this,this.onKeyUp));j._platform.getKeyboard().down.connect(v(this,this.onKeyDown))}this.monoSynthUI.keyboard.keyDown.connect((ja=this.keyboardInputs,v(ja,ja.onNoteKeyDown)));this.monoSynthUI.keyboard.keyUp.connect((ja=this.keyboardInputs,v(ja,ja.onNoteKeyUp)));var h=function(b){a.monoSynth.noteOn(S.audioContext.currentTime,
0<=b&&128>b?a.keyboardNotes.noteFreq.noteFrequencies[b]:Math.NaN,0.8,!a.monoSynth.noteIsOn);a.monoSynthUI.keyboard.setNoteState(b,!0)};this.keyboardInputs.noteOn.connect(h);this.keyboardInputs.noteOff.connect(function(b){a.monoSynthUI.keyboard.setNoteState(b,!1);0<a.keyboardInputs.heldNotes.length?h(a.keyboardInputs.get_lastNote()):a.monoSynth.noteOff(S.audioContext.currentTime)})},onResize:function(){this.stageWidth=j._platform.getStage().get_width();this.stageHeight=j._platform.getStage().get_height()},
__class__:S};var sc=function(){};sc.__name__=!0;sc.init=function(a,b,c){null==c&&(c=0);var h=new ha(c,1,j._platform.getStage().get_height());j.root.add(h);var f=j.loadAssetPack(X.fromAssets(a));f.progressChanged.connect(function(){h.width.animateTo(f._progress/f._total*j._platform.getStage().get_width(),0.25,H.quadOut);h.height.set__(j._platform.getStage().get_height())});f.success.connect(function(a){h.width.animateTo(j._platform.getStage().get_width(),0.25,H.quadOut);Ra.delay(function(){b(a);h.dispose()},
250)}).once();f.error.connect(function(a){h.color=16711680;b(null);throw a;})};var vb=function(a,b){this.noteFreq=this.osc0Freq=this.osc1Freq=440;this._phase=this._pitchBend=this._osc0_detuneCents=this._osc1_detuneCents=0;this.pitchBendRange=1200;this.osc0_portamentoTime=this.osc0_randomCents=this.osc1_portamentoTime=this.osc1_randomCents=0;this.noteIsOn=!1;this.freqUtil=b;this.context=a.context;this.outputGain=this.context.createGain();this.outputGain.connect(a);this.outputGain.gain.value=1;this.delay=
new bc(this.context);this.delay._delay.connect(this.outputGain);this.filter=new cc(G.LOWPASS,null,null,this.context);this.filter.biquad.connect(this.delay._level);this.filter.biquad.connect(this.outputGain);this.distortionGroup=new dc(this.context);this.distortionGroup.crusher.node.connect(this.filter.biquad);this.adsr=new ec(this.context,null,this.distortionGroup.pregain);this.setupOscillators()};vb.__name__=!0;vb.__interfaces__=[Fa];vb.prototype={setupOscillators:function(){this.phaseDelay=this.context.createDelay(1/
this.freqUtil.noteFrequencies[0]);this.phaseDelay.connect(this.adsr.node,0);var a;a=this.context.createPanner();a.panningModel="equalpower";var b=1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);a.setPosition(Math.sin(0),0,Math.sin(b));0;this.osc0Pan=a;a=this.context.createPanner();a.panningModel="equalpower";b=1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);a.setPosition(Math.sin(0),0,Math.sin(b));0;this.osc1Pan=a;this.osc0Pan.connect(this.phaseDelay);this.osc1Pan.connect(this.adsr.node);
this.osc0Level=this.context.createGain();this.osc1Level=this.context.createGain();this.osc0Level.connect(this.osc0Pan);this.osc1Level.connect(this.osc1Pan);this.osc0=new xb(this.context,this.osc0Level);this.osc1=new xb(this.context,this.osc1Level)},noteOn:function(a,b,c,h){null==h&&(h=!1);null==c&&(c=1);this.noteFreq=this.osc0Freq=this.osc1Freq=b;var b=this._osc0_detuneCents,f=this._osc1_detuneCents;0<this.osc0_randomCents&&(b+=this.osc0_randomCents*(Math.random()-0.5));0<this.osc1_randomCents&&(f+=
this.osc1_randomCents*(Math.random()-0.5));if(0!=this._pitchBend)var g=this._pitchBend*this.pitchBendRange,b=b+g,f=f+g;0!=b&&(this.osc0Freq=this.freqUtil.detuneFreq(this.osc0Freq,b));0!=f&&(this.osc1Freq=this.freqUtil.detuneFreq(this.osc1Freq,f));b=1/this.osc0Freq*this._phase;this.phaseDelay.delayTime.cancelScheduledValues(a);0<this.osc0_portamentoTime?0<b?(this.phaseDelay.delayTime.setValueAtTime(this.phaseDelay.delayTime.value,a),this.phaseDelay.delayTime.exponentialRampToValueAtTime(b,a+this.osc0_portamentoTime)):
this.phaseDelay.delayTime.setValueAtTime(b,a):this.phaseDelay.delayTime.setValueAtTime(b,a);b=this.osc0.get_oscillator();f=this.osc0Freq;g=this.osc0_portamentoTime;b.frequency.cancelScheduledValues(a);0<g&&!h&&f!=b.frequency.value?(b.frequency.setValueAtTime(b.frequency.value,a),b.frequency.exponentialRampToValueAtTime(f,a+g)):b.frequency.setValueAtTime(f,a);b=this.osc1.get_oscillator();f=this.osc1Freq;g=this.osc1_portamentoTime;b.frequency.cancelScheduledValues(a);0<g&&!h&&f!=b.frequency.value?(b.frequency.setValueAtTime(b.frequency.value,
a),b.frequency.exponentialRampToValueAtTime(f,a+g)):b.frequency.setValueAtTime(f,a);if(!this.noteIsOn||h)this.adsr.on(a,c,h),this.filter.on(a,h);this.noteIsOn=!0},noteOff:function(a){var b=this.adsr.off(a);this.filter.off(a);this.osc0.get_oscillator().frequency.cancelScheduledValues(b);this.osc1.get_oscillator().frequency.cancelScheduledValues(b);this.phaseDelay.delayTime.cancelScheduledValues(b);this.noteIsOn=!1},onParameterChange:function(a){var b=this.context.currentTime,c=a.getValue();switch(a.name){case "outputLevel":this.outputGain.gain.setValueAtTime(c,
b);break;case "osc0Type":this.osc0.set_type(c|0);break;case "osc0Level":this.osc0Level.gain.setValueAtTime(c,b);break;case "osc0Pan":a=3.141592653589793*c/2;b=a+1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);this.osc0Pan.setPosition(Math.sin(a),0,Math.sin(b));c;break;case "osc0Slide":this.osc0_portamentoTime=c;break;case "osc0Detune":this.set_osc0_detuneCents(c|0);break;case "osc0Random":this.osc0_randomCents=c;break;case "osc1Type":this.osc1.set_type(c|0);break;case "osc1Level":this.osc1Level.gain.setValueAtTime(c,
b);break;case "osc1Pan":a=3.141592653589793*c/2;b=a+1.5707963267948966;1.5707963267948966<b&&(b=3.141592653589793-b);this.osc1Pan.setPosition(Math.sin(a),0,Math.sin(b));c;break;case "osc1Slide":this.osc1_portamentoTime=c;break;case "osc1Detune":this.set_osc1_detuneCents(c|0);break;case "osc1Random":this.osc1_randomCents=c;break;case "oscPhase":this.set_phase(c);break;case "pitchBend":this.set_pitchBend(-c);break;case "adsrAttack":this.adsr.attack=c;break;case "adsrDecay":this.adsr.decay=c;break;case "adsrSustain":this.adsr.sustain=
c;break;case "adsrRelease":this.adsr.release=c;break;case "filterType":this.filter.biquad.type=G.get(0==(c|0)?G.LOWPASS:G.HIGHPASS);break;case "filterFrequency":this.filter.set_frequency(c);break;case "filterQ":this.filter.set_q(c);break;case "filterAttack":this.filter.envAttack=c;break;case "filterRelease":this.filter.envRelease=c;break;case "filterRange":this.filter.envRange=c;break;case "distortionPregain":this.distortionGroup.pregain.gain.setValueAtTime(1+c,b);break;case "distortionWaveshaperAmount":-1>
c?c=-1:1<c&&(c=1);fc.getDistortionCurve(c,this.distortionGroup.waveshaper.curve);c;break;case "distortionBits":this.distortionGroup.crusher.set_bits(c);break;case "distortionRateReduction":this.distortionGroup.crusher.set_rateReduction(c);break;case "delayTime":this.delay._delay.delayTime.setValueAtTime(c,b);break;case "delayLevel":this.delay._level.gain.setValueAtTime(c,b);break;case "delayFeedback":this.delay._feedback.gain.setValueAtTime(c,b);break;case "delayLFPFreq":this.delay._lpf.frequency.setValueAtTime(c,
b);break;case "delayLFPQ":this.delay._lpf.Q.setValueAtTime(c,b)}},set_phase:function(a){var b=this.context.currentTime;this.phaseDelay.delayTime.cancelScheduledValues(b);this.phaseDelay.delayTime.setValueAtTime(1/this.noteFreq*a,b);return this._phase=a},set_pitchBend:function(a){-1>a?a=-1:1<a&&(a=1);if(this.noteIsOn){var b=(a-this._pitchBend)*this.pitchBendRange,c=this.freqUtil.detuneFreq(this.osc0Freq,b),b=this.freqUtil.detuneFreq(this.osc1Freq,b),h=this.context.currentTime;this.osc0.get_oscillator().frequency.cancelScheduledValues(h);
this.osc0.get_oscillator().frequency.exponentialRampToValueAtTime(c,h+0.016666666666666666);this.osc1.get_oscillator().frequency.cancelScheduledValues(h);this.osc1.get_oscillator().frequency.exponentialRampToValueAtTime(b,h+0.016666666666666666);this.osc0Freq=c;this.osc1Freq=b}return this._pitchBend=a},set_osc0_detuneCents:function(a){-100>a?a=-100:100<a&&(a=100);if(this.noteIsOn){var b=this.freqUtil.detuneFreq(this.osc0Freq,a-this._osc0_detuneCents),c=this.context.currentTime;this.osc0.get_oscillator().frequency.cancelScheduledValues(c);
this.osc0.get_oscillator().frequency.exponentialRampToValueAtTime(b,c+0.016666666666666666);this.osc0Freq=b}return this._osc0_detuneCents=a},set_osc1_detuneCents:function(a){-100>a?a=-100:100<a&&(a=100);if(this.noteIsOn){var b=this.freqUtil.detuneFreq(this.osc1Freq,a-this._osc1_detuneCents),c=this.context.currentTime;this.osc1.get_oscillator().frequency.cancelScheduledValues(c);this.osc1.get_oscillator().frequency.exponentialRampToValueAtTime(b,c+0.016666666666666666);this.osc1Freq=b}return this._osc1_detuneCents=
a},__class__:vb,__properties__:{set_osc1_detuneCents:"set_osc1_detuneCents",set_osc0_detuneCents:"set_osc0_detuneCents",set_pitchBend:"set_pitchBend",set_phase:"set_phase"}};var wb=function(a){var b=this;this.settings=a;this.map=new U;window.addEventListener("beforeunload",function(){b.storeSession()})};wb.__name__=!0;wb.__interfaces__=[Fa];wb.prototype={restoreSession:function(){var a=this.settings.session.getItem("monosynth_sessionParameters");return null!=a?(this.deserialise(a),!0):!1},storeSession:function(){this.settings.setSessionData("monosynth_sessionParameters",
this.serialise())},onParameterChange:function(a){this.map.exists(a.name)||this.map.set(a.name,a)},resetAll:function(){for(var a=this.map.keys();a.hasNext();)this.map.get(a.next()).setToDefault()},randomiseAll:function(a){null==a&&(a=1);for(var b=this.map.keys();b.hasNext();){var c=this.map.get(b.next()),h=c.getValue(!0),h=h+2*(Math.random()-0.5)*a;0>h?h=-h:1<h&&(h-=1);c.setValue(h,!0)}},serialise:function(){for(var a={},b=this.map.keys();b.hasNext();){var c=b.next();a[c]=this.map.get(c).normalisedValue}return JSON.stringify(a)},
deserialise:function(a,b){null==b&&(b=!1);for(var c=JSON.parse(a),h=0,f=T.fields(c);h<f.length;){var g=f[h];++h;if(this.map.exists(g)){var e=D.parseFloat(T.field(c,g));b?this.map.get(g).setDefault(e,!0):this.map.get(g).setValue(e,!0)}}},__class__:wb};var E=function(){};E.__name__=!0;E.__properties__={get_names:"get_names"};E.get_names=function(){E.init();return E.presets.keys()};E.get=function(a){E.init();return E.presets.get(a)};E.init=function(){null==E.presets&&(E.presets=new U,E.presets.set("Squasaw",
'{"outputLevel":0.4599999999999995, "pitchBend":0.5, "osc0Type":0.6666666666666666, "osc0Level":0.43999999999999995, "osc0Pan":0.5, "osc0Slide":0.0990990990990991, "osc0Random":0.060000000000000005, "osc0Detune":0.5, "osc1Type":0.31250000000000006, "osc1Level":0.43999999999999995, "osc1Pan":0.5, "osc1Slide":0.05999999999999996, "osc1Random":0.059999999999999984, "osc1Detune":0.5, "oscPhase":0, "adsrAttack":0.01599999999999999, "adsrDecay":0.029999999999999968, "adsrSustain":0.5800000000000003, "adsrRelease":0.03500000000000001, "filterType":0, "filterFrequency":0.06000000000000005, "filterQ":0.39999999999999947, "filterAttack":0.02299999999999998, "filterRelease":0.03, "filterRange":1, "distortionPregain":0, "distortionWaveshaperAmount":0.7600000000000002, "distortionBits":0.4782608695652174, "distortionRateReduction":0, "delayLevel":0.44999999999999957, "delayTime":0.2329332933293329, "delayFeedback":0.30002500250025005, "delayLFPFreq":0.22999999999999926, "delayLFPQ":0 }'),
E.presets.set("Mesanoir",'{"outputLevel":0.35499718878418207,"pitchBend":0.5,"osc0Type":0.07624358251883545,"osc0Level":0.48556221509352326,"osc0Pan":0.09680561296641832,"osc0Slide":0.07077055245319075,"osc0Random":0.4575806651264429,"osc0Detune":0.8025450077839196,"osc1Type":0.006721058571389937,"osc1Level":0.8622063202783465,"osc1Pan":0.49720164434984326,"osc1Slide":0.2541634194334752,"osc1Random":0.5048075593076646,"osc1Detune":0.12225819798186421,"oscPhase":0.38200558442622423,"adsrAttack":0.7889877760782837,"adsrDecay":0.48192048855125913,"adsrSustain":0.9429306462407112,"adsrRelease":0.1279276450164617,"filterType":0.24608794087544084,"filterFrequency":0.19239046958461392,"filterQ":0.970282814583691,"filterAttack":0.2982791615650058,"filterRelease":0.0030650437809527364,"filterRange":0.7127542118541896,"distortionPregain":0.3336319421604276,"distortionWaveshaperAmount":0.006667260080575943,"distortionBits":0.47723340376725654,"distortionRateReduction":0.04437419539317489,"delayLevel":0.2907389444857835,"delayTime":0.6230580973534239,"delayFeedback":0.5186913178583821,"delayLFPFreq":0.20329118954390266,"delayLFPQ":0.47996358598494304}'),
E.presets.set("Waaaaahp",'{"outputLevel":0.46341293396428185,"pitchBend":0.5,"osc0Type":0.28064297067386834,"osc0Level":0.1763532031327486,"osc0Pan":0.3412646828964354,"osc0Slide":0.4078379269471175,"osc0Random":0.1384059335105121,"osc0Detune":0.34210485965013504,"osc1Type":0.20411056885495782,"osc1Level":0.350563233718276,"osc1Pan":0.7297513120062648,"osc1Slide":0.7983276528088159,"osc1Random":0.012613496277481318,"osc1Detune":0.34069081442430615,"oscPhase":0.3753971047885717,"adsrAttack":0.12518607841804621,"adsrDecay":0.21071386579424134,"adsrSustain":0.43955529714003205,"adsrRelease":0.06789803653955451,"filterType":0.2604490057565272,"filterFrequency":0.022565599996596575,"filterQ":0.8418617065744975,"filterAttack":0.13229004982858905,"filterRelease":0.49194553755223747,"filterRange":0.8064281712286174,"distortionPregain":0.08015941549092531,"distortionWaveshaperAmount":0.5855826642364264,"distortionBits":0.7561208223227576,"distortionRateReduction":0.23606798753142325,"delayLevel":0.6047618193551898,"delayTime":0.4965090568645252,"delayFeedback":0.7778823028968429,"delayLFPFreq":0.492137948796153,"delayLFPQ":0.12913286697766393}'),
E.presets.set("LongTime",'{"outputLevel":0.5423528824560349,"pitchBend":0.5,"osc0Type":0.508481303229928,"osc0Level":0.2903344490192831,"osc0Pan":0.16695982096716755,"osc0Slide":0.008216620494217342,"osc0Random":0.39255549060180783,"osc0Detune":0.22689511254429817,"osc1Type":0.216489977572627,"osc1Level":0.1760277607850732,"osc1Pan":0.8199999999999998,"osc1Slide":0.6387598080778711,"osc1Random":0.50296380976215,"osc1Detune":0.5358693818561733,"oscPhase":0.42055099362507464,"adsrAttack":0.5636245479620992,"adsrDecay":1,"adsrSustain":0.7999999999999998,"adsrRelease":0.2141217650845646,"filterType":0.04347413685172796,"filterFrequency":0.019138042908162144,"filterQ":0.12306910322332176,"filterAttack":0.22199134798720488,"filterRelease":0.04813646869733934,"filterRange":0.7784414859488606,"distortionPregain":0.19512580804526802,"distortionWaveshaperAmount":0.13458260847255588,"distortionBits":0.6648063724253165,"distortionRateReduction":0.5591793827526272,"delayLevel":0.7884579640813172,"delayTime":0.7814509899823321,"delayFeedback":0.6427875032929922,"delayLFPFreq":0.09458289267495279,"delayLFPQ":0.34001128153228544}'),
E.presets.set("Wet Sine",'{"outputLevel":1,"pitchBend":0.5,"osc0Type":0,"osc0Level":0.5,"osc0Pan":0.5,"osc0Slide":0.0990990990990991,"osc0Random":0.04,"osc0Detune":0.5,"osc1Type":0,"osc1Level":0.5,"osc1Pan":0.5,"osc1Slide":0.0990990990990991,"osc1Random":0.04,"osc1Detune":0.5,"oscPhase":0,"adsrAttack":0.07999999999999999,"adsrDecay":0.15,"adsrSustain":0.49999999999999956,"adsrRelease":1,"filterType":0,"filterFrequency":0.17999999999999935,"filterQ":0.8399999999999999,"filterAttack":0.13499999999999998,"filterRelease":0.7300000000000003,"filterRange":1,"distortionPregain":0.09999999999999999,"distortionWaveshaperAmount":0.7000000000000002,"distortionBits":0.13826086956521716,"distortionRateReduction":0,"delayLevel":0.14999999999999986,"delayTime":0.9729332933293332,"delayFeedback":0.4500250025002502,"delayLFPFreq":0.19999999999999982,"delayLFPQ":0}'),
E.presets.set("Floppy Bits",'{"outputLevel":0.4399999999999995,"pitchBend":0.5,"osc0Type":0,"osc0Level":1,"osc0Pan":0.5,"osc0Slide":0.0990990990990991,"osc0Random":0,"osc0Detune":0.5,"osc1Type":0,"osc1Level":1,"osc1Pan":0.5,"osc1Slide":0.0990990990990991,"osc1Random":0,"osc1Detune":0.5,"oscPhase":0,"adsrAttack":0.21000000000000002,"adsrDecay":0.15,"adsrSustain":0.8999999999999999,"adsrRelease":1,"filterType":0,"filterFrequency":1,"filterQ":0.4999999999999998,"filterAttack":1,"filterRelease":0.21999999999999942,"filterRange":1,"distortionPregain":0.29000000000000004,"distortionWaveshaperAmount":0.37,"distortionBits":0.13826086956521716,"distortionRateReduction":0,"delayLevel":0.09999999999999985,"delayTime":0.9729332933293332,"delayFeedback":0.4500250025002502,"delayLFPFreq":0.19999999999999982,"delayLFPQ":0}'),
E.presets.set("Gentle Ben",'{"outputLevel":0.6799999999999998, "pitchBend":0.5, "osc0Type":0.37500000000000006, "osc0Level":0.5, "osc0Pan":0.43999999999999995, "osc0Slide":0.0990990990990991, "osc0Random":0.20000000000000004, "osc0Detune":0.5, "osc1Type":0.598214285714286, "osc1Level":0.5, "osc1Pan":0.56, "osc1Slide":0.0990990990990991, "osc1Random":0.2, "osc1Detune":0.5, "oscPhase":0.17999999999999997, "adsrAttack":0.03750352374993505, "adsrDecay":1, "adsrSustain":1, "adsrRelease":0.2919280948873624, "filterType":0, "filterFrequency":0.1599999999999993, "filterQ":0.8, "filterAttack":0.6719280948873626, "filterRelease":0.21496250072115589, "filterRange":0.9000000000000005, "distortionPregain":0, "distortionWaveshaperAmount":0.8600000000000003, "distortionBits":0.4782608695652174, "distortionRateReduction":0, "delayLevel":0.15999999999999995, "delayTime":0.16293329332933287, "delayFeedback":0.49999999999999956, "delayLFPFreq":1, "delayLFPQ":0.0999909999099991}'),
E.presets.set("WTFTW",'{"outputLevel":0.4399999999999996,"pitchBend":0.5,"osc0Type":0.9464285714285714,"osc0Level":0.4668754586018622,"osc0Pan":0.434224143885076,"osc0Slide":0.09999999999999999,"osc0Random":0.1353575261309743,"osc0Detune":0.5,"osc1Type":0,"osc1Level":0.55,"osc1Pan":0.5818778711184858,"osc1Slide":0.7860790734147436,"osc1Random":0.4989718380384147,"osc1Detune":0.5,"oscPhase":0.6322048523835839,"adsrAttack":0.17999999999999947,"adsrDecay":0.5345427193678916,"adsrSustain":0.9099999999999999,"adsrRelease":0.3135172767948372,"filterType":0,"filterFrequency":0.7800000000000007,"filterQ":0.94,"filterAttack":0.3699999999999995,"filterRelease":0.9243289259783327,"filterRange":0.48999999999999955,"distortionPregain":0.49999999999999956,"distortionWaveshaperAmount":0.8739709560014308,"distortionBits":0.21000000000000005,"distortionRateReduction":0.2,"delayLevel":0.09999999999999974,"delayTime":0.33131938935235605,"delayFeedback":0.0666541256941855,"delayLFPFreq":0.43000000000000005,"delayLFPQ":0}'),
E.presets.set("OwOwOw",'{"outputLevel":0.4404992213845257,"pitchBend":0.5,"osc0Type":0.53176956916494,"osc0Level":0.2848998922854662,"osc0Pan":0.6553399509564042,"osc0Slide":0.3345249738357958,"osc0Random":0.3254045475460585,"osc0Detune":0.48,"osc1Type":0.5856871545048695,"osc1Level":0.34120628116652374,"osc1Pan":0.274271479975432,"osc1Slide":0.19665794456058805,"osc1Random":0.27338116569444537,"osc1Detune":0.46399999999999997,"oscPhase":0.5367797849141063,"adsrAttack":0.13585058337077552,"adsrDecay":0.4118536375463009,"adsrSustain":0.7993384519033133,"adsrRelease":0.24872226793430885,"filterType":0.9169524870812893,"filterFrequency":0.04,"filterQ":1,"filterAttack":0.13216184906661455,"filterRelease":0.6764560150503516,"filterRange":0.2090064475871618,"distortionPregain":0.16845860145986036,"distortionWaveshaperAmount":0.7897845552489162,"distortionBits":0.15361713754013176,"distortionRateReduction":0.47468311311677097,"delayLevel":0.3756582126766443,"delayTime":0.5380281316579925,"delayFeedback":0.18479999119415877,"delayLFPFreq":0.8414817627705634,"delayLFPQ":0.6816484755836427}'),
E.presets.set("Leadish",'{"outputLevel":0.38295858133584215,"pitchBend":0.5,"osc0Type":0.5938830460155663,"osc0Level":0.5741079380363225,"osc0Pan":0.5,"osc0Slide":0.048732493184506884,"osc0Random":0.19387254383414923,"osc0Detune":0.5,"osc1Type":0.3392857142857143,"osc1Level":0.2815980485267937,"osc1Pan":0.5117302227392793,"osc1Slide":0.10685698390325825,"osc1Random":0.01588528836145997,"osc1Detune":0.499,"oscPhase":0.14331354821100817,"adsrAttack":0.15529628787189734,"adsrDecay":0.7664752448908985,"adsrSustain":0.6781206807121636,"adsrRelease":0.4241326441790896,"filterType":0,"filterFrequency":0.12000000000000001,"filterQ":0.5797061326913537,"filterAttack":0.4112402198649936,"filterRelease":0.3100000000000001,"filterRange":0.9099999999999999,"distortionPregain":0.6008890603668984,"distortionWaveshaperAmount":0.13999999999999999,"distortionBits":0.1382608695652172,"distortionRateReduction":0,"delayLevel":0.14624362844973773,"delayTime":0.12053697529227002,"delayFeedback":0.311054561883211,"delayLFPFreq":0.35068133769556864,"delayLFPQ":0.12999999999999995}'),
E.presets.set("Hubble",'{"outputLevel":0.4673323092423374,"pitchBend":0.5,"osc0Type":0.32187723594584483,"osc0Level":0.5501569783687592,"osc0Pan":0.035873363725841045,"osc0Slide":0.46743601735681295,"osc0Random":0.5535920813307174,"osc0Detune":0.5,"osc1Type":0.8837717605887779,"osc1Level":0.7479439487121999,"osc1Pan":0.15710694646462797,"osc1Slide":0.42825166909342927,"osc1Random":0.648777486756444,"osc1Detune":0.48000000000000004,"oscPhase":0.7499087216891347,"adsrAttack":0.42545380499213925,"adsrDecay":0.055507498793303967,"adsrSustain":0.5419561782851814,"adsrRelease":0.6898205606464309,"filterType":0.2519419346936047,"filterFrequency":0.34113304095342756,"filterQ":0.40043697291985136,"filterAttack":0.6723704796470709,"filterRelease":0.7224151427485048,"filterRange":0.6672021801024675,"distortionPregain":0.48588421270251314,"distortionWaveshaperAmount":0.5391920240223409,"distortionBits":0.4782608695652174,"distortionRateReduction":0.06000000000000014,"delayLevel":0.31409743022173675,"delayTime":0.4189383636324062,"delayFeedback":0.626016280371696,"delayLFPFreq":0.5011918721720574,"delayLFPQ":0.20447118736803485}'),
E.presets.set("Voyager",'{"outputLevel":0.596160045024007,"pitchBend":0.48438319687767045,"osc0Type":0.4999197233202217,"osc0Level":0.18356056366115814,"osc0Pan":0.4514487967826426,"osc0Slide":0.5665156216174365,"osc0Random":0.6446686258167036,"osc0Detune":0.5682883285917342,"osc1Type":0.2984360323420594,"osc1Level":0.22554069174453617,"osc1Pan":0.4376573327369988,"osc1Slide":0.2393585837478034,"osc1Random":0.9832042241469026,"osc1Detune":0.7423076857998967,"oscPhase":0.4472648433037101,"adsrAttack":0.41782711129635564,"adsrDecay":0.20043661259114742,"adsrSustain":0.9824869338423012,"adsrRelease":0.93405529389046,"filterType":0,"filterFrequency":0.4091029983200133,"filterQ":0.7449476217851041,"filterAttack":0.09563750846311381,"filterRelease":0.7517979797534644,"filterRange":0.5817121911421419,"distortionPregain":0.34397339383140246,"distortionWaveshaperAmount":0.3808828432671727,"distortionBits":0.8468644326228811,"distortionRateReduction":0.55675847357139,"delayLevel":0.5397429227456447,"delayTime":0.20590351169019483,"delayFeedback":0.7042214359156789,"delayLFPFreq":0.34564317250624277,"delayLFPQ":0.09628216465935173}'))};
var ac=function(){this.local=tb.getLocalStorage();this.session=tb.getSessionStorage()};ac.__name__=!0;ac.prototype={setSessionData:function(a,b){this.session.setItem(a,b)},__class__:ac};var ec=function(a,b,c){this.release=0.25;this.sustain=0.44;this.decay=0.2;this.attack=0.1;a=a.createGain();a.gain.value=0;null!=b&&b.connect(a);null!=c&&a.connect(c);this.node=a};ec.__name__=!0;ec.prototype={on:function(a,b,c){null==c&&(c=!1);null==b&&(b=1);null==a&&(a=0);var h=this.node,f=this.attack,g=this.decay,
e=this.sustain;1.0E-4>f&&(f=1.0E-4);1.0E-4>g&&(g=1.0E-4);h.gain.cancelScheduledValues(a);c&&h.gain.setValueAtTime(h.gain.value,a);h.gain.setTargetAtTime(b,a,Math.log(f+1)/4.605170185988092);1!=e&&(0<g?h.gain.setTargetAtTime(b*e,a+f,Math.log(g+1)/4.605170185988092):h.gain.setValueAtTime(b*e,a+f))},off:function(a){null==a&&(a=0);var b=this.node,c=this.release;1.0E-4>c&&(c=1.0E-4);b.gain.cancelScheduledValues(a);b.gain.setValueAtTime(b.gain.value,a);b.gain.setTargetAtTime(0,a,Math.log(c+1)/4.605170185988092);
return a+c},__class__:ec};var A=function(){};A.__name__=!0;A.get=function(a){switch(a){case A.SINE:return OscillatorTypeShim.SINE;case A.SQUARE:return OscillatorTypeShim.SQUARE;case A.SAWTOOTH:return OscillatorTypeShim.SAWTOOTH;case A.TRIANGLE:return OscillatorTypeShim.TRIANGLE;case A.CUSTOM:return OscillatorTypeShim.CUSTOM;default:return null}};var xb=function(a,b){this.osc=new R;var c;c=a.createOscillator();c.frequency.value=440;c.type=A.get(A.SINE);c.start(0);this.osc.set(A.SINE,c);c=a.createOscillator();
c.frequency.value=440;c.type=A.get(A.SQUARE);c.start(0);this.osc.set(A.SQUARE,c);c=a.createOscillator();c.frequency.value=440;c.type=A.get(A.SAWTOOTH);c.start(0);this.osc.set(A.SAWTOOTH,c);c=a.createOscillator();c.frequency.value=440;c.type=A.get(A.TRIANGLE);c.start(0);this.osc.set(A.TRIANGLE,c);this._type=0;this._output=b;this.connected=!1};xb.__name__=!0;xb.prototype={set_type:function(a){if(this._type!=a||!this.connected)this.connected=!0,this.osc.get(this._type).disconnect(0),this.osc.get(a).connect(this._output);
return this._type=a},get_oscillator:function(){return this.osc.get(this._type)},__class__:xb,__properties__:{get_oscillator:"get_oscillator",set_type:"set_type"}};var cc=function(a,b,c,h,f,e){null==c&&(c=1);null==b&&(b=8E3);this.envRelease=1;this.envAttack=0.1;this.envRange=1;this._frequency=b;this._q=c;this._gain=1;h=h.createBiquadFilter();h.type=G.get(a);h.frequency.value=b;h.Q.value=c;h.gain.value=0;null!=f&&f.connect(h);null!=e&&h.connect(e);this.biquad=h};cc.__name__=!0;cc.prototype={on:function(a,
b){null==b&&(b=!1);var c=Math.min(this._frequency+this.envRange*(8E3-this._frequency),8E3),h=this.biquad,f=this.envAttack;1.0E-4>f&&(f=1.0E-4);h.frequency.cancelScheduledValues(a);b?h.frequency.setValueAtTime(this._frequency,a):h.frequency.setValueAtTime(h.frequency.value,a);h.frequency.exponentialRampToValueAtTime(c,a+f)},off:function(a){var b=this.biquad,c=this.envRelease;1.0E-4>c&&(c=1.0E-4);b.frequency.cancelScheduledValues(a);b.frequency.setValueAtTime(b.frequency.value,a);b.frequency.setTargetAtTime(this._frequency,
a,Math.log(c+1)/4.605170185988092);return a+c},set_frequency:function(a){var b=this.biquad.context,c=b.sampleRate/2,b=b.currentTime;10>a?a=10:a>c&&(a=c);this.biquad.frequency.cancelScheduledValues(b);this.biquad.frequency.setValueAtTime(a,b);return this._frequency=a},set_q:function(a){1.0E-4>a?a=1.0E-4:1E3<a&&(a=1E3);var b=this.biquad.context.currentTime;this.biquad.Q.cancelScheduledValues(b);this.biquad.Q.setValueAtTime(a,b);return this._q=a},__class__:cc,__properties__:{set_q:"set_q",set_frequency:"set_frequency"}};
var G=function(){};G.__name__=!0;G.get=function(a){switch(a){case G.ALLPASS:return FilterTypeShim.ALLPASS;case G.BANDPASS:return FilterTypeShim.BANDPASS;case G.HIGHPASS:return FilterTypeShim.HIGHPASS;case G.HIGHSHELF:return FilterTypeShim.HIGHSHELF;case G.LOWPASS:return FilterTypeShim.LOWPASS;case G.LOWSHELF:return FilterTypeShim.LOWSHELF;case G.NOTCH:return FilterTypeShim.NOTCH;case G.PEAKING:return FilterTypeShim.PEAKING;default:return null}};var gc=function(a,b,c){this.sampleCount=this.tempLeft=
this.tempRight=0;this.context=a;this.sampleRate=a.sampleRate;this.set_bits(24);this.set_rateReduction(1);var h;try{h=a.createScriptProcessor()}catch(f){h=a.createScriptProcessor(4096)}null!=b&&b.connect(h);null!=c&&h.connect(c);this.node=h;this.node.onaudioprocess=v(this,this.crusherImpl)};gc.__name__=!0;gc.prototype={crusherImpl:function(a){for(var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),h=a.outputBuffer.getChannelData(0),a=a.outputBuffer.getChannelData(1),f=a.length,
e=this.exp,i=this.iexp,j=0,k=0,l=0;l<f;){var m=l++;this.sampleCount++;this.sampleCount>=this.samplesPerCycle&&(this.sampleCount=0,j=0.002*(Math.random()-0.5),k=0.002*(Math.random()-0.5),this.tempLeft=i*(e*b[m]+j|0),this.tempRight=i*(e*c[m]+k|0));h[m]=this.tempLeft;a[m]=this.tempRight}},set_bits:function(a){1>a?a=1:24<a&&(a=24);this._bits!=a&&(this.exp=Math.pow(2,a),this.iexp=1/this.exp);return this._bits=a},set_rateReduction:function(a){1>a?a=1:16<a&&(a=16);return this.samplesPerCycle=this._rateReduction=
a},__class__:gc,__properties__:{set_rateReduction:"set_rateReduction",set_bits:"set_bits"}};var dc=function(a){var b=this.pregain=a.createGain(),c;c=a.createWaveShaper();c.curve=new Float32Array(a.sampleRate|0);c.oversample="none";var h=0;-1>h?h=-1:1<h&&(h=1);fc.getDistortionCurve(h,c.curve);h;null!=b&&b.connect(c);this.waveshaper=c;this.crusher=new gc(a,this.waveshaper)};dc.__name__=!0;dc.prototype={__class__:dc};var bc=function(a,b){null==b&&(b=1);this._level=a.createGain();this._feedback=a.createGain();
this._delay=a.createDelay(b);this._level.gain.value=0.25;this._feedback.gain.value=0.5;this._lpf=a.createBiquadFilter();this._lpf.type=FilterTypeShim.LOWPASS;this._lpf.frequency.value=4E3;this._lpf.Q.value=1;this._level.connect(this._delay);this._delay.connect(this._lpf);this._lpf.connect(this._feedback);this._feedback.connect(this._delay)};bc.__name__=!0;bc.prototype={__class__:bc};var fc=function(){};fc.__name__=!0;fc.getDistortionCurve=function(a,b){null==a&&(a=0);if(-1>a||1<a)throw"RangeError";
var c;c=null==b?new Float32Array(44100):b;for(var h=c.length,f=2*a/(1-a),e,i=0;i<h;){var j=i++;e=-1+(j+j)/h;c[j]=(1+f)*e/(1+f*Math.abs(e))}return c};var l=function(){};l.__name__=!0;l.setup=function(a){l.Prime13=new na(a,"font/Prime13");l.Prime20=new na(a,"font/Prime20")};l.getField=function(a,b,c){null==c&&(c=0);null==b&&(b="Pack my box with five dozen liquor jugs.");var h=(c>>16&255)/255,f=(c>>8&255)/255,c=(c&255)/255,a=new Ba(a,b);a.set_pixelSnapping(!0);a.set_pointerEnabled(!1);a.setTint(h,f,
c);return a};var Ca=function(a,b,c){this.noteIndex=b;this.isSharp=c;z.call(this,a)};Ca.__name__=!0;Ca.__super__=z;Ca.prototype=p(z.prototype,{__class__:Ca});var yb=function(a,b){w.call(this);this.keyboardNotes=a;this.keyDown=new x;this.keyUp=new x;this.whiteKeyTexture=b.get("WhiteKey");this.blackKeyTexture=b.get("BlackKey")};yb.__name__=!0;yb.__super__=w;yb.prototype=p(w.prototype,{get_name:function(){return"KeyboardUI_1"},onAdded:function(){this.container=this.owner._compMap.Sprite_0;var a=this.getKeysData(this.keyboardNotes.startOctave,
4);this.noteIndexToKey=new R;var b=0;this.owner.addChild(this.naturals=new k);this.owner.addChild(this.sharps=new k);for(var c=0;c<a.length;){var h=a[c];++c;var f=h.index,e;e=new Ca(this.whiteKeyTexture,f,!1);e.x.set__(b);e.y.set__(0);this.noteIndexToKey.set(f,e);this.naturals.addChild((new k).add(e));e.get_pointerOut().connect(v(this,this.onKeyPointerOut));e.get_pointerMove().connect(v(this,this.onKeyPointerMove));e.get_pointerDown().connect(v(this,this.onKeyPointerDown));e.get_pointerUp().connect(v(this,
this.onKeyPointerUp));h.hasSharp&&(e=new Ca(this.blackKeyTexture,f+1,!0),e.x.set__(b+26),e.y.set__(0),this.noteIndexToKey.set(f+1,e),this.sharps.addChild((new k).add(e)),e.get_pointerOut().connect(v(this,this.onKeyPointerOut)),e.get_pointerMove().connect(v(this,this.onKeyPointerMove)),e.get_pointerDown().connect(v(this,this.onKeyPointerDown)),e.get_pointerUp().connect(v(this,this.onKeyPointerUp)));b+=41}this.heldKey=-1},onKeyPointerOut:function(a){!K.__instanceof(a.hit,Ca)&&-1!=this.heldKey&&(this.setKeyIsDown(this.noteIndexToKey.get(this.heldKey),
!1),this.pointerDown=!1,this.keyUp.emit(this.heldKey),this.heldKey=-1)},onKeyPointerMove:function(a){if(this.pointerDown=j._platform.getMouse().get_supported()&&j._platform.getMouse().isDown(I.Left)||!j._platform.getMouse().get_supported()&&j._platform.getTouch().get_supported())a=a.hit,this.heldKey!=a.noteIndex&&(this.setKeyIsDown(a,!0),this.keyDown.emit(a.noteIndex),-1!=this.heldKey&&(this.setKeyIsDown(this.noteIndexToKey.get(this.heldKey),!1),this.keyUp.emit(this.heldKey)),this.heldKey=a.noteIndex)},
onKeyPointerDown:function(a){a=a.hit;this.pointerDown=!0;this.heldKey!=a.noteIndex&&(this.heldKey=a.noteIndex,this.setKeyIsDown(a,!0),this.keyDown.emit(a.noteIndex))},onKeyPointerUp:function(a){a=a.hit;this.pointerDown=!1;-1!=this.heldKey&&this.heldKey==a.noteIndex&&(this.heldKey=-1,this.pointerDown=!1,this.setKeyIsDown(a,!1),this.keyUp.emit(a.noteIndex))},getKeysData:function(a,b){null==b&&(b=2);null==a&&(a=2);this.ocataves=b;return this.getUIKeyNoteData(a,b)},setNoteState:function(a,b){this.setKeyIsDown(this.noteIndexToKey.get(a),
b)},setKeyIsDown:function(a,b){b?a.alpha.set__(0.7):a.alpha.animateTo(1,0.16)},getUIKeyNoteData:function(a,b){null==b&&(b=2);null==a&&(a=0);for(var c=this.keyboardNotes.noteFreq.noteNameToIndex("C"+a),h=[],f=0;f<b;){var e=f++;h.push({index:c+12*e,hasSharp:!0});h.push({index:c+2+12*e,hasSharp:!0});h.push({index:c+4+12*e,hasSharp:!1});h.push({index:c+5+12*e,hasSharp:!0});h.push({index:c+7+12*e,hasSharp:!0});h.push({index:c+9+12*e,hasSharp:!0});h.push({index:c+11+12*e,hasSharp:!1})}return h},__class__:yb});
var ub=function(a,b){r.call(this);this.textureAtlas=a;this.keyboardNotes=b};ub.__name__=!0;ub.__super__=r;ub.prototype=p(r.prototype,{onAdded:function(){this.x.set__(-620);this.y.set__(-348);this.setupBackground();this.setupKeyboard();this.setupPanels()},setupBackground:function(){this.owner.addChild((new k).add(this.background=(new z(this.textureAtlas.get("BackPanelBack"))).disablePointer()));this.background.x.set__(-10)},setupKeyboard:function(){this.keyboard=new yb(this.keyboardNotes,this.textureAtlas);
this.owner.addChild((new k).add(this.keyboardMask=new r).addChild((new k).add(this.keyboardContainer=new r).add(this.keyboard)));this.keyboardMask.x.set__(64);this.keyboardMask.y.set__(530);this.keyboardMask.scissor=new Ka(0,0,1148,164)},setupPanels:function(){var a=(new z(this.textureAtlas.get("main-panel-bg"))).disablePointer();this.owner.addChild((new k).add(a));a.x.set__(-8);a.y.set__(-4);this.oscillators=new hc(this.owner,this.textureAtlas);this.adsr=new ic(this.owner,this.textureAtlas);this.filter=
new jc(this.owner,this.textureAtlas);this.distortion=new kc(this.owner,this.textureAtlas);this.delay=new lc(this.owner,this.textureAtlas);this.output=new mc(this.owner,this.textureAtlas)},__class__:ub});var F=function(a,b,c){this.highAccuracy=0.001;this.normalAccuracy=0.01;this.returnToDefaultMin=1.0E-6;this.returnToDefaultSpeed=16;this.returningToDefault=this.returnToDefault=!1;this.moveConnection=null;this.lastTime=this.pX=this.pY=0;this.pointerHasMoved=!1;w.call(this);this.value=new Bb(a,b,c);
this.labelFormatter=v(this,this.defaultLabelFormatter)};F.__name__=!0;F.__interfaces__=[Fa];F.roundValueForDisplay=function(a,b){1>b&&(b=1);8<b&&(b=8);var c=Math.pow(10,b),c=Math.round(a*c)/c,h=""+c;1<b&&-1==h.indexOf(".")&&(h=""+c+".0");return h};F.__super__=w;F.prototype=p(w.prototype,{get_name:function(){return"NumericControl_2"},onAdded:function(){this.owner._compMap.Sprite_0.get_pointerDown().connect(v(this,this.pointerDown));this.value.addObserver(this,!0)},onUpdate:function(a){if(this.returningToDefault){var b=
this.value.getValue(!0),c=this.value.normalisedDefaultValue-b;if((0>c?-c:c)<this.returnToDefaultMin)c=0;0!=c?this.value.setValue(b+c*a*this.returnToDefaultSpeed,!0):(this.returningToDefault=!1,this.value.setToDefault())}},onRemoved:function(){this.value.removeObserver(this)},pointerDown:function(a){this.pointerHasMoved=this.returningToDefault=!1;this.pX=a.viewX;this.pY=a.viewY;null!=this.moveConnection&&this.moveConnection.dispose();this.moveConnection=j._platform.getPointer().move.connect(v(this,
this.pointerMove));j._platform.getPointer().up.connect(v(this,this.pointerUp)).once()},pointerMove:function(a){if(a.viewX!=this.pX||a.viewY!=this.pY){var b=this.pX-a.viewX,d=this.pY-a.viewY;this.pX=a.viewX;this.pY=a.viewY;this.pointerHasMoved=!0;this.lastTime=0;b=(a=j._platform.getKeyboard().isDown(c.Control))?b*this.highAccuracy:b*this.normalAccuracy;d=a?d*this.highAccuracy:d*this.normalAccuracy;this.dragDelta(b,d)}},dragDelta:function(a,b){var c=this.value.getValue(!0)+b;this.value.setValue(1<c?
1:0>c?0:c,!0)},doubleClicked:function(){this.value.setValue(this.value.defaultValue)},pointerUp:function(){null!=this.moveConnection&&(this.moveConnection.dispose(),this.moveConnection=null);if(this.pointerHasMoved)this.returnToDefault&&(this.returningToDefault=!0);else{var a=j._platform.getTime();0.5>a-this.lastTime&&this.doubleClicked();this.lastTime=a}},defaultLabelFormatter:function(a){return F.roundValueForDisplay(a,3)},onParameterChange:function(a){a==this.value&&this.updateDisplay()},updateDisplay:function(){},
__class__:F});var sa=function(a,b,c){this.lastPosition=-1;F.call(this,a,b,c)};sa.__name__=!0;sa.create=function(a){null==a&&(a="Slider");var b=S.instance.textureAtlas,c=new k;c.add(new z(b.get("OscSliderTrack"))).addChild((new k).add(new z(b.get("slider-thumb_50%")))).addChild((new k).add((new z(b.get("knob-hash_25%"))).disablePointer())).addChild((new k).add((new z(b.get("Icon_Sine"))).disablePointer())).addChild((new k).add((new z(b.get("Icon_Square"))).disablePointer())).addChild((new k).add((new z(b.get("Icon_Sawtooth"))).disablePointer())).addChild((new k).add((new z(b.get("Icon_Triangle"))).disablePointer()));
c.add(new sa(a,0,u.getMapping(n.INT,A.SINE,A.TRIANGLE)));return c};sa.__super__=F;sa.prototype=p(F.prototype,{onAdded:function(){this.display=this.owner._compMap.Sprite_0;var a=this.owner.firstChild;this.thumb=a._compMap.Sprite_0.centerAnchor();this.thumb.set_pointerEnabled(!0);this.thumb.y.set__(6);a=a.next;this.knobHash=a._compMap.Sprite_0.centerAnchor();this.knobHash.y.set__(3);this.knobHash.alpha.set__(0);var b=-17,a=a.next;this.sine=a._compMap.Sprite_0;this.sine.x.set__(b);this.sine.y.set__(-32);
this.sine.alpha.set__(0.5);b+=37;a=a.next;this.square=a._compMap.Sprite_0;this.square.x.set__(b);this.square.y.set__(-34);this.square.alpha.set__(0.5);b+=37;a=a.next;this.sawtooth=a._compMap.Sprite_0;this.sawtooth.x.set__(b+1);this.sawtooth.y.set__(-32);this.sawtooth.alpha.set__(0.5);a=a.next;this.triangle=a._compMap.Sprite_0;this.triangle.x.set__(b+37+1);this.triangle.y.set__(-33);this.triangle.alpha.set__(0.5);this.minX=0;this.maxX=this.display.getNaturalWidth();this.thumb.get_pointerDown().connect(v(this,
this.pointerDown));F.prototype.onAdded.call(this)},pointerDown:function(a){this.knobHash.alpha.animateTo(1,0.5,H.quadOut);F.prototype.pointerDown.call(this,a)},pointerUp:function(a){this.knobHash.alpha.animateTo(0,0.5,H.quadOut);F.prototype.pointerUp.call(this,a)},pointerMove:function(a){if(a.viewX!=this.pX||a.viewY!=this.pY){var b=this.pX-a.viewX,c=this.pY-a.viewY;this.pX=a.viewX;this.pY=a.viewY;this.pointerHasMoved=!0;this.lastTime=0;this.dragDelta(b,c)}},dragDelta:function(a){a=this.value.getValue(!0)-
a/this.display.getNaturalWidth();this.value.setValue(1<a?1:0>a?0:a,!0)},updateDisplay:function(){this.setPosition(Math.round(this.value.getValue()))},getIcon:function(a){switch(a){case A.SINE:return this.sine;case A.SQUARE:return this.square;case A.SAWTOOTH:return this.sawtooth;case A.TRIANGLE:return this.triangle;default:return null}},setPosition:function(a){-1!=this.lastPosition&&this.getIcon(this.lastPosition).alpha.animateTo(0.5,0.5,H.quartOut);this.getIcon(a).alpha.animateTo(1,0.25,H.quadOut);
var b=a/3*this.display.getNaturalWidth();this.thumb.x.animateTo(b,0.1,H.quadOut);this.knobHash.x.animateTo(b,0.1,H.quadOut);this.lastPosition=a},__class__:sa});var Da=function(a,b,c){F.call(this,a,b,c);this.normalAccuracy=1;this.highAccuracy=0.5;this.minY=20};Da.__name__=!0;Da.create=function(a){null==a&&(a="Slider");var b=S.instance.textureAtlas,c=new k;c.add(new z(b.get("PitchBendBg"))).addChild((new k).add(new z(b.get("PitchBendDrag"))));c.add(new Da(a,0,u.getMapping(n.FLOAT,-1,1)));return c};
Da.__super__=F;Da.prototype=p(F.prototype,{onAdded:function(){this.thumbRange=this.owner._compMap.Sprite_0.getNaturalHeight()-this.minY-this.minY;this.thumb=this.owner.firstChild._compMap.Sprite_0;this.thumb.x.set__(6);this.thumb.anchorY.set__(this.thumb.getNaturalHeight()/2);F.prototype.onAdded.call(this)},dragDelta:function(a,b){var c=this.value.getValue(!0)-b/this.thumbRange;this.value.setValue(1<c?1:0>c?0:c,!0)},updateDisplay:function(){this.setPosition(this.value.getValue(!0))},setPosition:function(a){a=
this.minY+a*this.thumbRange;this.thumb.x.set__(5);this.thumb.y.animateTo(a,0.1,H.quadOut)},__class__:Da});var t=function(a,b,c,h,e,g){this.labelUpdated=!1;F.call(this,a,b,c);this.minAngle=h;this.maxAngle=e;this.radius=g};t.__name__=!0;t.create=function(a,b,c,h,e,g,i){null==i&&(i="Rotary");null==g&&(g=!0);null==e&&(e=!1);null==h&&(h=2.5132741228718345);null==c&&(c=-2.5132741228718345);var j=S.instance.textureAtlas,m=new k;m.add(new z(j.get("knob_"+(e?"25":"50")+"%"))).addChild((new k).add(new z(j.get("knob-nipple_50%")))).addChild((new k).add(new z(j.get("knob-hash_50%"))));
g&&m.addChild((new k).add(l.getField(l.Prime13,"0.00",2171187).setAlpha(0.75)));m.add(new t(i,b,a,c,h,e?5.25:12));return m};t.__super__=F;t.prototype=p(F.prototype,{onAdded:function(){this.display=this.owner._compMap.Sprite_0.centerAnchor();this.centreX=this.display.anchorX._value;this.centreY=this.display.anchorY._value;var a=this.owner.firstChild;this.knobDot=a._compMap.Sprite_0.centerAnchor().disablePixelSnapping().disablePointer();a=a.next;this.knobHash=a._compMap.Sprite_0;this.knobHash.x.set__(6);
this.knobHash.y.set__(6);this.knobHash.alpha.set__(0);a=a.next;this.valueLabel=D.instance(a._compMap.Sprite_0,Ba);K.__instanceof(this.valueLabel,Ba)?(this.valueLabel.centerAnchor(),this.valueLabel.y.set__(this.centreY+this.display.getNaturalHeight()/2+7)):this.valueLabel=null;F.prototype.onAdded.call(this)},pointerDown:function(a){this.knobHash.alpha.animateTo(0.8,0.5,H.quadOut);F.prototype.pointerDown.call(this,a)},pointerUp:function(a){this.knobHash.alpha.animateTo(0,0.5,H.quadOut);F.prototype.pointerUp.call(this,
a)},doubleClicked:function(){this.knobHash.alpha.set__(1);this.knobHash.alpha.animateTo(0,1,H.quartOut);F.prototype.doubleClicked.call(this)},updateDisplay:function(){this.setKnobPosition();null!=this.valueLabel&&(this.valueLabel.set_text(this.labelFormatter(this.value.getValue())),this.valueLabel.centerAnchor(),this.valueLabel.x.set__(this.centreX),this.valueLabel.alpha.set__(0.7),this.labelUpdated=!0);this.lastUpdate=j._platform.getTime()},onUpdate:function(a){F.prototype.onUpdate.call(this,a);
this.labelUpdated&&2.5<j._platform.getTime()-this.lastUpdate&&(this.labelUpdated=!1,this.valueLabel.alpha.animateTo(0.2,2,H.quadOut))},setKnobPosition:function(){var a=this.value.getValue(!0),b=Math.abs(this.maxAngle-this.minAngle),b=this.minAngle+a*b,a=this.centreX+Math.cos(b-1.5707963267948966)*this.radius,b=this.centreY+Math.sin(b-1.5707963267948966)*this.radius;this.knobDot.setXY(a,b)},__class__:t});var ic=function(a,b){this.init(a,b);this.position(651,96)};ic.__name__=!0;ic.prototype={init:function(a,
b){this.owner=a;this._attack=t.create(u.getMapping(n.FLOAT,0,10),0.1,null,null,null,null,"adsrAttack");this._decay=t.create(u.getMapping(n.FLOAT,0,10),1,null,null,null,null,"adsrDecay");this._sustain=t.create(u.getMapping(n.FLOAT,0,1),1,null,null,null,null,"adsrSustain");this._release=t.create(u.getMapping(n.FLOAT,0,10),0.25,null,null,null,null,"adsrRelease");this._panel=aa.fromSubTexture(b.get("InnerPanelBg"),8,8,280,192);this._diagram=new z(b.get("ADSRDiagram"));a.addChild((new k).add(this._panel).addChild(this._attack).addChild(this._decay).addChild(this._sustain).addChild(this._release).addChild((new k).add(this._diagram)));
this.attack=this._attack._compMap.NumericControl_2;this.decay=this._decay._compMap.NumericControl_2;this.sustain=this._sustain._compMap.NumericControl_2;this.release=this._release._compMap.NumericControl_2},position:function(a,b){var c=b+12,e;e=l.getField(l.Prime20,"AEG",3289650).setAlpha(0.55);this.owner.addChild((new k).add(e));e.x.set__(a+12);e.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._diagram.x.set__(a);this._diagram.y.set__(b-84);this._attack._compMap.Sprite_0.x.set__(a);
this._attack._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"attack",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);this._decay._compMap.Sprite_0.x.set__(a+=64);this._decay._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"decay",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);this._sustain._compMap.Sprite_0.x.set__(a+=64);this._sustain._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,
"sustain",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);this._release._compMap.Sprite_0.x.set__(a+=64);this._release._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"release",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c)},__class__:ic};var lc=function(a,b){this.owner=a;this.init(a,b);this.position(420,296)};lc.__name__=!0;lc.prototype={init:function(a,b){this._level=t.create(u.getMapping(n.FLOAT,
0,1),0.25,null,null,null,null,"delayLevel");this._time=t.create(u.getMapping(n.FLOAT,1.0E-4,1),0.333,null,null,null,null,"delayTime");this._feedback=t.create(u.getMapping(n.FLOAT,0,0.9999),0.25,null,null,null,null,"delayFeedback");this._lfpFreq=t.create(u.getMapping(n.FLOAT,20,8E3),8E3,null,null,null,null,"delayLFPFreq");this._lfpQ=t.create(u.getMapping(n.FLOAT,1.0E-4,10),1,null,null,null,null,"delayLFPQ");this._panel=aa.fromSubTexture(b.get("InnerPanelBg"),8,8,360,192);a.addChild((new k).add(this._panel).addChild(this._level).addChild(this._time).addChild(this._feedback).addChild(this._lfpFreq).addChild(this._lfpQ));
this.level=this._level._compMap.NumericControl_2;this.time=this._time._compMap.NumericControl_2;this.feedback=this._feedback._compMap.NumericControl_2;this.lfpFreq=this._lfpFreq._compMap.NumericControl_2;this.lfpQ=this._lfpQ._compMap.NumericControl_2},position:function(a,b){var c=b+12,e;e=l.getField(l.Prime20,"Delay",3289650).setAlpha(0.55);this.owner.addChild((new k).add(e));e.x.set__(a+12);e.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._level._compMap.Sprite_0.x.set__(a);
this._level._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._time._compMap.Sprite_0.x.set__(a);this._time._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"time",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._feedback._compMap.Sprite_0.x.set__(a);this._feedback._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,
"feedback",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=80;this._lfpFreq._compMap.Sprite_0.x.set__(a);this._lfpFreq._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"freq",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._lfpQ._compMap.Sprite_0.x.set__(a);this._lfpQ._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"q",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));
e.x.set__(a);e.y.set__(c)},__class__:lc};var kc=function(a,b){this.owner=a;this.init(a,b);this.position(937,96)};kc.__name__=!0;kc.prototype={init:function(a,b){this._pregain=t.create(u.getMapping(n.FLOAT,0,12),0,null,null,null,null,"distortionPregain");this._waveshaperAmount=t.create(u.getMapping(n.FLOAT,-0.999,0.999),0,null,null,null,null,"distortionWaveshaperAmount");this._bits=t.create(u.getMapping(n.FLOAT,1,24),12,null,null,null,null,"distortionBits");this._rateReduction=t.create(u.getMapping(n.FLOAT,
1,16),1,null,null,null,null,"distortionRateReduction");this._panel=aa.fromSubTexture(b.get("InnerPanelBg"),8,8,272,192);a.addChild((new k).add(this._panel).addChild(this._pregain).addChild(this._waveshaperAmount).addChild(this._bits).addChild(this._rateReduction));this.pregain=this._pregain._compMap.NumericControl_2;this.waveshaperAmount=this._waveshaperAmount._compMap.NumericControl_2;this.bits=this._bits._compMap.NumericControl_2;this.rateReduction=this._rateReduction._compMap.NumericControl_2},
position:function(a,b){var c=b+12,e;e=l.getField(l.Prime20,"Distortion",3289650).setAlpha(0.55);this.owner.addChild((new k).add(e));e.x.set__(a+12);e.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._pregain._compMap.Sprite_0.x.set__(a);this._pregain._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"gain",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._waveshaperAmount._compMap.Sprite_0.x.set__(a);this._waveshaperAmount._compMap.Sprite_0.y.set__(b);
e=l.getField(l.Prime20,"shape",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._bits._compMap.Sprite_0.x.set__(a);this._bits._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"crush",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._rateReduction._compMap.Sprite_0.x.set__(a);this._rateReduction._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"reduce",3289650).setAlpha(0.55).centerAnchor();
this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c)},__class__:kc};var jc=function(a,b){this.owner=a;this.init(a,b);this.position(791,296)};jc.__name__=!0;jc.prototype={position:function(a,b){var c=b+12,e;e=l.getField(l.Prime20,"Filter",3289650).setAlpha(0.55);this.owner.addChild((new k).add(e));e.x.set__(a+12);e.y.set__(c);this._panel.set_x(a);this._panel.set_y(b);a+=43;b+=116;c=b+54;this._type._compMap.Sprite_0.x.set__(a);this._type._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,
"lp/hp",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._frequency._compMap.Sprite_0.x.set__(a);this._frequency._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"freq",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._Q._compMap.Sprite_0.x.set__(a);this._Q._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"q",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));
e.x.set__(a);e.y.set__(c);a=a+16+64;this._attack._compMap.Sprite_0.x.set__(a);this._attack._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"attack",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._release._compMap.Sprite_0.x.set__(a);this._release._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"release",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c);a+=64;this._range._compMap.Sprite_0.x.set__(a);
this._range._compMap.Sprite_0.y.set__(b);e=l.getField(l.Prime20,"range",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(e));e.x.set__(a);e.y.set__(c)},init:function(a,b){this._type=t.create(u.getMapping(n.INT,0,1),0,null,null,null,null,"filterType");this._frequency=t.create(u.getMapping(n.FLOAT,20,8E3),8E3,null,null,null,null,"filterFrequency");this._Q=t.create(u.getMapping(n.FLOAT,1.0E-4,10),1,null,null,null,null,"filterQ");this._attack=t.create(u.getMapping(n.FLOAT,0,10),
0.25,null,null,null,null,"filterAttack");this._release=t.create(u.getMapping(n.FLOAT,0,10),0.5,null,null,null,null,"filterRelease");this._range=t.create(u.getMapping(n.FLOAT,0,1),0,null,null,null,null,"filterRange");this._panel=aa.fromSubTexture(b.get("InnerPanelBg"),8,8,424,192);a.addChild((new k).add(this._panel).addChild(this._type).addChild(this._frequency).addChild(this._Q).addChild(this._attack).addChild(this._release).addChild(this._range));this.type=this._type._compMap.NumericControl_2;this.frequency=
this._frequency._compMap.NumericControl_2;this.Q=this._Q._compMap.NumericControl_2;this.attack=this._attack._compMap.NumericControl_2;this.release=this._release._compMap.NumericControl_2;this.range=this._range._compMap.NumericControl_2},__class__:jc};var hc=function(a,b){this.owner=a;this.init(a,b);this.position(24,96)};hc.__name__=!0;hc.prototype={position:function(a,b){var c;c=l.getField(l.Prime20,"waveform",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a+
94);c.y.set__(190);this._oscPanel.set_x(a);this._oscPanel.set_y(b);b+=42;this._osc0Type._compMap.Sprite_0.x.set__(a+38);this._osc0Type._compMap.Sprite_0.y.set__(b+12);a+=210;this._osc0Level._compMap.Sprite_0.x.set__(a);this._osc0Level._compMap.Sprite_0.y.set__(b);c=l.getField(l.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a);c.y.set__(192);this._osc0Pan._compMap.Sprite_0.x.set__(a+=64);this._osc0Pan._compMap.Sprite_0.y.set__(b);c=l.getField(l.Prime20,
"pan",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a);c.y.set__(192);this._osc0Slide._compMap.Sprite_0.x.set__(a+=80);this._osc0Slide._compMap.Sprite_0.y.set__(b);c=l.getField(l.Prime20,"slide",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a);c.y.set__(192);this._osc0Detune._compMap.Sprite_0.x.set__(a+=64);this._osc0Detune._compMap.Sprite_0.y.set__(b);c=l.getField(l.Prime20,"detune",3289650).setAlpha(0.55).centerAnchor();
this.owner.addChild((new k).add(c));c.x.set__(a);c.y.set__(192);this._osc0Random._compMap.Sprite_0.x.set__(a+=64);this._osc0Random._compMap.Sprite_0.y.set__(b);c=l.getField(l.Prime20,"random",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a);c.y.set__(192);this._oscPhase._compMap.Sprite_0.x.set__(a+=80);this._oscPhase._compMap.Sprite_0.y.set__(b+54);c=l.getField(l.Prime20,"phase",3289650).setAlpha(0.55).centerAnchor();this.owner.addChild((new k).add(c));c.x.set__(a);
c.y.set__(246);a=24;b+=96;this._osc1Type._compMap.Sprite_0.x.set__(a+38);this._osc1Type._compMap.Sprite_0.y.set__(b+12);a+=210;this._osc1Level._compMap.Sprite_0.x.set__(a);this._osc1Level._compMap.Sprite_0.y.set__(b);this._osc1Pan._compMap.Sprite_0.x.set__(a+=64);this._osc1Pan._compMap.Sprite_0.y.set__(b);this._osc1Slide._compMap.Sprite_0.x.set__(a+=80);this._osc1Slide._compMap.Sprite_0.y.set__(b);this._osc1Detune._compMap.Sprite_0.x.set__(a+=64);this._osc1Detune._compMap.Sprite_0.y.set__(b);this._osc1Random._compMap.Sprite_0.x.set__(a+
64);this._osc1Random._compMap.Sprite_0.y.set__(b)},init:function(a,b){this._osc0Type=sa.create("osc0Type");this._osc0Level=t.create(u.getMapping(n.FLOAT,0,1),0.5,null,null,null,null,"osc0Level");this._osc0Pan=t.create(u.getMapping(n.FLOAT,-1,1),0,null,null,null,null,"osc0Pan");this._osc0Slide=t.create(u.getMapping(n.FLOAT,0.001,1),0.1,null,null,null,null,"osc0Slide");this._osc0Detune=t.create(u.getMapping(n.FLOAT,-200,200),0,null,null,null,null,"osc0Detune");this._osc0Random=t.create(u.getMapping(n.FLOAT,
0,100),0,null,null,null,null,"osc0Random");this._osc1Type=sa.create("osc1Type");this._osc1Level=t.create(u.getMapping(n.FLOAT,0,1),0.5,null,null,null,null,"osc1Level");this._osc1Pan=t.create(u.getMapping(n.FLOAT,-1,1),0,null,null,null,null,"osc1Pan");this._osc1Slide=t.create(u.getMapping(n.FLOAT,0.001,1),0.1,null,null,null,null,"osc1Slide");this._osc1Detune=t.create(u.getMapping(n.FLOAT,-200,200),0,null,null,null,null,"osc1Detune");this._osc1Random=t.create(u.getMapping(n.FLOAT,0,100),0,null,null,
null,null,"osc1Random");this._oscPhase=t.create(u.getMapping(n.FLOAT,0,1),0,null,null,null,null,"oscPhase");this._oscPanel=aa.fromSubTexture(b.get("InnerPanelBg"),8,8,616,192);a.addChild((new k).add(this._oscPanel).addChild(this._osc0Type).addChild(this._osc0Level).addChild(this._osc0Pan).addChild(this._osc0Slide).addChild(this._osc0Detune).addChild(this._osc0Random).addChild(this._osc1Type).addChild(this._osc1Level).addChild(this._osc1Pan).addChild(this._osc1Slide).addChild(this._osc1Detune).addChild(this._osc1Random).addChild(this._oscPhase));
this.osc0Type=this._osc0Type._compMap.NumericControl_2;this.osc0Level=this._osc0Level._compMap.NumericControl_2;this.osc0Pan=this._osc0Pan._compMap.NumericControl_2;this.osc0Slide=this._osc0Slide._compMap.NumericControl_2;this.osc0Detune=this._osc0Detune._compMap.NumericControl_2;this.osc0Random=this._osc0Random._compMap.NumericControl_2;this.osc1Type=this._osc1Type._compMap.NumericControl_2;this.osc1Level=this._osc1Level._compMap.NumericControl_2;this.osc1Pan=this._osc1Pan._compMap.NumericControl_2;
this.osc1Slide=this._osc1Slide._compMap.NumericControl_2;this.osc1Detune=this._osc1Detune._compMap.NumericControl_2;this.osc1Random=this._osc1Random._compMap.NumericControl_2;this.oscPhase=this._oscPhase._compMap.NumericControl_2},__class__:hc};var mc=function(a,b){this._outputLevel=t.create(u.getMapping(n.FLOAT,0,1),1,null,null,null,null,"outputLevel");this._pitchBend=Da.create("pitchBend");a.addChild((this._panel=(new k).add(aa.fromSubTexture(b.get("InnerPanelBg"),16,16,386,192))).addChild(this._outputLevel).addChild(this._pitchBend));
this.outputLevel=this._outputLevel._compMap.NumericControl_2;this.pitchBend=this._pitchBend._compMap.NumericControl_2;var c=23,e=296;this._panel._compMap.NineSlice_5.set_x(c);this._panel._compMap.NineSlice_5.set_y(e);var f=e+12,g;g=l.getField(l.Prime20,"Output",3289650).setAlpha(0.55);a.addChild((new k).add(g));g.x.set__(c+12);g.y.set__(f);c+=43;e+=116;f=e+54;this._outputLevel._compMap.Sprite_0.x.set__(c);this._outputLevel._compMap.Sprite_0.y.set__(e);g=l.getField(l.Prime20,"level",3289650).setAlpha(0.55).centerAnchor();
a.addChild((new k).add(g));g.x.set__(c);g.y.set__(f);this._pitchBend._compMap.Sprite_0.x.set__(17);this._pitchBend._compMap.Sprite_0.y.set__(549)};mc.__name__=!0;mc.prototype={__class__:mc};var $b=function(a){this.heldNotes=[];this.noteOn=new x;this.noteOff=new x;this.keyToNote=a.keycodeToNoteIndex};$b.__name__=!0;$b.prototype={onQwertyKeyDown:function(a){if(this.keyToNote.exists(a))this.onNoteKeyDown(this.keyToNote.get(a))},onQwertyKeyUp:function(a){if(0<this.heldNotes.length&&this.keyToNote.exists(a))this.onNoteKeyUp(this.keyToNote.get(a))},
onNoteKeyDown:function(a){-1==ka.indexOf(this.heldNotes,a)&&(this.noteOn.emit(a),this.heldNotes.push(a))},onNoteKeyUp:function(a){a=ka.indexOf(this.heldNotes,a);-1!=a&&this.noteOff.emit(this.heldNotes.splice(a,1)[0])},get_lastNote:function(){return 0<this.heldNotes.length?this.heldNotes[this.heldNotes.length-1]:-1},__class__:$b,__properties__:{get_lastNote:"get_lastNote"}};var Zb=function(a){null==a&&(a=0);this.startOctave=a;this.noteFreq=new da;this.keycodeToNoteFreq=new R;this.keycodeToNoteIndex=
new R;this.keycodeToNoteIndex.set(90,this.noteFreq.noteNameToIndex("C"+a));this.keycodeToNoteIndex.set(83,this.noteFreq.noteNameToIndex("C#"+a));this.keycodeToNoteIndex.set(88,this.noteFreq.noteNameToIndex("D"+a));this.keycodeToNoteIndex.set(68,this.noteFreq.noteNameToIndex("D#"+a));this.keycodeToNoteIndex.set(67,this.noteFreq.noteNameToIndex("E"+a));this.keycodeToNoteIndex.set(86,this.noteFreq.noteNameToIndex("F"+a));this.keycodeToNoteIndex.set(71,this.noteFreq.noteNameToIndex("F#"+a));this.keycodeToNoteIndex.set(66,
this.noteFreq.noteNameToIndex("G"+a));this.keycodeToNoteIndex.set(72,this.noteFreq.noteNameToIndex("G#"+a));this.keycodeToNoteIndex.set(78,this.noteFreq.noteNameToIndex("A"+a));this.keycodeToNoteIndex.set(74,this.noteFreq.noteNameToIndex("A#"+a));this.keycodeToNoteIndex.set(77,this.noteFreq.noteNameToIndex("B"+a));this.keycodeToNoteIndex.set(81,this.noteFreq.noteNameToIndex("C"+(a+1)));this.keycodeToNoteIndex.set(50,this.noteFreq.noteNameToIndex("C#"+(a+1)));this.keycodeToNoteIndex.set(87,this.noteFreq.noteNameToIndex("D"+
(a+1)));this.keycodeToNoteIndex.set(51,this.noteFreq.noteNameToIndex("D#"+(a+1)));this.keycodeToNoteIndex.set(69,this.noteFreq.noteNameToIndex("E"+(a+1)));this.keycodeToNoteIndex.set(82,this.noteFreq.noteNameToIndex("F"+(a+1)));this.keycodeToNoteIndex.set(53,this.noteFreq.noteNameToIndex("F#"+(a+1)));this.keycodeToNoteIndex.set(84,this.noteFreq.noteNameToIndex("G"+(a+1)));this.keycodeToNoteIndex.set(54,this.noteFreq.noteNameToIndex("G#"+(a+1)));this.keycodeToNoteIndex.set(89,this.noteFreq.noteNameToIndex("A"+
(a+1)));this.keycodeToNoteIndex.set(55,this.noteFreq.noteNameToIndex("A#"+(a+1)));this.keycodeToNoteIndex.set(85,this.noteFreq.noteNameToIndex("B"+(a+1)));this.keycodeToNoteIndex.set(73,this.noteFreq.noteNameToIndex("C"+(a+2)));this.keycodeToNoteIndex.set(57,this.noteFreq.noteNameToIndex("C#"+(a+2)));this.keycodeToNoteIndex.set(79,this.noteFreq.noteNameToIndex("D"+(a+2)));this.keycodeToNoteIndex.set(48,this.noteFreq.noteNameToIndex("D#"+(a+2)));this.keycodeToNoteIndex.set(80,this.noteFreq.noteNameToIndex("E"+
(a+2)));this.keycodeToNoteIndex.set(219,this.noteFreq.noteNameToIndex("F"+(a+2)));this.keycodeToNoteIndex.set(187,this.noteFreq.noteNameToIndex("F#"+(a+2)));this.keycodeToNoteIndex.set(221,this.noteFreq.noteNameToIndex("G"+(a+2)));this.keycodeToNoteFreq.set(90,this.keycodeToNoteIndex.get(90));this.keycodeToNoteFreq.set(83,this.keycodeToNoteIndex.get(83));this.keycodeToNoteFreq.set(88,this.keycodeToNoteIndex.get(88));this.keycodeToNoteFreq.set(68,this.keycodeToNoteIndex.get(68));this.keycodeToNoteFreq.set(67,
this.keycodeToNoteIndex.get(67));this.keycodeToNoteFreq.set(86,this.keycodeToNoteIndex.get(86));this.keycodeToNoteFreq.set(71,this.keycodeToNoteIndex.get(71));this.keycodeToNoteFreq.set(66,this.keycodeToNoteIndex.get(66));this.keycodeToNoteFreq.set(72,this.keycodeToNoteIndex.get(72));this.keycodeToNoteFreq.set(78,this.keycodeToNoteIndex.get(78));this.keycodeToNoteFreq.set(74,this.keycodeToNoteIndex.get(74));this.keycodeToNoteFreq.set(77,this.keycodeToNoteIndex.get(77));this.keycodeToNoteFreq.set(81,
this.keycodeToNoteIndex.get(81));this.keycodeToNoteFreq.set(50,this.keycodeToNoteIndex.get(50));this.keycodeToNoteFreq.set(87,this.keycodeToNoteIndex.get(87));this.keycodeToNoteFreq.set(51,this.keycodeToNoteIndex.get(51));this.keycodeToNoteFreq.set(69,this.keycodeToNoteIndex.get(69));this.keycodeToNoteFreq.set(82,this.keycodeToNoteIndex.get(82));this.keycodeToNoteFreq.set(53,this.keycodeToNoteIndex.get(53));this.keycodeToNoteFreq.set(84,this.keycodeToNoteIndex.get(84));this.keycodeToNoteFreq.set(54,
this.keycodeToNoteIndex.get(54));this.keycodeToNoteFreq.set(89,this.keycodeToNoteIndex.get(89));this.keycodeToNoteFreq.set(55,this.keycodeToNoteIndex.get(55));this.keycodeToNoteFreq.set(85,this.keycodeToNoteIndex.get(85));this.keycodeToNoteFreq.set(73,this.keycodeToNoteIndex.get(73));this.keycodeToNoteFreq.set(57,this.keycodeToNoteIndex.get(57));this.keycodeToNoteFreq.set(79,this.keycodeToNoteIndex.get(79));this.keycodeToNoteFreq.set(48,this.keycodeToNoteIndex.get(48));this.keycodeToNoteFreq.set(80,
this.keycodeToNoteIndex.get(80));this.keycodeToNoteFreq.set(219,this.keycodeToNoteIndex.get(219));this.keycodeToNoteFreq.set(187,this.keycodeToNoteIndex.get(187));this.keycodeToNoteFreq.set(221,this.keycodeToNoteIndex.get(221))};Zb.__name__=!0;Zb.prototype={__class__:Zb};var da=function(){null==da.pitchNames&&(da.pitchNames="C,C#,D,D#,E,F,F#,G,G#,A,A#,B".split(","),da.altPitchNames=[null,"Db",null,"Eb",null,null,"Gb",null,"Ab",null,"Bb",null]);this.noteFrequencies=new Float32Array(128);this.noteNames=
[];this._octaveMiddleC=3;this.set_tuningBase(440)};da.__name__=!0;da.prototype={reset:function(){for(var a=0;128>a;){var b=a++;this.noteNames[b]=this.indexToName(b);this.noteFrequencies[b]=this.get_tuningBase()*Math.pow(2,0.08333333333333333*(b-69))}},detuneFreq:function(a,b){return 0>b?a/Math.pow(2,8.333333333333334E-4*-b):0<b?a*Math.pow(2,8.333333333333334E-4*b):a},noteNameToIndex:function(a){var b=a.indexOf("/");-1!=b&&(a=a.substring(0,b));for(var c=this.noteNames.length;-1<--c;)if(b=this.noteNames[c],
-1<b.indexOf(a))return c;return-1},indexToName:function(a){var b=a%12,a=(0.08333333333333333*a|0)-(5-this.get_octaveMiddleC()),c=da.pitchNames[b]+a;null!=da.altPitchNames[b]&&(c+="/"+da.altPitchNames[b]+a);return c},get_tuningBase:function(){return this._tuningBase},set_tuningBase:function(a){this._tuningBase=a;this.invTuningBase=1/(0.5*this._tuningBase);this.reset();return this._tuningBase},get_octaveMiddleC:function(){return this._octaveMiddleC},__class__:da,__properties__:{get_octaveMiddleC:"get_octaveMiddleC",
set_tuningBase:"set_tuningBase",get_tuningBase:"get_tuningBase"}};var ja,vc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var wc={__name__:["Int"]},xc={__name__:["Dynamic"]},tc=Number;tc.__name__=["Float"];var uc=Boolean;
uc.__ename__=["Bool"];var yc={__name__:["Class"]},zc={};m.Element="element";m.PCData="pcdata";m.CData="cdata";m.Comment="comment";m.DocType="doctype";m.ProcessingInstruction="processingInstruction";m.Document="document";var M=T.getProperty(window,"OscillatorNode");null!=M&&(window.OscillatorTypeShim=Object.prototype.hasOwnProperty.call(M,"SINE")?{SINE:M.SINE,SQUARE:M.SQUARE,TRIANGLE:M.TRIANGLE,SAWTOOTH:M.SAWTOOTH,CUSTOM:M.CUSTOM}:{SINE:"sine",SQUARE:"square",TRIANGLE:"triangle",SAWTOOTH:"sawtooth",
CUSTOM:"custom"});M=T.getProperty(window,"BiquadFilterNode");null!=M&&(window.FilterTypeShim=Object.prototype.hasOwnProperty.call(M,"LOWPASS")?{ALLPASS:M.ALLPASS,BANDPASS:M.BANDPASS,HIGHPASS:M.HIGHPASS,HIGHSHELF:M.HIGHSHELF,LOWPASS:M.LOWPASS,LOWSHELF:M.LOWSHELF,NOTCH:M.NOTCH,PEAKING:M.PEAKING}:{ALLPASS:"allpass",BANDPASS:"bandpass",HIGHPASS:"highpass",HIGHSHELF:"highshelf",LOWPASS:"lowpass",LOWSHELF:"lowshelf",NOTCH:"notch",PEAKING:"peaking"});va.instance=new va;J.DISPATCHING_SENTINEL=new za(null,
null);j.root=new k;j.uncaughtError=new x;j.hidden=new V(!1);j.volume=new B(1);j._platform=va.instance;j._calledInit=!1;X.__meta__={obj:{assets:[{fonts:[{bytes:36282,md5:"ed0b12cefe3347b38ceeef6f9906945d",name:"Prime14.fnt"},{bytes:7477,md5:"e12fc759beeac6ab64b5be1d887874d8",name:"Prime14_0.png"},{bytes:25928,md5:"aa6bd205c87cab4c8a8b55cd9f144c7f",name:"Prime22.fnt"},{bytes:10598,md5:"6ae0c93e0c18711e92c6d09e7f404e05",name:"Prime22_0.png"},{bytes:4532,md5:"3346d1965b9b92034c53dc4299aeb9a5",name:"Prime22_1.png"},
{bytes:38204,md5:"07486cd37b710833e5aff926c2b67fa7",name:"Prime24.fnt"},{bytes:7852,md5:"5e5367359a16e3b6610ffd9cbf7a2096",name:"Prime24_0.png"},{bytes:7390,md5:"988156320ad6e33245ab65bdc77fa568",name:"Prime24_1.png"},{bytes:38172,md5:"429083da87bdebde91624c6a2c1a4749",name:"Prime32.fnt"},{bytes:29282,md5:"9aad77450eaeb3bf367ad3333bfa3fd9",name:"Prime32_0.png"}],bootstrap:[{bytes:36282,md5:"a8d2809c1bde26e2863279b7063b27bb",name:"font/Prime13.fnt"},{bytes:6789,md5:"a5e204dcb7f4ea16084cc6dc8992aa44",
name:"font/Prime13_0.png"},{bytes:25928,md5:"275955a2886df7e2e78ff63f3ff09897",name:"font/Prime20.fnt"},{bytes:11135,md5:"80ce085528ba12587a04562ca0450332",name:"font/Prime20_0.png"},{bytes:2160,md5:"379d68386232530f1d7ed43f5420b11c",name:"font/Prime20_1.png"},{bytes:139359,md5:"6941f68e83f52cdfdd012ef2a0bc9205",name:"sprites.png"},{bytes:2438,md5:"f7119820254738ea13e7257555781932",name:"sprites.xml"}]}]}};X._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?
!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();r._scratchPoint=new Hb;na.NEWLINE=new gb(10);$._sharedEvent=new Mb;W._sharedEvent=new Nb;N._sharedEvent=new Ob;ya.CANVAS_TEXTURES=(new ea("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);y._mediaRefCount=0;y._detectBlobSupport=!0;o.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];o.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new ea("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);C._detectSupport=!0;ta.count=
0;fa.escapes=function(){var a=new U;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);A.SINE=0;A.SQUARE=1;A.SAWTOOTH=2;A.TRIANGLE=3;A.CUSTOM=4;G.ALLPASS=0;G.BANDPASS=1;G.HIGHPASS=2;G.HIGHSHELF=3;G.LOWPASS=4;G.LOWSHELF=5;G.NOTCH=6;G.PEAKING=7;S.main()})();
